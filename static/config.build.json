[{"action":"redirect","name":"tf1","pattern":"https://www.tf1.fr/public/VideoPage_*","url":"https://www.tf1.fr/public/VideoPage_339c58745d7f51c7cd7a.js","diff":[[0,"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1000:function(e,t,n){e.exports={page:\"VideoPage_page_qFY67\",noScroll:\"VideoPage_noScroll_2INcY\",headerTrigger:\"VideoPage_headerTrigger_2yEi2\",content:\"VideoPage_content_1zEmQ\",replay:\"VideoPage_replay_3G9vh\",PlayerIsFullScreen:\"VideoPage_PlayerIsFullScreen_lJ0rj\",playerIsFullScreen:\"VideoPage_PlayerIsFullScreen_lJ0rj\",background:\"VideoPage_background_3Aw9m\",companion:\"VideoPage_companion_3ac09\",container:\"VideoPage_container_hHF9T\",player:\"VideoPage_player_4i6n8\",degrade:\"VideoPage_degrade_3ToLM\",slider:\"VideoPage_slider_1IQQw\",loading:\"VideoPage_loading_Yftvt\",withoutPlayer:\"VideoPage_withoutPlayer_27WQM\",relatedProgram:\"VideoPage_relatedProgram_1Ru2P\",fadeIn:\"VideoPage_fadeIn_3U6Oi\",fadeInBg:\"VideoPage_fadeInBg_g5bfO\"}},874:function(e,t,n){\"use strict\";n.r(t);var r=n(0),o=n.n(r),a=n(3),i=n.n(a),l=n(299),u=n(181),c=n(847),s=n(40),d=n.n(s),p=n(9),f=n(1),m=n(64),h=n(16),y=n(887),v=n(19),b=n(184),g=n(17),_=n(5);function S(e){return(S=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var T,k=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return r=this,o=(e=w(t)).call.apply(e,[this].concat(c)),n=!o||\"object\"!==S(o)&&\"function\"!=typeof o?P(r):o,a=P(P(n)),l=function(){var e=n.props,t=e.videoBySlug,r=e.updateLastProgramResult,o=e.updateLastProgram;if(t.program&&(!r.data||!r.data.updateLastProgram||r.data.updateLastProgram.lastProgramId!==t.program.id)){var a=Object(y.d)(t.program.categories),i=a&&a.label||\"\",l=t.type;o(t.program.id,l,i)}},(i=\"mutateProgramList\")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,o,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r[\"Component\"]),n=t,(o=[{key:\"componentDidMount\",value:function(){this.mutateProgramList()}},{key:\"componentDidUpdate\",value:function(){this.mutateProgramList()}},{key:\"render\",value:function(){return this.props.children}}])&&E(n.prototype,o),a&&E(n,a),t}(),j=n(935),C=n(912),A=n(972),D=n(157),I=n(938),N=n(1e3),x=n.n(N),R=n(306),M=n(534),B=n(111),V=n(526),L=n(158),F=n(309),U=n(51),W=n(103),z=n(524),H=n(971),G=n(313),Q=n(145),J=n(525);function q(e){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=d()()(T=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=K(t).call(this,e),n=!o||\"object\"!==q(o)&&\"function\"!=typeof o?Z(r):o,$(Z(Z(n)),\"nextVideo\",void 0),$(Z(Z(n)),\"sentData\",void 0),$(Z(Z(n)),\"getStartTime\",function(e){return e&&e.elapsedTime===e.duration?0:e&&e.elapsedTime}),$(Z(Z(n)),\"handleMediaEnd\",function(){if(n.nextVideo){var e=f.b.getVideoPath(n.nextVideo.channelSlug,n.nextVideo.programSlug,n.nextVideo.videoSlug);n.props.history.push(e)}}),$(Z(Z(n)),\"handleSimilarVideosUpdate\",function(e){if(n.nextVideo=null,e.length>0){var t=e[0];t.slug&&t.programSlug&&t.channelSlug&&(n.nextVideo={videoSlug:t.slug,programSlug:t.programSlug,channelSlug:t.channelSlug})}}),$(Z(Z(n)),\"handleShareSocial\",function(e,t){}),$(Z(Z(n)),\"setBreadCrumb\",function(e){var t=n.props,r=t.contexts,o=t.match,a=o.params.channelSlug,i=o.params.programSlug,l=o.params.videoSlug;r.breadCrumb.update(o.path,{channel:{slug:a},program:{slug:i,label:e.videoBySlug&&e.videoBySlug.program&&e.videoBySlug.program.name||\"\"},video:{slug:l,label:e.videoBySlug&&e.videoBySlug.title||\"\"}})}),n.sentData=null,n.state={fullScreen:!1},n}var a,u,s;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r[\"Component\"]),a=t,(u=[{key:\"render\",value:function(){var e=this,t=this.props,r=t.match,a=t.location,u=t.contexts.deviceContext.device,s=r.params.programSlug,d=r.params.videoSlug,m=r.params.channelSlug;return o.a.createElement(b.h,{slug:d,programSlug:s},function(t){var r=t.data,h=t.error,v=t.loading,S=r&&r.videoBySlug&&r.videoBySlug.program?f.b.getVideoPath(r.videoBySlug.program.mainChannel.slug,r.videoBySlug.program.slug,r.videoBySlug.slug,!0):void 0,E=r&&r.videoBySlug&&r.videoBySlug.program?f.b.getVideoPath(r.videoBySlug.program.mainChannel.slug,r.videoBySlug.program.slug,r.videoBySlug.slug):void 0,w=r&&r.videoBySlug&&r.videoBySlug.decoration&&r.videoBySlug.decoration.description?r.videoBySlug.decoration.description:void 0,O=r&&r.videoBySlug?Object(y.f)(r.videoBySlug):void 0,P=r&&r.videoBySlug&&r.videoBySlug.program?\"\".concat(r.videoBySlug.program.name,\", \").concat(r.videoBySlug.program.mainChannel.label):void 0,T=r&&r.videoBySlug?r.videoBySlug.title:void 0,D=r&&r.videoBySlug?{section:r.videoBySlug.program?r.videoBySlug.program.name:void 0,publishedTime:r.videoBySlug.date,modifiedTime:r.videoBySlug.date}:void 0;return o.a.createElement(R.b,{ampUrl:S,article:D,canonical:E,description:w,image:O,keywords:P,title:T,url:a.pathname},function(t){return t&&410===t.code?o.a.createElement(l.a,{push:!0,to:f.b.getProgramPath(m,s)}):function(t){var r=t.data,s=t.error,f=t.loading,h=t.seo;if(s&&!r)return o.a.createElement(V.a,null);if(r&&r.videoBySlug&&r.videoBySlug.slug===d){var v=r.videoBySlug,S=v.program,E=v.decoration,w=v.title,O=v.id,P=v.streamId,T=v.playingInfos,D=v.type,N=v.date,R=v.isBookmarked,L=n(947),F=Object(y.i)(S),U=E&&E.label,W=h&&h.tags&&h.tags.h1||U||w||\"\";return S&&S.mainChannel.slug!==m?o.a.createElement(l.a,{to:a.pathname.replace(m,S.mainChannel.slug)}):(e.sendTrack(r),e.setBreadCrumb(r),o.a.createElement(_.c,{theme:_.a.DARK},o.a.createElement(I.a,{video:v}),o.a.createElement(c.a,null,o.a.createElement(c.b,{reverse:!0,triggerElement:\"#headerTrigger\",triggerHook:\"onLeave\",indicators:!1},function(e,t){return o.a.createElement(_.i,null,function(n){var r=n.changeTheme,a=n.theme;return o.a.createElement(_.h,{changeTheme:r,theme:a,scrollDirection:t.scrollDirection,progress:e,progressMaxTheme:_.g.GREY},o.a.createElement(\"div\",{id:\"headerTrigger\",className:x.a.headerTrigger}))})})),o.a.createElement(g.a,null,function(t){var n=t.auth,r=n.hasChecked,a=n.isConnected,l=n.authentActivated;return o.a.createElement(\"div\",{className:x.a.page},F&&o.a.createElement(\"div\",{className:x.a.background},o.a.createElement(\"img\",{alt:\"fond \".concat(W),src:F})),o.a.createElement(\"div\",{className:i()(x.a.replay,e.state.fullScreen?x.a.PlayerIsFullScreen:null)},o.a.createElement(\"div\",{className:x.a.container},o.a.createElement(\"div\",{className:x.a.companion},o.a.createElement(\"img\",{alt:\"premier plan \".concat(W),src:L})),o.a.createElement(\"div\",{className:x.a.degrade}),o.a.createElement(\"div\",{className:i()(x.a.player,e.state.fullScreen?x.a.noScroll:null)},o.a.createElement(M.b,null,function(t,n){var i=Object(z.c)(r,a,!1!==l)||Object(z.b)(v,p.n);return o.a.createElement(k,{videoBySlug:v,updateLastProgram:t,updateLastProgramResult:n},o.a.createElement(b.f,null,function(t){return o.a.createElement(H.a,{id:P,isAllowed:i,serviceType:g.c.Replay,startTime:e.getStartTime(T),autoStart:!0,onProgress:function(e){var n=e.value;a&&t(O,Math.max(Math.floor(n),1))},onFullScreen:function(t){e.setState({fullScreen:t})},onMediaEnd:function(){a&&t(O,T&&T.duration||0),e.handleMediaEnd(),e.setState({fullScreen:!1})}})}))})),o.a.createElement(A.a,{isSEOMainTag:!0,videoId:O,programSlug:S.slug,programName:S.name,channelSlug:S.mainChannel&&S.mainChannel.slug,type:D,remainingDays:T&&T.remainingDays||void 0,title:W,isReplay:!0,deviceType:u&&u.device?u.device.type:\"\",addDate:new Date(N),description:E&&E.description||\"\",onShareSocial:e.handleShareSocial,isBookmarked:R,programThumbnail:Object(y.f)(S)}))),o.a.createElement(\"div\",{className:x.a.content},o.a.createElement(C.a,{id:O,title:B.j,className:x.a.slider,onVideosUpdate:e.handleSimilarVideosUpdate,dark:!0}),o.a.createElement(j.a,{className:x.a.relatedProgram,videoId:O,title:B.i})))})))}return f||!r?o.a.createElement(V.a,null):f||!r||r.videoBySlug?null:o.a.createElement(G.a,null)}({data:r,error:h,loading:v,seo:t})})})}},{key:\"sendTrack\",value:function(e){if(e&&e.videoBySlug&&e.videoBySlug.program&&(null===this.sentData||this.sentData.videoBySlug&&this.sentData.videoBySlug.id!==e.videoBySlug.id)){var t=e.videoBySlug,n=t.slug,r=t.id,o=t.type,a=t.program,i=t.date,l=t.episode,u=t.season,c=t.tags,s=this.props.tracking;s.trackEvent(Object(m.c)(h.f.VIDEO)),s.trackEvent(Object(L.f)({programName:a.slug,programGenre:Object(y.a)(a.categories),programSubGenre:Object(y.b)(a.categories),linkingChannel:a.mainChannel.slug,broadcastingChannel:a.mainChannel.slug,programId:a.id})),s.trackEvent(Object(F.b)({videoName:n,videoRefvideoId:r,videoType:o,broadcastingDate:i,seasonEpisode:Object(y.h)(u||0,l||0),videoTags:Object(y.c)(c)})),s.trackEvent(Object(J.a)(U.a,[Q.d])),this.sentData=e}}}])&&Y(a.prototype,u),s&&Y(a,s),t}())||T;t.default=Object(u.a)(Object(v.b)({deviceContext:W.a,breadCrumb:D.a})(ee))},878:function(e,t,n){\"use strict\";var r,o=n(307),a=n(3),i=n.n(a),l=n(0),u=n.n(l),c=n(52),s=function(e,t,n,o){r&&clearTimeout(r);var a=e.scrollLeft,i=t-a,l=0;!function t(){var u=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}(l+=20,a,i,n);e.scrollLeft=u,l<n?r=setTimeout(t,20):o()}()};var d=n(5),p=n(103),f=n(884),m=n.n(f),h=n(19);function y(e){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=500,w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=b(t).call(this,e),n=!o||\"object\"!==y(o)&&\"function\"!=typeof o?_(r):o,S(_(_(n)),\"firstItem\",u.a.createRef()),S(_(_(n)),\"items\",u.a.createRef()),S(_(_(n)),\"main\",u.a.createRef()),S(_(_(n)),\"itemsContainer\",u.a.createRef()),S(_(_(n)),\"containerWidth\",0),S(_(_(n)),\"currentIndex\",0),S(_(_(n)),\"hasScrolled\",!1),S(_(_(n)),\"isScrolling\",!1),S(_(_(n)),\"itemsWidth\",0),S(_(_(n)),\"lastIndexToTranslate\",0),S(_(_(n)),\"margin\",0),S(_(_(n)),\"timeOut\",void 0),S(_(_(n)),\"zoomArea\",8),S(_(_(n)),\"clearTimeOut\",function(){n.timeOut&&clearTimeout(n.timeOut)}),S(_(_(n)),\"getXPos\",function(){return n.itemsWidth>0?(n.itemsWidth+n.margin)*n.currentIndex:0}),S(_(_(n)),\"getSlideStep\",function(){return Math.max(1,Math.floor((n.containerWidth+n.zoomArea/2)/(n.itemsWidth+n.margin)))}),S(_(_(n)),\"goToPrevious\",function(){n.clearTimeOut();var e=n.getSlideStep();n.timeOut=setTimeout(n.goToPrevious,4*E/3),n.currentIndex=Math.max(n.currentIndex-e+.5,0),n.updateNav(),n.updateScrollTo()}),S(_(_(n)),\"goToNext\",function(){n.clearTimeOut();var e=n.getSlideStep();n.timeOut=setTimeout(n.goToNext,4*E/3),n.currentIndex=Math.min(n.currentIndex+e-.5,n.lastIndexToTranslate),n.updateNav(),n.updateScrollTo()}),S(_(_(n)),\"handleMouseDownNext\",function(){document.addEventListener(\"mouseup\",n.handleMouseUp),n.isScrolling=!0,n.goToNext()}),S(_(_(n)),\"handleMouseDownPrevious\",function(){document.addEventListener(\"mouseup\",n.handleMouseUp),n.isScrolling=!0,n.goToPrevious()}),S(_(_(n)),\"handleScroll\",function(e){var t=n.props.onScroll,r=void 0===t?function(){}:t,o=n.items.current.scrollLeft,a=Math.floor((o+2*n.zoomArea)/(n.itemsWidth+n.margin));n.hasScrolled=!0,n.isScrolling||(n.currentIndex=a),n.updateNav(),r()}),S(_(_(n)),\"handleScrollEnd\",function(){n.isScrolling=!1;var e=n.getXPos();n.items.current&&(n.items.current.scrollLeft=e)}),S(_(_(n)),\"updateDimensions\",function(){if(n.itemsWidth=n.firstItem.current?n.firstItem.current.clientWidth:0,n.margin=n.firstItem.current?parseFloat(window.getComputedStyle(n.firstItem.current).marginRight||\"0\"):0,n.containerWidth=n.main.current?n.main.current.clientWidth:0,n.zoomArea=n.main.current?-parseFloat(window.getComputedStyle(n.main.current).marginLeft||\"0\"):0,n.itemsWidth>0&&n.containerWidth>0){var e=n.getSlideStep(),t=(n.itemsWidth+n.margin)*e+n.zoomArea;n.lastIndexToTranslate=Math.max(0,n.props.total-e),n.setState({slideWidth:t})}}),S(_(_(n)),\"updateNav\",function(){if(n.main&&n.main.current){var e=0===n.items.current.scrollLeft,t=n.items.current.scrollWidth-n.items.current.offsetWidth-n.items.current.scrollLeft<=0;n.state.hidePrevious===e&&n.state.hideNext===t||n.setState({hidePrevious:e,hideNext:t})}}),S(_(_(n)),\"updateScrollTo\",function(){var e=n.getXPos(),t=n.items.current.scrollLeft,r=E*Math.abs(e-t)/n.containerWidth;n.hasScrolled=!0,s(n.items.current,e,r,n.handleScrollEnd)}),S(_(_(n)),\"getSeeAllLinksClassname\",function(){var e=n.props.children;return e.length<2?\"slider__hideButton\":e.length<3?\"slider__deviceSmartphone\":e.length<4?\"slider__deviceTablet\":e.length<5?\"slider__deviceTabletLg\":\"slider__deviceDesktop\"}),n.state={hidePrevious:!0,hideNext:!0,slideWidth:NaN},n.handleResize=n.handleResize.bind(_(_(n))),n.handleMouseUp=n.handleMouseUp.bind(_(_(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,u.a.Component),n=t,(r=[{key:\"componentDidMount\",value:function(){this.updateDimensions(),this.updateNav(),window.addEventListener(\"resize\",this.handleResize)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.handleResize),this.clearTimeOut()}},{key:\"componentDidUpdate\",value:function(e){this.updateNav();var t=this.getSlideStep();this.lastIndexToTranslate=Math.max(0,this.props.total-t)}},{key:\"render\",value:function(){var e=this,t=this.props,n=t.className,r=t.children,a=t.showAsColumnOnMobile,l=t.itemClassName,s=t.itemsContainerClassName,p=t.moreBtnUrl,f=t.navClassName,h=t.title,y=t.device,v=t.showSeeAllButton,b=this.state,g=b.hidePrevious,_=b.hideNext,S=b.slideWidth;return u.a.createElement(d.b,null,function(t){var b=t.theme===d.a.DARK?\"slider__dark_theme\":\"slider__light_theme\",E=y&&y.device&&\"desktop\"===y.device.type,w=E?\"desktop\":\"mobile\";return u.a.createElement(\"div\",{className:i()(m.a.main,n,m.a[w],a&&m.a.columnOnMobile,m.a[b]),ref:e.main},h?u.a.createElement(\"h2\",{className:m.a.title},h):null,!(g&&_)&&E&&u.a.createElement(\"div\",{className:i()(m.a.paperShadow,m.a.paper__left,g&&m.a.paper_disabled)}),!(g&&_)&&E&&u.a.createElement(\"div\",{className:m.a.nav,style:isNaN(S)?void 0:{width:S}},e.hasScrolled&&u.a.createElement(\"div\",{className:i()(m.a.nav__previous,f,g&&m.a.nav__previous_disabled),onMouseDown:g?function(){}:e.handleMouseDownPrevious},u.a.createElement(o.a,null)),u.a.createElement(\"div\",{className:i()(m.a.nav__next,f,_&&m.a.nav__next_disabled),onMouseDown:_?function(){}:e.handleMouseDownNext},u.a.createElement(o.a,null))),u.a.createElement(\"div\",{className:i()(m.a.items,m.a[w]),onScroll:e.handleScroll},u.a.createElement(\"div\",{ref:e.items,className:i()(m.a.scrollContainer,E?m.a.hideScrollbar:\"\")},u.a.createElement(\"div\",{className:i()(s,m.a.itemsContainer),ref:e.itemsContainer},r.map(function(t,n){return u.a.createElement(\"div\",{key:\"item_\".concat(n),className:i()(m.a.item,l),ref:0===n&&e.firstItem||void 0},t)})))),v&&p&&u.a.createElement(c.a,{to:p,className:i()(m.a.slider__nav__seeAll,m.a[e.getSeeAllLinksClassname()])},\"Voir tout\"),!(g&&_)&&E&&u.a.createElement(\"div\",{className:i()(m.a.paperShadow,m.a.paper__right,_&&m.a.paper_disabled)}))})}},{key:\"handleMouseUp\",value:function(){document.removeEventListener(\"mouseup\",this.handleMouseUp),this.clearTimeOut()}},{key:\"handleResize\",value:function(){this.clearTimeOut(),this.updateDimensions(),this.updateNav()}}])&&v(n.prototype,r),a&&v(n,a),t}();t.a=Object(h.a)(p.a)(w)},879:function(e,t,n){e.exports={container:\"VideoPlayer_container_3sRQv\",withoutPlayer:\"VideoPlayer_withoutPlayer_3fTKR\",player:\"VideoPlayer_player_CW0KJ\"}},880:function(e,t,n){\"use strict\";(function(e){var r,o=n(848),a=n.n(o),i=n(0),l=n.n(i),u=n(849),c=n.n(u),s=n(40),d=n.n(s),p=n(82),f=n(19),m=n(103),h=n(879),y=n.n(h),v=n(17),b=n(162),g=n.n(b),_=n(881),S=n(309),E=n(886),w=n(882);function O(e){return(O=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){I(e,t,n[t])})}return e}function T(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){T(a,r,o,i,l,\"next\",e)}function l(e){T(a,r,o,i,l,\"throw\",e)}i(void 0)})}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=\"true\"===e.env.TF1_REMOVE_ADS_FOR_DEBUG||!1,R=d()()(r=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=C(t).call(this,e),n=!o||\"object\"!==O(o)&&\"function\"!=typeof o?D(r):o,I(D(D(n)),\"DEFAULT_UPDATE_TIME_OFFSET\",6e4),I(D(D(n)),\"player\",void 0),I(D(D(n)),\"lastUpdateTime\",void 0),I(D(D(n)),\"isInAdMode\",!1),I(D(D(n)),\"adIsPaused\",!1),I(D(D(n)),\"adIsPausedByWindow\",!1),I(D(D(n)),\"isWindowHidden\",!1),I(D(D(n)),\"continuousPlay\",!1),I(D(D(n)),\"listeners\",void 0),I(D(D(n)),\"reachedDurationTime\",void 0),I(D(D(n)),\"eventTracker\",void 0),I(D(D(n)),\"mediaJustEnded\",void 0),I(D(D(n)),\"setupPlayer\",function(e){var t=new a.a(e);return n.listeners.forEach(function(e){return t.on(e,function(t){return n.eventTracker.handle(e,t,n.reachedDurationTime)})}),t.on(\"timeupdate\",n.handleTimeUpdate),t.on(\"ads:ad:end\",n.handleSpotEnd),t.on(\"ads:ad:pause\",n.handleAdIsPaused),t.on(\"ads:ad:resume\",n.handleAdIsResumed),t.on(\"ads:ad:start\",n.handleSpotStart),t.on(\"ads:slot:start\",n.handleSlotStart),t.on(\"ended\",n.handleMediaStop),t.on(\"seeked\",n.handleMediaSeek),t.on(\"fullscreenEnter\",n.handleFullScreenEnter),t.on(\"fullscreenExit\",n.handleFullScreenExit),t.on(\"error\",n.handleError),t}),I(D(D(n)),\"destroyPlayer\",function(e){e&&(n.listeners.forEach(function(e){return n.player.off(e)}),n.player.off(\"timeupdate\"))}),I(D(D(n)),\"controlAdPlay\",function(e){void 0!==e&&e!==n.isWindowHidden&&(n.isWindowHidden=e),n.isInAdMode&&(!n.isWindowHidden&&n.props.isVisible&&n.adIsPaused&&n.adIsPausedByWindow?n.playAd():!n.isWindowHidden&&n.props.isVisible||n.adIsPaused||n.pauseAd())}),I(D(D(n)),\"getUserDMPObject\",function(e){return decodeURIComponent(e).split(\"&\").map(function(e){return e.split(\"=\").map(function(e){return e.trim()})}).reduce(function(e,t){return e[t[0]]=t[1],e},{})}),I(D(D(n)),\"playAd\",function(){n.isInAdMode&&n.adIsPaused&&n.player.play()}),I(D(D(n)),\"pauseAd\",function(){n.isInAdMode&&!n.adIsPaused&&(n.player.pause(),n.adIsPausedByWindow=!0)}),I(D(D(n)),\"handleAdIsPaused\",function(){n.adIsPaused=!0}),I(D(D(n)),\"handleSlotStart\",function(){n.isInAdMode=!0}),I(D(D(n)),\"handleSpotEnd\",function(){n.isInAdMode=!1}),I(D(D(n)),\"handleSpotStart\",function(){n.isInAdMode=!0}),I(D(D(n)),\"handleAdIsResumed\",function(){n.adIsPaused=!1,n.adIsPausedByWindow=!1}),I(D(D(n)),\"handleTimeUpdate\",function(e){n.reachedDurationTime=e.value;var t=n.props.updateTimeOffset||n.DEFAULT_UPDATE_TIME_OFFSET;\"function\"==typeof n.props.onProgress&&Date.now()-n.lastUpdateTime>t&&(n.lastUpdateTime=Date.now(),n.eventTracker.handle(\"timeupdate\",{value:e.value},n.reachedDurationTime),n.props.onProgress(e))}),I(D(D(n)),\"handleMediaSeek\",function(e){var t=e.value;n.reachedDurationTime=t.to,n.props.onProgress&&n.props.onProgress({value:t.to})}),I(D(D(n)),\"handleFullScreenEnter\",function(){n.props.onFullScreen&&n.props.onFullScreen(!0)}),I(D(D(n)),\"handleFullScreenExit\",function(){n.props.onFullScreen&&n.props.onFullScreen(!1)}),I(D(D(n)),\"handleError\",function(e){var t=n.props.onError;n.setState({errorPlayer:e.value.type}),t&&t(e.value.type)}),I(D(D(n)),\"handleMediaStop\",function(){n.mediaJustEnded=!0,\"function\"==typeof n.props.onMediaEnd&&n.props.onMediaEnd()}),n.eventTracker=new E.a(n.props.tracking.trackEvent),n.reachedDurationTime=0,n.mediaJustEnded=!1,n.lastUpdateTime=Date.now(),n.state={errorPlayer:void 0},n.listeners=[\"ads:ad:error\",\"ads:ad:end\",\"ads:ad:pause\",\"ads:ad:resume\",\"ads:ad:skipped\",\"ads:ad:start\",\"ads:slot:end\",\"ads:slot:start\",\"ads:update\",\"buffering:end\",\"buffering:start\",\"ended\",\"error\",\"fullscreenEnter\",\"fullscreenExit\",\"loading\",\"mediainfo:update\",\"mute\",\"pause\",\"play\",\"ready\",\"replay\",\"seeked\",\"unmute\",\"volume\",\"broadcastads:slot:start\",\"broadcastads:slot:end\"],n}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,l.a.Component),n=t,(r=[{key:\"componentDidMount\",value:function(){this.initPlayer(),w.a(this.controlAdPlay),this.props.tracking.trackEvent(Object(S.b)({playAlong:\"manuel\"}))}},{key:\"shouldComponentUpdate\",value:function(e,t){return this.props.id!==e.id||this.props.isVisible!==e.isVisible||this.state.errorPlayer!==t.errorPlayer}},{key:\"componentDidUpdate\",value:function(e){e.isVisible!==this.props.isVisible&&this.controlAdPlay(),this.props.id!==e.id&&(this.props.onProgress&&e.onProgress({value:this.reachedDurationTime}),this.continuousPlay=this.mediaJustEnded,this.mediaJustEnded&&this.props.tracking.trackEvent(Object(S.b)({playAlong:\"auto\"})),this.changeVideo())}},{key:\"componentWillUnmount\",value:function(){\"undefined\"!=typeof window&&(this.props.onProgress&&this.props.onProgress({value:this.reachedDurationTime}),this.eventTracker.handle(\"unmount\",{value:{}},this.reachedDurationTime),this.destroyPlayer(this.player),w.b(this.controlAdPlay))}},{key:\"render\",value:function(){return l.a.createElement(\"div\",{className:y.a.player,id:\"player\"})}},{key:\"initPlayer\",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPlayerConfig();case 2:t=e.sent,this.player=this.setupPlayer(t),this.eventTracker.setGetCurrentContentType(this.player.getCurrentContentType.bind(this.player)),this.player.init();case 6:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"getPlayerConfig\",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t,n,r,o,a,i,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=\"prod\",n=this.getStartTime(),r=this.props.id,o=!(!this.props.autoStart||!Object(p.d)()),a=this.buildMediaInfoParams(n),e.next=7,this.buildAdsExtraParams();case 7:return i=e.sent,l=this.buildDeviceParams(),u=l.device,c=l.os,e.abrupt(\"return\",{env:{device:u,os:c,mode:t},player:{container:\"player\",logLevel:\"error\"},ads:i,media:{mediaId:r,autoplay:o,startAt:n,mediaInfoParams:a},features:{},tracks:{}});case 10:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"buildMediaInfoParams\",value:function(e){var t={context:\"MYTF1\"};return e&&(t.resume=1),this.continuousPlay&&(t.continousToPlay=1),t}},{key:\"buildAdsExtraParams\",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t,n,r,o,a,i,l,u,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!x,n=this.props.contexts.auth.auth.profile&&this.props.contexts.auth.auth.profile.zip,e.next=4,Object(_.a)();case 4:return r=e.sent,o=Object(p.a)(),a=o.aam_fw,i=o.aam_uuid,l=o.tc_QuickStringFw,u=this.getUserDMPObject(a),c=this.getUserDMPObject(l),s=P({_fw_h_x_postal_code:n||\"00000\",_fw_h_x_country:\"FR\",_fw_gdpr:1,_fw_gdpr_consent:r,adobe_uuid:i},u,c),location.search&&g.a.parse(location.search).demopub&&(s.demopub=g.a.parse(location.search).demopub),e.abrupt(\"return\",{enable:t,extraParams:s});case 11:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"buildDeviceParams\",value:function(){var e=this.props.contexts.deviceContext.device,t=e.device.type,n=e.os.name;return{device:this.getDeviceFromContext(t),os:this.getOsFromContext(n)}}},{key:\"getDeviceFromContext\",value:function(e){return this.isSupportedDevice(e)?e:(console.warn(\"Unsupported device \".concat(e,', will use default value \"desktop\"')),\"desktop\")}},{key:\"isSupportedDevice\",value:function(e){return[\"mobile\",\"tablet\",\"desktop\"].includes(e)}},{key:\"getOsFromContext\",value:function(e){return this.isSupportedOs(e)?e:(console.warn(\"Unsupported os \".concat(e,', will use default value \"windows\"')),\"windows\")}},{key:\"isSupportedOs\",value:function(e){return[\"microsoft\",\"win\",\"windows\",\"mac\",\"apple\",\"ios\",\"google\",\"android\",\"chrome\",\"linux\"].includes(e)}},{key:\"changeVideo\",value:function(){var e=this;this.eventTracker.reset(),this.getPlayerConfig().then(function(t){return e.player.loadMedia(e.props.id,e.getStartTime(),t)}).then(function(){return e.mediaJustEnded=!1})}},{key:\"getStartTime\",value:function(){return!this.continuousPlay&&this.props.startTime?this.props.startTime:0}}])&&j(n.prototype,r),o&&j(n,o),t}())||r;t.a=Object(f.b)({deviceContext:m.a,auth:v.a})(function(e){return l.a.createElement(c.a,{className:y.a.container},function(t){var n=t.isVisible;return l.a.createElement(R,N({},e,{isVisible:n}))})})}).call(this,n(161))},881:function(e,t,n){\"use strict\";function r(e,t,n,r,o,a,i){try{var l=e[a](i),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}var o=function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:return e.abrupt(\"return\",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt(\"return\",i());case 9:case\"end\":return e.stop()}},e,this,[[0,6]])}),function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function l(e){r(i,o,a,l,u,\"next\",e)}function u(e){r(i,o,a,l,u,\"throw\",e)}l(void 0)})});return function(){return t.apply(this,arguments)}}(),a=function(){return new Promise(function(e,t){window.__cmp?window.__cmp(\"getConsentData\",null,function(n,r){r?e(n.consentData):t()}):t()})},i=function(){return\"BOhuFLmOhuFLmBaABBENCVAAAAAn57_______9______9uz_Ov_v_f__33e87_9v_l_7_-___u_-3zd4u_1vf99yfm1-7etr3tp_87ues2_Xur__59__3z3_9phPrsk89r6337Ag\"};t.a=o},882:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a}),n.d(t,\"b\",function(){return i});var r=function(){var e,t;return void 0!==document.hidden?(e=\"hidden\",t=\"visibilitychange\"):void 0!==document.msHidden?(e=\"msHidden\",t=\"msvisibilitychange\"):void 0!==document.webkitHidden&&(e=\"webkitHidden\",t=\"webkitvisibilitychange\"),void 0===document.addEventListener||void 0===e?void console.log(\"This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.\"):{hidden:e,visibilityChange:t}},o=function(e,t){return function(){e(document[t])}},a=function(e){var t=r();t&&document.addEventListener(t.visibilityChange,o(e,t.hidden),!1)},i=function(e){var t=r();t&&document.removeEventListener(t.visibilityChange,o(e,t.hidden))}},884:function(e,t,n){e.exports={main:\"Slider_main_1HdkT\",paperShadow:\"Slider_paperShadow_1byc3\",paper__left:\"Slider_paper__left_3OBvz\",paperLeft:\"Slider_paper__left_3OBvz\",paper__right:\"Slider_paper__right_Fu2k5\",paperRight:\"Slider_paper__right_Fu2k5\",title:\"Slider_title_rrQpy\",items:\"Slider_items_1r-iW\",desktop:\"Slider_desktop_1A1mO\",scrollContainer:\"Slider_scrollContainer_2I3DM\",itemsContainer:\"Slider_itemsContainer_1uRkT\",slider__nav__seeAll:\"Slider_slider__nav__seeAll_3qQrv\",sliderNavSeeAll:\"Slider_slider__nav__seeAll_3qQrv\",slider__hideButton:\"Slider_slider__hideButton_1TeaR\",sliderHideButton:\"Slider_slider__hideButton_1TeaR\",item:\"Slider_item_h4OKi\",nav:\"Slider_nav_15kO8\",nav__next:\"Slider_nav__next_14bSc\",navNext:\"Slider_nav__next_14bSc\",nav__previous:\"Slider_nav__previous_2UbT8\",navPrevious:\"Slider_nav__previous_2UbT8\",nav__previous_disabled:\"Slider_nav__previous_disabled_15JF9\",navPreviousDisabled:\"Slider_nav__previous_disabled_15JF9\",nav__next_disabled:\"Slider_nav__next_disabled_2nAWx\",navNextDisabled:\"Slider_nav__next_disabled_2nAWx\",slider__dark_theme:\"Slider_slider__dark_theme_1DP6k\",sliderDarkTheme:\"Slider_slider__dark_theme_1DP6k\",paper_disabled:\"Slider_paper_disabled_3re1i\",paperDisabled:\"Slider_paper_disabled_3re1i\",hideScrollbar:\"Slider_hideScrollbar_3yU26\",mobile:\"Slider_mobile_23nKD\",columnOnMobile:\"Slider_columnOnMobile_tCutZ\",slider__deviceSmartphone:\"Slider_slider__deviceSmartphone_1xUWX\",sliderDeviceSmartphone:\"Slider_slider__deviceSmartphone_1xUWX\",slider__deviceTablet:\"Slider_slider__deviceTablet_1EBo2\",sliderDeviceTablet:\"Slider_slider__deviceTablet_1EBo2\",slider__deviceTabletLg:\"Slider_slider__deviceTabletLg_3oOt9\",sliderDeviceTabletLg:\"Slider_slider__deviceTabletLg_3oOt9\"}},885:function(e,t,n){\"use strict\";var r=n(56),o=n(0),a=n.n(o),i=n(120),l=n(878),u=n(889),c=n.n(u);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.videos,n=e.onScroll,o=void 0===n?function(){}:n;return t&&t.length&&a.a.createElement(l.a,s({},Object(r.f)([\"videos\"],e),{total:t.length,onScroll:o,itemClassName:c.a.item,navClassName:c.a.nav,showAsColumnOnMobile:e.isLandscapeCard,moreBtnUrl:e.moreBtnUrl,showSeeAllButton:e.showSeeAllButton}),t.map(function(t){return a.a.createElement(i.b,s({key:\"card_\".concat(t.id)},t,{format:e.isLandscapeCard?i.a.LANDSCAPE:i.a.SLIDER,isLoading:e.isLoading,hideProgramLabel:e.hideProgramLabel}))}))||null}},886:function(e,t,n){\"use strict\";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return{eventId:\"start\",data:{content:{video:{action:\"play\",videoReachedDurationTime:e,videoReachedDuration:0===e?0:void 0}}}}}function i(e){return{eventId:\"pause\",data:{content:{video:{action:\"pause\",videoReachedDurationTime:e}}}}}function l(e){return{eventId:\"end\",data:{content:{video:{action:\"stop\",videoReachedDurationTime:e,videoReachedDuration:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?\"100\":void 0}}}}}function u(e,t){return{eventId:\"start-roll\",data:{ad:r({},e,{end:!1}),content:{video:{action:\"play\",videoReachedDurationTime:t}}}}}function c(e,t){return{eventId:\"end-roll\",data:{ad:r({},e,{end:!0}),content:{video:{action:\"play\",videoReachedDurationTime:t}}}}}var s=n(309),d=n(158);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",function(){return h});var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),m(this,\"mapEventNameToHandler\",new Map([[\"ads:ad:end\",this.handleSpotEnd],[\"ads:ad:pause\",this.handleAdIsPaused],[\"ads:ad:resume\",this.handleAdIsResumed],[\"ads:ad:skipped\",this.handleAdsSkipped],[\"ads:ad:start\",this.handleSpotStart],[\"ads:ad:error\",this.handleAdError],[\"ads:slot:end\",this.handleSlotEnd],[\"ads:slot:start\",this.handleSlotStart],[\"ads:update\",this.handleAdsUpdate],[\"buffering:end\",this.handleBufferingEnd],[\"buffering:start\",this.handleBufferingStart],[\"ended\",this.handleMediaStop],[\"error\",this.handleError],[\"fullscreenEnter\",this.handleFullScreenEnter],[\"fullscreenExit\",this.handleFullScreenExit],[\"loading\",this.handleLoading],[\"mediainfo:update\",this.handleMediaInfoUpdate],[\"mute\",this.handleMute],[\"unmute\",this.handleUnmute],[\"pause\",this.handlePause],[\"play\",this.handleMediaPlay],[\"ready\",this.handleReady],[\"replay\",this.handleReplay],[\"seeked\",this.handleSeek],[\"volume\",this.handleVolumeChange],[\"timeupdate\",this.handleTimeUpdate],[\"unmount\",this.handleUnmount],[\"broadcastads:slot:start\",this.handleBroadcastSlotStart],[\"broadcastads:slot:end\",this.handleBroadcastSlotEnd]])),m(this,\"trackEvent\",void 0),m(this,\"currentMedia\",void 0),m(this,\"currentSlot\",void 0),m(this,\"currentSlotType\",void 0),m(this,\"reachedDurationTime\",void 0),m(this,\"hasMediaStarted\",void 0),m(this,\"getCurrentContentType\",void 0),this.trackEvent=t,this.initialize()}var t,n,o;return t=e,(n=[{key:\"reset\",value:function(){this.currentMedia.id&&this.trackEvent(l(this.reachedDurationTime)),this.initialize(),this.hasMediaStarted=!0}},{key:\"handle\",value:function(e,t,n){this.reachedDurationTime=Math.round(n);var r=this.mapEventNameToHandler.get(e);if(\"function\"!=typeof r)throw new Error(\"Unhandled event name: \".concat(e));r.call(this,t.value)}},{key:\"setGetCurrentContentType\",value:function(e){console.log(e),this.getCurrentContentType=e}},{key:\"initialize\",value:function(){this.currentMedia={id:null,duration:0,spotsAmount:0,playedSpotsAmount:0,hasPreroll:!1,quartilesSent:[{offset:.25,sent:!1},{offset:.5,sent:!1},{offset:.75,sent:!1},{offset:.9,sent:!1}],slots:[]},this.currentSlot={spotsAmount:0,playedSpotsAmount:0},this.currentSlotType={spotsAmount:0,playedSpotsAmount:0},this.reachedDurationTime=0,this.hasMediaStarted=!1,this.getCurrentContentType=function(){return Promise.resolve(null)}}},{key:\"handleUnmount\",value:function(){this.hasMediaStarted&&this.trackEvent(l(this.reachedDurationTime))}},{key:\"handleAdIsResumed\",value:function(){var e,t,n;this.trackEvent((e=this.getRollInfo(),t=this.getSpotInfo(),n=this.reachedDurationTime,{eventId:\"resume-spot\",data:{ad:r({},e,t),content:{video:{action:\"play\",videoReachedDurationTime:n}}}}))}},{key:\"handleSpotStart\",value:function(){var e,t,n;void 0!==this.currentSlotType.type&&(this.currentMedia.playedSpotsAmount=this.currentMedia.playedSpotsAmount+1,this.currentSlot.playedSpotsAmount=this.currentSlot.playedSpotsAmount+1,this.currentSlotType.playedSpotsAmount=this.currentSlotType.playedSpotsAmount+1,this.trackEvent((e=this.getRollInfo(),t=this.getSpotInfo(),n=this.reachedDurationTime,{eventId:\"play-spot\",data:{ad:r({},e,t),content:{video:{action:\"play\",videoReachedDurationTime:n}}}})))}},{key:\"handleSlotStart\",value:function(e){var t=e.type,n=e.adsCount;this.currentSlot={spotsAmount:n,playedSpotsAmount:0},t!==this.currentSlotType.type&&(this.currentSlotType={type:t,spotsAmount:n,playedSpotsAmount:0}),\"PREROLL\"!==e.type&&this.trackEvent(i(this.reachedDurationTime)),this.trackEvent(u(this.getRollInfo(),this.reachedDurationTime))}},{key:\"handleSlotEnd\",value:function(e){var t=e.type,n=e.adsCount;t!==this.currentSlotType.type&&(this.currentSlotType={type:t,spotsAmount:n,playedSpotsAmount:0}),this.trackEvent(c(this.getRollInfo(),this.reachedDurationTime)),this.hasMediaStarted=!0,this.trackEvent(a(this.reachedDurationTime)),this.currentSlotType={type:void 0,spotsAmount:void 0,playedSpotsAmount:0}}},{key:\"handleBroadcastSlotStart\",value:function(){this.currentSlot={spotsAmount:void 0,playedSpotsAmount:0},this.trackEvent(u(this.getRollInfo(),this.reachedDurationTime))}},{key:\"handleBroadcastSlotEnd\",value:function(){this.currentSlot={spotsAmount:void 0,playedSpotsAmount:0},this.trackEvent(c(this.getRollInfo(),this.reachedDurationTime))}},{key:\"handleAdsUpdate\",value:function(e){var t=e.reduce(function(e,t){return e+t.adsCount},0);this.currentMedia=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},this.currentMedia,{spotsAmount:t,slots:e})}},{key:\"handleMediaStop\",value:function(){this.hasMediaStarted=!1,this.trackEvent(l(this.reachedDurationTime,!0)),this.currentMedia.id=null}},{key:\"handleMediaInfoUpdate\",value:function(e){var t=e.mediainfo,n=t.media.duration,r=t.content.emId;r||console.warn(\"No emnumber for this video\",t),this.trackEvent(Object(s.b)({videoEmNumber:r,duration:n}));var o=p(t.mediametrie.chapters[0].estatS2.split(\"_\"),2),i=o[0],u=o[1];this.trackEvent(Object(d.f)({programName:i,broadcastingChannel:u,linkingChannel:u})),this.currentMedia.duration=n,this.hasMediaStarted&&this.currentMedia.id&&r!==this.currentMedia.id&&(this.trackEvent(l(this.reachedDurationTime,!0)),this.trackEvent(a(this.reachedDurationTime))),this.currentMedia.id=r||\"0\"}},{key:\"handlePause\",value:function(){this.trackEvent(i(this.reachedDurationTime))}},{key:\"handleMediaPlay\",value:function(){var e=this;this.handleQuartiles(),this.getCurrentContentType().then(function(t){\"ads\"!==t&&(e.hasMediaStarted=!0,e.trackEvent(a(e.reachedDurationTime)))})}},{key:\"handleSeek\",value:function(e){var t=e.from,n=e.to;this.reachedDurationTime=Math.round(n),this.handleQuartiles(),this.trackEvent({eventId:\"seek\",data:{content:{video:{action:\"seek\",videoReachedDurationTime:Math.round(t)}}}}),this.trackEvent(function(e){return{eventId:\"seeked\",data:{content:{video:{action:\"seeked\",videoReachedDurationTime:e}}}}}(Math.round(n)))}},{key:\"handleTimeUpdate\",value:function(e){this.reachedDurationTime=Math.round(e),this.handleQuartiles()}},{key:\"handleQuartiles\",value:function(){var e=this,t=this.reachedDurationTime/this.currentMedia.duration;this.currentMedia.quartilesSent.filter(function(e){return!e.sent}).filter(function(e){return e.offset<=t}).forEach(function(t){e.trackEvent(function(e,t){return{eventId:\"quartile-passed\",data:{content:{video:{videoReachedDuration:e,videoReachedDurationTime:t}}}}}(100*t.offset,e.reachedDurationTime)),e.currentMedia.quartilesSent.find(function(e){return e.offset===t.offset}).sent=!0})}},{key:\"getRollInfo\",value:function(){return{adType:this.getAdType(this.currentSlotType.type),spotsAmount:this.currentMedia.spotsAmount,spotsWithinRollAmount:this.currentSlot.spotsAmount,spotsWithinRollTypeAmount:this.currentSlotType.spotsAmount}}},{key:\"getSpotInfo\",value:function(){return void 0===this.currentSlotType.type?{spotPosition:void 0,spotPositionAdType:void 0,spotPositionGlobal:void 0}:{spotPositionGlobal:this.currentMedia.playedSpotsAmount,spotPosition:this.currentSlot.playedSpotsAmount,spotPositionAdType:this.currentSlotType.playedSpotsAmount}}},{key:\"handleSpotEnd\",value:function(){}},{key:\"handleAdIsPaused\",value:function(){}},{key:\"handleAdsSkipped\",value:function(){}},{key:\"handleBufferingEnd\",value:function(){}},{key:\"handleBufferingStart\",value:function(){}},{key:\"handleError\",value:function(){}},{key:\"handleFullScreenEnter\",value:function(){}},{key:\"handleFullScreenExit\",value:function(){}},{key:\"handleLoading\",value:function(){}},{key:\"handleMute\",value:function(){}},{key:\"handleUnmute\",value:function(){}},{key:\"handleReady\",value:function(){}},{key:\"handleReplay\",value:function(){}},{key:\"handleVolumeChange\",value:function(){}},{key:\"handleAdError\",value:function(){}},{key:\"getAdType\",value:function(e){switch(e){case\"PREROLL\":return\"preroll\";case\"MIDROLL\":return\"midroll\";case\"ADSWITCH\":return\"adswitch\";default:return\"broadcast\"}}}])&&f(t.prototype,n),o&&f(t,o),e}()},887:function(e,t,n){\"use strict\";n.d(t,\"d\",function(){return o}),n.d(t,\"a\",function(){return a}),n.d(t,\"b\",function(){return i}),n.d(t,\"f\",function(){return u}),n.d(t,\"i\",function(){return c}),n.d(t,\"g\",function(){return s}),n.d(t,\"e\",function(){return d}),n.d(t,\"h\",function(){return p}),n.d(t,\"c\",function(){return f});var r=n(132),o=function(e){var t=Array.isArray(e)&&e.filter(function(e){return!e.main});return t&&t.length?t[0]:null},a=function(e){var t=Array.isArray(e)&&e.filter(function(e){return e.main});return t&&t.length?t[0].label:null},i=function(e){var t=o(e);return t&&t.label},l=function(e,t){return e&&e.decoration&&e.decoration[t]&&e.decoration[t].sources&&e.decoration[t].sources.length?e.decoration[t].sources:[]},u=function(e){var t=l(e,\"image\");return t.length?t[0].url:\"\"},c=function(e){var t=l(e,\"background\");return t.length?t[0].url:\"\"},s=function(e){var t=l(e,\"portrait\");return t.length?t[0].src:\"\"},d=function(e){var t=e.mainChannel&&l(e.mainChannel,\"logo\");return t&&t.length?t[0].src:\"\"},p=function(e,t){var n=e&&\"S\"+Object(r.e)(e),o=t&&\"Ep\"+Object(r.e)(t);return n&&o?\"\".concat(n).concat(o):\"\"},f=function(e){return e?e.filter(function(e){return!!e.slug}).map(function(e){return e.slug}).join(\";\"):\"\"}},888:function(e,t,n){\"use strict\";function r(e,t,n){return{eventId:\"click-reco-video\",data:{recoVideo:{recoVideoId:e,position:t,displayedVideoIds:n}}}}function o(e,t,n){return{eventId:\"click-reco-program\",data:{recoVideo:{recoProgramId:e,position:t,displayedProgramIds:n}}}}n.d(t,\"b\",function(){return r}),n.d(t,\"a\",function(){return o})},889:function(e,t,n){e.exports={item:\"VideoSlider_item_nY4wv\",nav:\"VideoSlider_nav_1chq3\"}},890:function(e,t,n){\"use strict\";var r=n(0),o=n.n(r);function a(e){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||\"object\"!==a(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),l(this,u(t).apply(this,arguments))}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o.a.Component),n=t,(r=[{key:\"render\",value:function(){return o.a.createElement(\"script\",{type:\"application/ld+json\",dangerouslySetInnerHTML:{__html:JSON.stringify(this.props.item)}})}}])&&i(n.prototype,r),a&&i(n,a),t}();t.a=s},891:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return r});var r=function(e,t){return{\"@type\":\"Organization\",name:\"TF1\",url:\"https://www.tf1.fr\",foundingDate:\"1975\",logo:{\"@type\":\"ImageObject\",url:\"\".concat(t,\"://\").concat(e).concat(n(892)),width:\"200px\",height:\"76px\"},address:{\"@type\":\"PostalAddress\",streetAddress:\"1 Quai du Point du Jour\",addressLocality:\"Boulogne-Billancourt\",postalCode:\"92656\",addressCountry:\"FR\"},sameAs:[\"https://www.facebook.com/TF1/\",\"https://twitter.com/tf1\",\"https://www.instagram.com/tf1/?hl=fr\",\"https://fr.linkedin.com/company/tf1\"]}}},892:function(e,t,n){e.exports=n.p+\"4d5bc3f215a69eb9db31155edf621758.png\"},898:function(e,t,n){\"use strict\";var r,o=n(56),a=n(0),i=n.n(a),l=n(311),u=n(878),c=n(899),s=n.n(c),d=n(40),p=n.n(d),f=n(50);function m(e){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var _=p()()(r=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return r=this,o=(e=v(t)).call.apply(e,[this].concat(c)),n=!o||\"object\"!==m(o)&&\"function\"!=typeof o?g(r):o,a=g(g(n)),l=function(){n.props.tracking.trackEvent(Object(f.j)(!0))},(i=\"onScroll\")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,r,c;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,a[\"Component\"]),n=t,(r=[{key:\"render\",value:function(){var e=this.props.programs;return e.length>0&&i.a.createElement(u.a,h({},Object(o.f)([\"programs\"],this.props),{onScroll:this.onScroll,total:e.length,itemClassName:s.a.item,navClassName:s.a.nav}),e.map(function(e,t){return i.a.createElement(l.b,h({key:\"card_\".concat(t)},e,{format:l.a.SLIDER}))}))||null}}])&&y(n.prototype,r),c&&y(n,c),t}())||r;t.a=_},899:function(e,t,n){e.exports={item:\"ProgramSlider_item_1DXOZ\",nav:\"ProgramSlider_nav_Oylyo\"}},905:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return l});var r=n(0),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=o.a.createElement(\"path\",{fill:\"#FFF\",d:\"M18.067 28V17.067h3.69l.55-4.279h-4.24v-2.725c0-1.238.346-2.076 2.12-2.076h2.266V4.166A31.292 31.292 0 0 0 19.163 4c-3.26 0-5.483 1.989-5.483 5.64v3.148H10v4.28h3.68V28h4.387z\"}),l=function(e){return o.a.createElement(\"svg\",a({width:32,height:32},e),i)};t.b=n.p+\"e6d7d1022ca03b91fe2a1ef049bc205a.svg\"},912:function(e,t,n){\"use strict\";var r,o=n(0),a=n.n(o),i=n(19),l=n(59),u=n(184),c=n(885),s=n(56),d=n(60),p=n(40),f=n.n(p),m=n(888),h=n(47),y=n(38),v=n(71),b=n(16),g=n(50);function _(e){return(_=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=f()()(r=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return r=this,o=(e=E(t)).call.apply(e,[this].concat(i)),n=!o||\"object\"!==_(o)&&\"function\"!=typeof o?O(r):o,P(O(O(n)),\"state\",{hasError:!1}),P(O(O(n)),\"handleError\",function(e){var t=e.message===b.i.NETWORK_ERROR_MESSAGE?v.c:v.e;n.setState({hasError:!0},function(){return n.props.notify(t,y.c.ERROR)})}),P(O(O(n)),\"mapVideosData\",function(e){var t=Object(l.t)(e).map(l.B);return t=(t=t.filter(function(e,t,n){var r=e.id;return n.findIndex(function(e){return e.id===r})===t})).map(function(e,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}({},e,{onClick:function(){return n.sendTrack(e.id,r+1,t)}})})}),P(O(O(n)),\"onScroll\",function(){n.props.tracking.trackEvent(Object(g.j)(!0))}),P(O(O(n)),\"sendTrack\",function(e,t,r){n.props.tracking.trackEvent(Object(m.b)(e,t,Object(h.c)(r)))}),P(O(O(n)),\"onCompleted\",function(e){var t=n.mapVideosData(e);n.props.onVideosUpdate&&n.props.onVideosUpdate(t)}),n}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,a.a.Component),n=t,(r=[{key:\"shouldComponentUpdate\",value:function(){return!this.state.hasError}},{key:\"render\",value:function(){var e=this,t=this.props,n=t.id,r=t.title,o=void 0===r?\"\":r,i=t.className,l=void 0===i?\"\":i,p=t.isLandscapeCard,f=void 0===p||p,m=t.dark,h=t.tracking;return a.a.createElement(u.i,{videoId:n,onCompleted:this.onCompleted,tracking:h},function(t){var n=t.data,r=t.error;if(r&&!n&&e.handleError(r),!n||Object(s.d)(n))return a.a.createElement(d.a,{dark:m,title:o,nb:4});var i=e.mapVideosData(n);return i.length>0?a.a.createElement(c.a,{className:l,onScroll:e.onScroll,title:o,videos:i,isLandscapeCard:f}):null})}}])&&S(n.prototype,r),o&&S(n,o),t}())||r;t.a=Object(i.a)(y.a)(T)},913:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return l});var r=n(0),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=o.a.createElement(\"path\",{fill:\"#FFF\",fillRule:\"evenodd\",d:\"M20.918 20.84a3 3 0 1 1-.895 1.79l-8.94-4.47a3 3 0 1 1 0-4.319l8.94-4.47a3 3 0 1 1 .895 1.79l-8.94 4.468a3.03 3.03 0 0 1 0 .741l8.94 4.47z\"}),l=function(e){return o.a.createElement(\"svg\",a({width:32,height:32},e),i)};n.p},935:function(e,t,n){\"use strict\";var r,o=n(0),a=n.n(o),i=n(59),l=n(159),u=n(185),c=n(898),s=n(40),d=n.n(s),p=n(888),f=n(47),m=n(158);function h(e){return(h=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=d()()(r=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=b(t)).call.apply(e,[this].concat(i)),n=!o||\"object\"!==h(o)&&\"function\"!=typeof o?_(r):o,S(_(_(n)),\"sendTrack\",function(e,t,r){var o=n.props.tracking;o.trackEvent(Object(m.f)(Object(m.e)(e))),o.trackEvent(Object(p.a)(e.id,t,Object(f.c)(r)))}),n}var n,r,s;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o[\"Component\"]),n=t,(r=[{key:\"render\",value:function(){var e=this,t=this.props,n=t.videoId,r=t.programId,o=t.title,s=void 0===o?\"\":o,d=t.className,p=void 0===d?\"\":d,f=t.tracking;return a.a.createElement(l.k,{videoId:n,programId:r,tracking:f},function(t){var n=t.data,r=t.error;if(r&&!n)return a.a.createElement(u.a,{error:y({},r,{type:\"graphql\"})});var o=Object(i.l)(n).map(i.z);return o=o.map(function(t,n){return y({},t,{onClick:function(){return e.sendTrack(t,n+1,o)}})}),a.a.createElement(c.a,{className:p,title:s,programs:o})})}}])&&v(n.prototype,r),s&&v(n,s),t}())||r;t.a=E},936:function(e,t,n){e.exports={titleContent:\"VideoSummary_titleContent_34AgJ\",title:\"VideoSummary_title_1u9FR\",contentScrollable:\"VideoSummary_contentScrollable_3z1jW\",textContainer:\"VideoSummary_textContainer_2vnhi\",description:\"VideoSummary_description_wcZyo\",showAll:\"VideoSummary_showAll_LuHBb\",userButtons:\"VideoSummary_userButtons_3Jwvu\",bookmark:\"VideoSummary_bookmark_1n7O_\",buttonWithIcons:\"VideoSummary_buttonWithIcons_1Aqeo\",buttonWithoutAnimation:\"VideoSummary_buttonWithoutAnimation_L0Gcy\",shareButton:\"VideoSummary_shareButton_3QeY1\",programDuration:\"VideoSummary_programDuration_CBdQB\",programInReplay:\"VideoSummary_programInReplay_H6c8b\",details:\"VideoSummary_details_EVN4e\",expandButton:\"VideoSummary_expandButton_1CkUO\",arrow:\"VideoSummary_arrow_3YKR6\",arrow__down:\"VideoSummary_arrow__down_3AzHi\",arrowDown:\"VideoSummary_arrow__down_3AzHi\",vignette:\"VideoSummary_vignette_3d0ZR\",shareIcon:\"VideoSummary_shareIcon__lxSt\",programName:\"VideoSummary_programName_fmjfn\",disabled:\"VideoSummary_disabled_1Mw1j\",availableDates:\"VideoSummary_availableDates_8EGV7\",addDate:\"VideoSummary_addDate_3T1F9\",programLink:\"VideoSummary_programLink_1e9P2\",arrow__up:\"VideoSummary_arrow__up_2lDTr\",arrowUp:\"VideoSummary_arrow__up_2lDTr\",arrow_onlymobile:\"VideoSummary_arrow_onlymobile_29-9T\",arrowOnlymobile:\"VideoSummary_arrow_onlymobile_29-9T\",descriptionOnMobile:\"VideoSummary_descriptionOnMobile_putDH\",placeholder:\"VideoSummary_placeholder_2QVFV\",descriptionOnDesktop:\"VideoSummary_descriptionOnDesktop_2vMZ9\",hidden:\"VideoSummary_hidden_3-T8x\",fadeIn:\"VideoSummary_fadeIn_1DffK\"}},937:function(e,t,n){e.exports={shareModal:\"ShareButton_shareModal_3BHBd\",socialShare:\"ShareButton_socialShare_19Dqf\",suffix:\"ShareButton_suffix_3yZeP\",shareIcon:\"ShareButton_shareIcon_28XkQ\",shareButtonContainer:\"ShareButton_shareButtonContainer_2Fv5E\",urlContainer:\"ShareButton_urlContainer_1Mnuq\",url:\"ShareButton_url_2k77t\",copyButton:\"ShareButton_copyButton_-8xI_\",pasteDone:\"ShareButton_pasteDone_309bA\",pasteSvg:\"ShareButton_pasteSvg_1ZVaC\",pasteText:\"ShareButton_pasteText_3u5eG\",facebook:\"ShareButton_facebook_3kAre\",twitter:\"ShareButton_twitter_3QGC9\"}},938:function(e,t,n){\"use strict\";var r=n(0),o=n.n(r),a=n(890),i=n(132),l=n(891),u=n(37);t.a=Object(u.c)(function(e){var t=e.domain,n=e.protocol,r=e.video;return o.a.createElement(a.a,{item:{\"@context\":\"https://schema.org\",\"@type\":\"VideoObject\",caption:r.title,name:r.title,description:r.decoration&&r.decoration.description||\"\",thumbnailUrl:r.decoration&&r.decoration.image&&r.decoration.image.sources&&r.decoration.image.sources[0]&&r.decoration.image.sources[0].url||\"\",uploadDate:r.date,duration:i.d(r.playingInfos&&r.playingInfos.duration||0),publisher:Object(l.a)(t,n),embedUrl:\"\".concat(n,\"://\").concat(t,\"/player/\").concat(r.id)}})})},939:function(e,t,n){e.exports={layer:\"AdBlockLayer_layer_1T2t9\",content:\"AdBlockLayer_content_3Fdrp\",picto:\"AdBlockLayer_picto_1OmBu\",title:\"AdBlockLayer_title_J5llA\"}},940:function(e,t,n){e.exports={layer:\"NeedSubscribe_layer_3G9nX\",content:\"NeedSubscribe_content_3Cb45\",connect:\"NeedSubscribe_connect_3eCin\"}},941:function(e,t,n){e.exports={layer:\"NeedContentsUpdate_layer_2FCfw\",content:\"NeedContentsUpdate_content_1Tc5N\"}},942:function(e,t,n){e.exports={container:\"PlayerUnsupported_container_2HNy1\",content:\"PlayerUnsupported_content_2LPUk\",icon:\"PlayerUnsupported_icon_2tuEx\",title:\"PlayerUnsupported_title_3pau9\",description:\"PlayerUnsupported_description_3CAH_\"}},943:function(e,t,n){e.exports={layer:\"DRMContent_layer_3zc9L\",content:\"DRMContent_content_3Bw9S\",connect:\"DRMContent_connect_2v-Na\"}},944:function(e,t,n){\"use strict\";(function(e){var r=n(945),o={hostEnv:e.env.TF1_DEPLOYMENT_ENV||\"\",ssr:{graphql:{url:e.env.TF1_SSR_GRAPHQL_URL||\"\"},seo:{url:e.env.TF1_SSR_SEO_API_URL||\"\"},server:{monitoringPort:Number(e.env.TF1_MONITORING_PORT)||8001,port:{http:Number(e.env.TF1_HTTP_PORT)||8080,https:Number(e.env.TF1_HTTPS_PORT)||0},domain:{web:e.env.TF1_WEB_DOMAIN||\"\",amp:e.env.TF1_AMP_DOMAIN||\"\"},basicAuth:{enabled:\"true\"===e.env.TF1_BASIC_AUTH_ENABLED,username:e.env.TF1_BASIC_AUTH_USERNAME||\"\",password:e.env.TF1_BASIC_AUTH_PASSWORD||\"\"},key:e.env.KEY||\"\"}},gigya:{apiKey:e.env.TF1_GIGYA_APIKEY||\"\"},jwt:{url:e.env.TF1_JWT_URL||\"\"},graphql:{url:e.env.TF1_GRAPHQL_URL||\"\",persistedQueries:\"true\"===e.env.TF1_PERSISTED_QUERIES},seo:{url:e.env.TF1_SEO_API_URL||\"\"},smo:{fbAppKey:\"105856129451532\"},alternate:{ios:{appStoreId:\"407248490\",URIScheme:\"ios-app://407248490/https/www.tf1.fr\",teamID:\"SV9A3RC3SK\",bundleID:\"com.tf1.logan.App\"},android:{URIScheme:\"android-app://fr.tf1.mytf1.dev/https/www.tf1.fr\",sha256CertFingerprints:\"7D:65:5C:89:11:39:57:8F:47:33:A8:84:31:BD:10:9C:25:BD:A5:B7:D4:C7:3E:7B:14:C6:3C:BA:B5:34:2A:59\",packageName:\"fr.tf1.mytf1.dev\"}},cdn:{url:e.env.TF1_CDN_URL||\"\"},tms:{url:e.env.TF1_TMS_URL||\"\"},googleSiteVerification:e.env.GOOGLE_SITE_VERIFICATION||\"PXGAidGXiYUjgBHkBuQF6GTccyABJ9ZjVMxkDt94Qdc\",log:{level:Object(r.a)(e.env.TF1_LOG_LEVEL,{debug:\"\",info:\"\",warn:\"\",error:\"\"},\"debug\")},auth:{authentActivationCheck:{endpoint:e.env.TF1_AUTHENT_ACTIVATION_ENDPOINT||\"test_true\",host:e.env.TF1_AUTHENT_ACTIVATION_HOST||\"d2iijgrf571m6r.cloudfront.net\"}}};t.a=o}).call(this,n(161))},945:function(e,t,n){\"use strict\";function r(e,t,n){if(function(e,t){return void 0!==e&&t.hasOwnProperty(e)}(e,t))return e;if(void 0!==n)return console.log('Environnement variable with value \"'.concat(e,'\" expected in \"').concat(Object.keys(t),'\", using default value \"').concat(n,'\"')),n;throw new Error('Wrong environment variable ; got : \"'.concat(e,'\", expected value in : \"').concat(Object.keys(t),'\" and no default value was provided.'))}n.d(t,\"a\",function(){return r})},946:function(e,t,n){e.exports={container:\"EdgeUnsupported_container_2tumK\",content:\"EdgeUnsupported_content_DgXaP\",icon:\"EdgeUnsupported_icon_G2EzZ\",title:\"EdgeUnsupported_title_1palo\",description:\"EdgeUnsupported_description_3vymZ\"}},947:function(e,t,n){e.exports=n.p+\"4e1fedafaa0e4088c7507adf828ae392.jpg\"},971:function(e,t,n){\"use strict\";var r=n(0),o=n.n(r),a=n(329),i=n(17),l=n(939),u=n.n(l);o.a.createElement(\"path\",{fillOpacity:.2,d:\"M21.828 0h36.344a2 2 0 0 1 1.414.586l19.828 19.828A2 2 0 0 1 80 21.828v36.344a2 2 0 0 1-.586 1.414L59.586 79.414a2 2 0 0 1-1.414.586H21.828a2 2 0 0 1-1.414-.586L.586 59.586A2 2 0 0 1 0 58.172V21.828a2 2 0 0 1 .586-1.414L20.414.586A2 2 0 0 1 21.828 0z\"}),o.a.createElement(\"path\",{d:\"M32.146 45.42c-.433-.944-.65-2.036-.65-3.275v-12.42h4.074v11.8c0 .168.004.332.012.49l7.661-7.594v-4.695h4.074v.658l18.996-18.828L57.757 3H22.243L3 22.243v35.514l8.312 8.313 20.834-20.65zm20.096-15.694h5.793c2.734 0 4.718.388 5.953 1.166 1.234.778 1.852 2.015 1.852 3.712 0 1.15-.27 2.096-.81 2.834a3.239 3.239 0 0 1-2.156 1.332v.131c1.221.273 2.102.783 2.643 1.53.54.747.81 1.74.81 2.98 0 1.757-.634 3.128-1.904 4.112-1.27.985-2.995 1.477-5.175 1.477h-7.211V29.93l-4.72 4.678v7.59c0 1.423-.319 2.671-.956 3.743-.637 1.073-1.558 1.894-2.762 2.466-1.204.571-2.628.857-4.271.857-2.198 0-3.96-.5-5.287-1.498L13.434 68.191 22.243 77h35.514L77 57.757V22.243l-8.566-8.566-16.192 16.049zm-8.999 8.92l-6.489 6.43c.608.507 1.501.76 2.68.76 1.335 0 2.304-.35 2.906-1.048.602-.699.903-1.795.903-3.29v-2.853zM21.828 0h36.344a2 2 0 0 1 1.414.586l19.828 19.828A2 2 0 0 1 80 21.828v36.344a2 2 0 0 1-.586 1.414L59.586 79.414a2 2 0 0 1-1.414.586H21.828a2 2 0 0 1-1.414-.586L.586 59.586A2 2 0 0 1 0 58.172V21.828a2 2 0 0 1 .586-1.414L20.414.586A2 2 0 0 1 21.828 0zm-3.067 38.796h1.345c1.257 0 2.197-.248 2.821-.745.624-.497.936-1.22.936-2.169 0-.958-.261-1.665-.784-2.122-.523-.457-1.343-.686-2.459-.686h-1.859v5.722zm9.229-3.059c0 2.075-.648 3.66-1.945 4.76-1.296 1.098-3.14 1.648-5.53 1.648H18.76V49h-4.087V29.726h6.157c2.338 0 4.116.503 5.333 1.51 1.217 1.005 1.826 2.506 1.826 4.501zm28.134 1.622h2.373c1.107 0 1.909-.171 2.406-.514.496-.343.744-.91.744-1.701 0-.738-.27-1.268-.81-1.589-.54-.32-1.396-.48-2.565-.48h-2.148v4.284zm0 3.243v5.023h2.663c1.125 0 1.955-.215 2.491-.646.536-.43.805-1.09.805-1.978 0-1.6-1.143-2.399-3.428-2.399h-2.531z\"});var c=n.p+\"1315f05077f37743428931d587ac0e7f.svg\";function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||\"object\"!==s(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),p(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o.a.Component),n=t,(r=[{key:\"render\",value:function(){return o.a.createElement(\"div\",{className:u.a.layer},o.a.createElement(\"div\",{className:u.a.content},o.a.createElement(\"img\",{src:c,alt:\"veuillez désactivez adblock\",className:u.a.picto}),o.a.createElement(\"div\",{className:u.a.title},\"Un bloqueur de publicité empêche la lecture.\"),\" Veuillez le désactiver pour démarrer la vidéo.\"))}}])&&d(n.prototype,r),a&&d(n,a),t}(),v=n(19),b=n(42),g=n(75),_=n(940),S=n.n(_),E=n(40),w=n.n(E),O=n(190),P=n(38),T=n(71);function k(e){return(k=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var I=w()()(h=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var u=arguments.length,c=new Array(u),s=0;s<u;s++)c[s]=arguments[s];return r=this,o=(e=C(t)).call.apply(e,[this].concat(c)),n=!o||\"object\"!==k(o)&&\"function\"!=typeof o?D(r):o,a=D(D(n)),l=function(){var e=n.props,t=e.contexts,r=t.auth,o=t.modal,a=t.notification,i=e.tracking,l=e.serviceType;!1!==r.auth.authentActivated?(i.trackEvent(Object(O.b)({clickableElementname:\"player-login-button\"})),o.showModal(b.a.SIGN_IN),r.setService(l)):a.notify(T.a,P.c.DISABLED)},(i=\"handleClick\")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,o.a.Component),n=t,(r=[{key:\"render\",value:function(){return o.a.createElement(\"div\",{className:S.a.layer},o.a.createElement(\"div\",{className:S.a.content},o.a.createElement(\"p\",null,\"Pour regarder l’ensemble des replay et le direct sur MYTF1, il vous suffit de vous connecter !\"),o.a.createElement(g.a,{className:S.a.connect,onClick:this.handleClick},\"Se connecter\")))}}])&&j(n.prototype,r),a&&j(n,a),t}())||h,N=Object(v.b)({notification:P.a,auth:i.a,modal:b.b})(I),x=n(941),R=n.n(x),M=function(){return o.a.createElement(\"div\",{className:R.a.layer},o.a.createElement(\"div\",{className:R.a.content},o.a.createElement(\"p\",null,\"Pour regarder l’ensemble des replay et le direct sur MYTF1, il vous suffit de mettre à jour vos données !\")))},B=n(879),V=n.n(B),L=n(880),F=n(103),U=n(942),W=n.n(U),z=function(){return o.a.createElement(\"div\",{className:W.a.container},o.a.createElement(\"div\",{className:W.a.content},o.a.createElement(\"div\",{className:W.a.icon}),o.a.createElement(\"p\",{className:W.a.title},\"Navigateur non supporté\"),o.a.createElement(\"p\",{className:W.a.description},\"Nous vous recommandons d’installer une version plus récente afin de visionner votre contenu.\")))},H=n(943),G=n.n(H),Q=n(181),J=n(944);function q(e){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=K(t)).call.apply(e,[this].concat(i)),n=!o||\"object\"!==q(o)&&\"function\"!=typeof o?Z(r):o,$(Z(Z(n)),\"state\",{appIsInstalled:!0}),$(Z(Z(n)),\"androidPrompt\",void 0),$(Z(Z(n)),\"saveAndroidPrompt\",function(e){n.setState({appIsInstalled:!1}),e.preventDefault(),n.androidPrompt=e}),$(Z(Z(n)),\"handleClick\",function(){var e=n.props,t=e.device,r=e.history;n.androidPrompt?(n.androidPrompt.prompt(),n.androidPrompt.userChoice.then(function(e){\"accepted\"===e.outcome&&(n.setState({appIsInstalled:!0}),n.androidPrompt=null)})):t.os.name.toLowerCase().includes(\"ios\")?(setTimeout(function(){return window.location=\"https://itunes.apple.com/fr/app/mytf1/id\".concat(J.a.alternate.ios.appStoreId)},2e3),window.location=\"fb105856129451532://\"):t.os.name.toLowerCase().includes(\"android\")?window.location=\"https://play.google.com/store/apps/details?id=fr.tf1.mytf1\":window.location=\"https://www.tf1.fr\"+r.location.pathname}),n}var n,a,i;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r[\"Component\"]),n=t,(a=[{key:\"componentDidMount\",value:function(){window.addEventListener(\"beforeinstallprompt\",this.saveAndroidPrompt)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeinstallprompt\",this.saveAndroidPrompt)}},{key:\"render\",value:function(){return o.a.createElement(\"div\",{className:G.a.layer},o.a.createElement(\"div\",{className:G.a.content},o.a.createElement(\"p\",null,\"Cette vidéo est disponible uniquement dans l'application MYTF1.\"),o.a.createElement(g.a,{className:G.a.connect,onClick:this.handleClick},\"Regarder dans l'App\")))}}])&&Y(n.prototype,a),i&&Y(n,i),t}(),te=Object(v.a)(F.a)(Object(Q.a)(ee)),ne=n(946),re=n.n(ne),oe=function(){return o.a.createElement(\"div\",{className:re.a.container},o.a.createElement(\"div\",{className:re.a.content},o.a.createElement(\"div\",{className:re.a.icon}),o.a.createElement(\"p\",{className:re.a.title},\"Pour accéder à votre contenu, veuillez utiliser un autre navigateur (Chrome, Firefox)\"),o.a.createElement(\"p\",{className:re.a.description},\"Nous mettrons prochainement en ligne une version compatible avec votre navigateur Edge.\")))};function ae(e){return(ae=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var se=function(e){var t=e.children;return o.a.createElement(\"div\",{className:V.a.container},o.a.createElement(\"div\",{className:V.a.withoutPlayer},t))},de=function(e){function t(e){var n,r,o,a,i,l;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=le(t).call(this,e),n=!o||\"object\"!==ae(o)&&\"function\"!=typeof o?ce(r):o,a=ce(ce(n)),l=function(e){n.setState({errorPlayer:e})},(i=\"onErrorPlayer\")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n.state={errorPlayer:void 0},n}var n,a,l;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r[\"Component\"]),n=t,(a=[{key:\"render\",value:function(){var e=this.props,t=e.contexts,n=t.adBlock,r=t.auth,a=t.deviceContext,l=e.isAllowed,u=void 0!==l&&l,c=e.serviceType,s=void 0===c?i.c.Replay:c,d=e.autoStart,p=e.id,f=e.isVisible,m=e.startTime,h=e.updateTimeOffset,v=e.onFullScreen,b=e.onMediaEnd,g=e.onProgress,_=this.state.errorPlayer,S=r.auth.isUpToDate,E=a.device&&a.device.browser,w=a.device&&a.device.device&&a.device.device.type;return!S||S.privacy&&S.terms?"],[-1,"n."],[1,"f"],[0,"a"],[-1,"dB"],[0,"l"],[-1,"ockDetect"],[1,"s"],[0,"e"],[-1,"d"],[0,"?o.a.createElement(se,null,o.a.createElement(y,null)):E&&\"Edge\"===E.name?o.a.createElement(se,null,o.a.createElement(oe,null)):\"browser_not_supported\"===_?o.a.createElement(se,null,o.a.createElement(z,null)):\"engine:drm\"!==_&&\"engine:drm:requestError\"!==_||\"tablet\"!==w&&\"mobile\"!==w?u?o.a.createElement(L.a,{autoStart:d,id:p,isVisible:f,startTime:m,updateTimeOffset:h,onFullScreen:v,onMediaEnd:b,onProgress:g,onError:this.onErrorPlayer}):o.a.createElement(se,null,o.a.createElement(N,{serviceType:s})):o.a.createElement(se,null,o.a.createElement(te,null)):o.a.createElement(se,null,o.a.createElement(M,null))}}])&&ie(n.prototype,a),l&&ie(n,l),t}();t.a=Object(v.b)({auth:i.a,adBlock:a.a,deviceContext:F.a})(de)},972:function(e,t,n){\"use strict\";var r=n(0),o=n.n(r),a=n(52),i=n(3),l=n.n(i),u=n(1),c=n(936),s=n.n(c),d=n(307),p=n(322),f=n(937),m=n.n(f),h=n(310);function y(e){return(y=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var v=function(e){if(void 0!==(\"undefined\"==typeof document?\"undefined\":y(document))){var t=document.createElement(\"textarea\");t.style.position=\"absolute\",t.style.left=\"-9999px\",t.style.top=\"0\",t.id=\"_hiddenCopyText_\",document.body.appendChild(t),t.textContent=e;var n=document.activeElement;t.focus(),t.setSelectionRange(0,t.value.length);try{document.execCommand(\"copy\")}catch(e){}n&&\"function\"==typeof n.focus&&n.focus(),document.body.removeChild(t)}},b=n(905);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=o.a.createElement(\"path\",{d:\"M24 4.557a9.83 9.83 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724 9.864 9.864 0 0 1-3.127 1.195 4.916 4.916 0 0 0-3.594-1.555c-3.179 0-5.515 2.966-4.797 6.045A13.978 13.978 0 0 1 1.671 3.149a4.93 4.93 0 0 0 1.523 6.574 4.903 4.903 0 0 1-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.935 4.935 0 0 1-2.224.084 4.928 4.928 0 0 0 4.6 3.419A9.9 9.9 0 0 1 0 19.54a13.94 13.94 0 0 0 7.548 2.212c9.142 0 14.307-7.721 13.995-14.646A10.025 10.025 0 0 0 24 4.557z\"}),S=function(e){return o.a.createElement(\"svg\",g({width:24,height:24},e),_)};n.p;function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=o.a.createElement(\"defs\",null,o.a.createElement(\"path\",{id:\"url_svg__a\",d:\"M0 0h15.955v9.455H0z\"}),o.a.createElement(\"path\",{id:\"url_svg__c\",d:\"M.681.545h15.955V10H.681z\"})),O=o.a.createElement(\"g\",{fill:\"none\",fillRule:\"evenodd\"},o.a.createElement(\"mask\",{id:\"url_svg__b\",fill:\"#fff\"},o.a.createElement(\"use\",{xlinkHref:\"#url_svg__a\"})),o.a.createElement(\"path\",{fill:\"#FFF\",d:\"M11.227 0h-6.5a4.729 4.729 0 0 0 0 9.455h6.5a4.729 4.729 0 0 0 0-9.455m0 2a2.731 2.731 0 0 1 2.728 2.727 2.731 2.731 0 0 1-2.728 2.728h-6.5A2.731 2.731 0 0 1 2 4.727 2.731 2.731 0 0 1 4.727 2h6.5\",mask:\"url(#url_svg__b)\"}),o.a.createElement(\"g\",{transform:\"translate(7 4)\"},o.a.createElement(\"mask\",{id:\"url_svg__d\",fill:\"#fff\"},o.a.createElement(\"use\",{xlinkHref:\"#url_svg__c\"})),o.a.createElement(\"path\",{fill:\"#FFF\",d:\"M11.91.545h-6.5a4.729 4.729 0 0 0 0 9.455h6.5a4.729 4.729 0 0 0 0-9.455m0 2a2.731 2.731 0 0 1 2.727 2.728A2.731 2.731 0 0 1 11.91 8h-6.5a2.731 2.731 0 0 1-2.728-2.727A2.731 2.731 0 0 1 5.41 2.545h6.5\",mask:\"url(#url_svg__d)\"}))),P=function(e){return o.a.createElement(\"svg\",E({width:24,height:14},e),w,O)},T=(n.p,n(186)),k=n(913);function j(e){return(j=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=A(t).call(this,e),n=!o||\"object\"!==j(o)&&\"function\"!=typeof o?I(r):o,N(I(I(n)),\"copyString\",function(){v(document.location.href),n.setState({pasteDone:!0})}),N(I(I(n)),\"handleTwitterClick\",function(){var e=encodeURIComponent(document.location.href),t=\"https://twitter.com/share?url=\".concat(e);window.open(t,\"\",\"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\")}),N(I(I(n)),\"handleFbClick\",function(){var e=encodeURIComponent(document.location.href),t=\"https://www.facebook.com/sharer/sharer.php?u=\".concat(e);window.open(t,\"\",\"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\")}),n.state={pasteDone:!1},n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,o.a.Component),n=t,(r=[{key:\"render\",value:function(){var e=document.location.href;return o.a.createElement(\"div\",{className:m.a.shareModal},o.a.createElement(\"div\",{className:m.a.urlContainer},o.a.createElement(\"input\",{className:m.a.url,value:e,readOnly:!0}),o.a.createElement(\"button\",{className:l()(m.a.copyButton,this.state.pasteDone?m.a.pasteDone:\"\"),onClick:this.copyString},this.state.pasteDone?o.a.createElement(o.a.Fragment,null,o.a.createElement(T.a,null),o.a.createElement(\"span\",{className:m.a.pasteText},\"Copié\")):o.a.createElement(o.a.Fragment,null,o.a.createElement(P,null),\" Copier\"))),o.a.createElement(\"div\",{className:m.a.shareButtonContainer},o.a.createElement(\"span\",{onClick:this.handleFbClick,className:m.a.facebook},o.a.createElement(b.a,null),\"Partager\"),o.a.createElement(\"span\",{className:m.a.twitter,onClick:this.handleTwitterClick},o.a.createElement(S,null),\"Partager\")))}}])&&C(n.prototype,r),a&&C(n,a),t}(),R=function(e){var t=e.suffix,n=e.className;e.onClick;return o.a.createElement(h.a,null,function(e){var r=e.show;return o.a.createElement(\"button\",{className:l()(m.a.socialShare,n),onClick:function(){return r(\"Partager cette vidéo\",o.a.createElement(x,null))}},o.a.createElement(k.a,{className:m.a.shareIcon}),t&&o.a.createElement(\"span\",{className:m.a.suffix},t))})};function M(e){return(M=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,a=V(t).call(this,e),n=!a||\"object\"!==M(a)&&\"function\"!=typeof a?F(r):a,U(F(F(n)),\"myRef\",o.a.createRef()),U(F(F(n)),\"isTruncated\",!1),U(F(F(n)),\"handleResize\",function(){n.handleChange()}),U(F(F(n)),\"handleChange\",function(){var e=n.myRef.current;if(e){var t=parseInt(window.getComputedStyle(e).lineHeight,10)*(n.props.nbLines||3);e.style.setProperty(\"height\",\"initial\"),e.style.setProperty(\"overflow\",\"auto\");var r=e.clientHeight>t;n.props.isOpen||(e.style.setProperty(\"height\",\"\".concat(t,\"px\")),e.style.setProperty(\"overflow\",\"hidden\")),n.isTruncated!==r&&(n.isTruncated=r,n.props.onTruncateChange&&n.props.onTruncateChange(n.isTruncated))}}),n.state={height:0},n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,o.a.Component),n=t,(r=[{key:\"componentDidMount\",value:function(){var e=this;if(this.myRef.current){var t=parseInt(window.getComputedStyle(this.myRef.current).lineHeight,10);this.setState({height:t*(this.props.nbLines||3)},function(){return e.handleChange}),window.addEventListener(\"resize\",this.handleResize)}}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.handleResize)}},{key:\"componentDidUpdate\",value:function(){this.handleChange()}},{key:\"render\",value:function(){var e=this.props,t=e.children,n=e.isOpen,r=e.className,a=this.state.height,i={};return n?(i.overflow=\"auto\",i.height=\"initial\"):(i.overflow=\"hidden\",i.height=a),o.a.createElement(\"div\",{ref:this.myRef,style:i,className:r},t)}}])&&B(n.prototype,r),a&&B(n,a),t}(),z=n(207),H=n(16),G=n(187),Q=n(59),J=n(160);function q(e){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,o=X(t).call(this,e),n=!o||\"object\"!==q(o)&&\"function\"!=typeof o?$(r):o,ee($($(n)),\"handleTruncateChange\",function(e){n.setState({isTruncated:e})}),ee($($(n)),\"toggleContainer\",function(){n.setState(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ee(e,t,n[t])})}return e}({},e,{isHidden:!e.isHidden})})}),ee($($(n)),\"getChannelInfoFromSlug\",function(){var e=n.props,t=e.programSlug,r=e.programThumbnail,o=e.channelSlug,a=t&&u.b.getProgramPath(o,t);if(r)return[r,a,!1];var i=o===H.b.LCI?\"https://www.lci.fr\":u.b.getChannelPath(o);return[Object(Q.w)(o),i,o===H.b.LCI]}),ee($($(n)),\"renderDate\",function(e){return e.toLocaleString(\"fr-FR\",{day:\"2-digit\",month:\"long\",year:\"numeric\"})}),ee($($(n)),\"renderTime\",function(e){return e.toLocaleTimeString(\"fr-FR\",{hour:\"2-digit\",minute:\"2-digit\"})}),ee($($(n)),\"handleExpand\",function(){return n.setState(function(e){return{isOpen:!e.isOpen}})}),n.state={isOpen:!1,isTruncated:!1,isHidden:!0},n}var n,r,i;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:\"render\",value:function(){var e=this,t=this.props,n=t.programSlug,r=t.programName,i=t.remainingDays,u=void 0===i?0:i,c=t.startAt,f=t.endAt,m=t.title,h=t.addDate,y=t.description,v=t.isLive,b=t.isReplay,g=t.isSEOMainTag,_=t.isBookmarked,S=void 0!==_&&_,E=t.deviceType,w=this.state.isOpen,O=Math.min(30,u),P=\"\".concat(u>30?\"+ \":\"\").concat(O),T=\"desktop\"===E?o.a.createElement(\"div\",{className:s.a.descriptionOnDesktop},o.a.createElement(W,{nbLines:2,className:l()(s.a.description),isOpen:w,onTruncateChange:this.handleTruncateChange},y),(this.state.isTruncated||this.state.isOpen)&&o.a.createElement(\"div\",{className:l()(s.a.showAll),onClick:function(){e.toggleContainer(),e.handleExpand()}},o.a.createElement(d.a,{className:l()(this.state.isHidden?s.a.arrow__down:null,s.a.arrow)}))):o.a.createElement(\"div\",{className:s.a.descriptionOnMobile},y),k=Y(this.getChannelInfoFromSlug(),3),j=k[0],C=k[1],A=k[2],D=o.a.createElement(J.a,{fallbackInstance:o.a.createElement(\"div\",{className:s.a.placeholder}),alt:r,src:Object(Q.w)(this.props.channelSlug)});return o.a.createElement(\"article\",null,o.a.createElement(\"div\",{className:s.a.titleContent},!!m&&o.a.createElement(p.a,{tag:g?\"h1\":\"h2\",content:m,limits:[{name:\"default\",value:90}],className:s.a.title}),o.a.createElement(\"div\",{className:l()(s.a.expandButton),onClick:this.toggleContainer},o.a.createElement(d.a,{className:l()(this.state.isHidden?s.a.arrow__down:null,s.a.arrow,s.a.arrow_onlymobile)}))),o.a.createElement(\"div\",{className:s.a.contentScrollable},o.a.createElement(\"div\",{className:l()(this.state.isHidden?s.a.hidden:null,s.a.textContainer)},T)),o.a.createElement(\"div\",{className:s.a.details},o.a.createElement(\"div\",{className:s.a.vignette},o.a.createElement(G.a,{href:C||\"\",isExternal:A,className:s.a.programLink},o.a.createElement(J.a,{alt:r,src:j,fallbackInstance:D})),o.a.createElement(\"div\",{className:s.a.availableDates},o.a.createElement(a.a,{to:C||\"\",onClick:function(e){return!n&&e.preventDefault()},className:l()(s.a.programName,!n&&s.a.disabled)},r),!v&&h&&o.a.createElement(\"div\",{className:s.a.addDate},\"Ajouté le \".concat(this.renderDate(h))),v&&c&&f&&o.a.createElement(\"div\",{className:s.a.programDuration},\" \",\"\".concat(this.renderTime(c)),\" - \",\"\".concat(this.renderTime(f))),v?null:o.a.createElement(\"span\",null,\"Disponible \",P,\" jour\",1!==u&&\"s\")))),!v&&o.a.createElement(\"div\",{className:s.a.userButtons},o.a.createElement(z.a,{id:this.props.videoId,isBookmarked:S,className:l()(s.a.bookmark,s.a.buttonWithIcons,v||b?s.a.buttonWithoutAnimation:null)}),o.a.createElement(R,{className:l()(s.a.buttonWithIcons),suffix:\"Partager\"})))}}])&&K(n.prototype,r),i&&K(n,i),t}();t.a=te}}]);"]],"target":"tf1.js"},{"action":"redirect","name":"6play","pattern":"https://www.6play.fr/player-fw-*","url":"https://www.6play.fr/player-fw-d18b7b5d33.bundle.js","diff":[[0,"(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[27],{\"+khe\":function(e,t,i){\"use strict\";var n=i(\"h0tQ\"),s=i(\"LHdc\");class a{constructor(e){this.config=e}saveLastBreak(){const e=this.config.videoType,t=a.getBreakTimestamps();t[e]=Date.now(),s.b.set(\"lastBreakTimestamp\",JSON.stringify(t))}static retrieveLastBreakTimestamp(e){return a.getBreakTimestamps()[e]}static getBreakTimestamps(){try{return JSON.parse(s.b.get(\"lastBreakTimestamp\"))||{}}catch(e){n.a.error(\"Capping\",\"saveLastBreak\",e)}return{}}canBreak(e=0){const t=this.config,i=t.videoType,s=t.duration,r=a.retrieveLastBreakTimestamp(i),o=Date.now()+1e3*e;if(r&&r<o){if(o/1e3<r/1e3+s)return n.a.debug(\"Capping\",\"canBreak\",\"Minimum time between breaks not elapsed\"),!1}return!0}}var r=a,o=i(\"JF4u\"),l=i(\"9EL5\");function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){h(e,t,i[t])})}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.a=class{constructor(e,t,i){this.setAutoPlay=(e=>{this.shouldAutoPlay=e}),this.config=e,this.eventsHandlers=d({},t),this.contentHandlers=d({},i),this.handleInteraction=this.handleInteraction.bind(this),this.eventsHandlers.__onBreakEnded=this.eventsHandlers.onBreakEnded,this.eventsHandlers.onBreakEnded=((...e)=>{this.jingles.breakDisplayed=!1,this.jingles.sponsorDisplayed=!1,this.eventsHandlers.__onBreakEnded(...e),this.capping.saveLastBreak()}),this.cuePoints=[]}canBreak(e=0,t=!1){return!!this.capping.canBreak(e)||(this.eventsHandlers.onBreakCapping(),t&&(this.eventsHandlers.onProviderLoaded(),this.shouldAutoPlay&&this.contentHandlers.playerPlay()),!1)}setContainerRef(e){this.containerRef=e}setVideoRef(e){this.videoRef=e,this.videoEl=e}setCompanionRef(e){this.companionRef=e}__onAdClick(e,t,i=!0){if(o.IS_MOBILE&&!this.contentHandlers.isUserActive())this.eventsHandlers.onUserActive();else if(/^https?:\\/\\//.test(e))return window.open(e,\"_blank\"),\"function\"==typeof t&&t(),i&&this.pause(),this.eventsHandlers.onClicked(e),!0;return!1}handleInteraction(){}init(){return this.eventsHandlers.onProviderLoading(),this.jingles={breakDisplayed:!1,sponsorDisplayed:!1},this.capping=new r(this.config.capping),this.cuePoints=this.config.cuePoints.slice(0),Object(l.a)().then(e=>{this.desiredBitrate=e})}reload(e){this.config=e}release(){}contentHasEnded(){}contentHasPaused(){}contentHasStarted(){}contentHasProgressed(){}requestAds(){}setVolume(e){this.config.volume=e}isEnded(){}isPaused(){}pause(){}play(){}stop(){}resize(){}}},\"/8Pf\":function(e,t,i){e.exports=i(\"hucw\").version},\"2aCO\":function(e,t,i){var n=i(\"841u\"),s=i(\"UKkV\"),a=n.extend({on:function(e,t){if(this._listeners=this._listeners||{},\"function\"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},s(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),s(this._listeners[\"*\"])&&this._listeners[\"*\"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,i){\"function\"==typeof i&&i({type:e,data:t,target:this})}});e.exports=a},\"4S5m\":function(e,t,i){var n=i(\"841u\").extend({constructor:function(){\"undefined\"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});e.exports=n},\"569I\":function(e,t){e.exports={cdnName:\"AKAMAI\",parsers:[{element:\"type+host\",headerName:\"X-Cache\",regex:/(.+)\\sfrom\\s.+\\(.+\\/(.+)\\).*/}],parseType:function(e){switch(e){case\"TCP_HIT\":return 1;case\"TCP_MISS\":return 2;default:return 0}}}},\"841u\":function(e,t,i){var n=i(\"yDOl\"),s=i(\"a8Wz\"),a=function(){};a.prototype={constructor:function(){}},a.extend=function(e,t){var i,a=this;return i=e&&e.hasOwnProperty(\"constructor\")?e.constructor:function(){return a.apply(this,arguments)},n(i,a,t),i.prototype=s(a.prototype),e&&n(i.prototype,e),i.prototype.constructor=i,i.__super__=a.prototype,i},e.exports=a},\"8Yob\":function(e,t){e.exports=function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,n,s,a,r;return s=2147483648&e,a=2147483648&t,r=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(n=1073741824&t)?2147483648^r^s^a:i|n?1073741824&r?3221225472^r^s^a:1073741824^r^s^a:r^s^a}function n(e,n,s,a,r,o,l){return i(t(e=i(e,i(i(function(e,t,i){return e&t|~e&i}(n,s,a),r),l)),o),n)}function s(e,n,s,a,r,o,l){return i(t(e=i(e,i(i(function(e,t,i){return e&i|t&~i}(n,s,a),r),l)),o),n)}function a(e,n,s,a,r,o,l){return i(t(e=i(e,i(i(function(e,t,i){return e^t^i}(n,s,a),r),l)),o),n)}function r(e,n,s,a,r,o,l){return i(t(e=i(e,i(i(function(e,t,i){return t^(e|~i)}(n,s,a),r),l)),o),n)}function o(e){var t,i=\"\",n=\"\";for(t=0;t<=3;t++)i+=(n=\"0\"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return i}var l,d,h,_,c,u,p,E,g,T=Array();for(T=function(e){for(var t,i=e.length,n=i+8,s=16*((n-n%64)/64+1),a=Array(s-1),r=0,o=0;o<i;)r=o%4*8,a[t=(o-o%4)/4]=a[t]|e.charCodeAt(o)<<r,o++;return r=o%4*8,a[t=(o-o%4)/4]=a[t]|128<<r,a[s-2]=i<<3,a[s-1]=i>>>29,a}(e=function(e){e=e.replace(/rn/g,\"n\");for(var t=\"\",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)),u=1732584193,p=4023233417,E=2562383102,g=271733878,l=0;l<T.length;l+=16)d=u,h=p,_=E,c=g,p=r(p=r(p=r(p=r(p=a(p=a(p=a(p=a(p=s(p=s(p=s(p=s(p=n(p=n(p=n(p=n(p,E=n(E,g=n(g,u=n(u,p,E,g,T[l+0],7,3614090360),p,E,T[l+1],12,3905402710),u,p,T[l+2],17,606105819),g,u,T[l+3],22,3250441966),E=n(E,g=n(g,u=n(u,p,E,g,T[l+4],7,4118548399),p,E,T[l+5],12,1200080426),u,p,T[l+6],17,2821735955),g,u,T[l+7],22,4249261313),E=n(E,g=n(g,u=n(u,p,E,g,T[l+8],7,1770035416),p,E,T[l+9],12,2336552879),u,p,T[l+10],17,4294925233),g,u,T[l+11],22,2304563134),E=n(E,g=n(g,u=n(u,p,E,g,T[l+12],7,1804603682),p,E,T[l+13],12,4254626195),u,p,T[l+14],17,2792965006),g,u,T[l+15],22,1236535329),E=s(E,g=s(g,u=s(u,p,E,g,T[l+1],5,4129170786),p,E,T[l+6],9,3225465664),u,p,T[l+11],14,643717713),g,u,T[l+0],20,3921069994),E=s(E,g=s(g,u=s(u,p,E,g,T[l+5],5,3593408605),p,E,T[l+10],9,38016083),u,p,T[l+15],14,3634488961),g,u,T[l+4],20,3889429448),E=s(E,g=s(g,u=s(u,p,E,g,T[l+9],5,568446438),p,E,T[l+14],9,3275163606),u,p,T[l+3],14,4107603335),g,u,T[l+8],20,1163531501),E=s(E,g=s(g,u=s(u,p,E,g,T[l+13],5,2850285829),p,E,T[l+2],9,4243563512),u,p,T[l+7],14,1735328473),g,u,T[l+12],20,2368359562),E=a(E,g=a(g,u=a(u,p,E,g,T[l+5],4,4294588738),p,E,T[l+8],11,2272392833),u,p,T[l+11],16,1839030562),g,u,T[l+14],23,4259657740),E=a(E,g=a(g,u=a(u,p,E,g,T[l+1],4,2763975236),p,E,T[l+4],11,1272893353),u,p,T[l+7],16,4139469664),g,u,T[l+10],23,3200236656),E=a(E,g=a(g,u=a(u,p,E,g,T[l+13],4,681279174),p,E,T[l+0],11,3936430074),u,p,T[l+3],16,3572445317),g,u,T[l+6],23,76029189),E=a(E,g=a(g,u=a(u,p,E,g,T[l+9],4,3654602809),p,E,T[l+12],11,3873151461),u,p,T[l+15],16,530742520),g,u,T[l+2],23,3299628645),E=r(E,g=r(g,u=r(u,p,E,g,T[l+0],6,4096336452),p,E,T[l+7],10,1126891415),u,p,T[l+14],15,2878612391),g,u,T[l+5],21,4237533241),E=r(E,g=r(g,u=r(u,p,E,g,T[l+12],6,1700485571),p,E,T[l+3],10,2399980690),u,p,T[l+10],15,4293915773),g,u,T[l+1],21,2240044497),E=r(E,g=r(g,u=r(u,p,E,g,T[l+8],6,1873313359),p,E,T[l+15],10,4264355552),u,p,T[l+6],15,2734768916),g,u,T[l+13],21,1309151649),E=r(E,g=r(g,u=r(u,p,E,g,T[l+4],6,4149444226),p,E,T[l+11],10,3174756917),u,p,T[l+2],15,718787259),g,u,T[l+9],21,3951481745),u=i(u,d),p=i(p,h),E=i(E,_),g=i(g,c);return(o(u)+o(p)+o(E)+o(g)).toLowerCase()}},\"9/T3\":function(e,t,i){var n=i(\"841u\"),s=i(\"XHki\"),a=i(\"be/F\"),r=n.extend({constructor:function(e,t,i){this._adapter=e,this._seekEnabled=t&r.Type.SEEK,this._bufferEnabled=t&r.Type.BUFFER,i=i||800,this._chrono=new a,this._lastPlayhead=0,i>0&&(this._timer=new s(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*r.kBUFFER_THRESHOLD_RATIO,i=e*r.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var n=this._getPlayhead(),s=1e3*Math.abs(this._lastPlayhead-n);s<t?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):s>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=n},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});e.exports=r},B97I:function(module,exports){!function(){let U=`SDK_${\"6.24.0-b4238994-201807302045\".replace(/[^\\w]/g,\"_\")}`,w=\"undefined\"!=typeof window?window:\"undefined\"!=typeof GLOBAL?GLOBAL:this;w.tv=w.tv||{},w.tv.freewheel=w.tv.freewheel||{},w.tv.freewheel[U]=function(w){const a={version:\"js-6.24.0-b4238994-201807302045\"};return\"undefined\"!=typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version),a.LOG_LEVEL_QUIET=0,a.LOG_LEVEL_INFO=1,a.LOG_LEVEL_DEBUG=2,a.setLogLevel=function(e){if(a.warn=a.log=a.debug=function(){},\"undefined\"!=typeof console){try{window.localStorage&&window.localStorage.getItem(\"fwLogLevel\")&&window.localStorage.getItem(\"fwLogLevel\")>-1&&(e=window.localStorage.getItem(\"fwLogLevel\"))}catch(e){console.warn(`>FW Common.setLogLevel${e.description}`)}e>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(`>FW ${(new Date).toTimeString().substr(3,6)}${Array.prototype.slice.call(arguments).join(\" \")}`)},a.warn=function(){console.warn(`>FW ${(new Date).toTimeString().substr(3,6)}${Array.prototype.slice.call(arguments).join(\" \")}`)},e>a.LOG_LEVEL_INFO&&(a.debug=function(){console.log(`>FW ${(new Date).toTimeString().substr(3,6)}${Array.prototype.slice.call(arguments).join(\" \")}`)}))}},a.setLogLevel(a.LOG_LEVEL_INFO),a.log(\"FreeWheel Integration Runtime\",a.version),a.proxyUrl=null,a.proxyAuthenticationParameter=null,a.setProxy=function(e){\"string\"==typeof e?(\"/\"!==e.charAt(e.length-1)&&(e+=\"/\"),a.proxyUrl=e):a.proxyUrl=null},a.setProxyAuthenticationParameter=function(e,t){a.proxyAuthenticationParameter=arguments.length>=2&&e?{key:e,value:t||\"\"}:null},a.checkUserAgent=function(e){a.PLATFORM_IS_WINDOWSPHONE=e.search(\"windows phone\")>-1,a.PLATFORM_IS_IPAD=e.search(\"ipad\")>-1,a.PLATFORM_IS_IPHONE_IPOD=e.search(\"iphone\")>-1||e.search(\"ipod\")>-1,a.PLATFORM_IS_CHROMECAST=e.search(\"crkey\")>-1;let t=function(t){return(t=e.match(t))&&t.length>0?1*(t=t[0].match(/\\d+/g))[0]+.1*t[1]:0};a.PLATFORM_IE_MOBILE_VERSION=t(/iemobile\\/\\d+\\.\\d+/),a.PLATFORM_IOS_VERSION=t(/os \\d+_\\d+/),t=e.indexOf(\"transformer\")>-1?3.2:t(/android \\d+\\.\\d+/),a.PLATFORM_ANDROID_VERSION=t,a.PLATFORM_IS_SAFARI=a.PLATFORM_IOS_VERSION>0&&e.search(\"applewebkit\")>-1||0===a.PLATFORM_ANDROID_VERSION&&e.search(\"chrome\")<0&&e.search(\"safari\")>-1,a.PLATFORM_IS_CHROME=e.search(\"edge\")<0&&e.search(\"chrome\")>-1,a.PLATFORM_IS_FIREFOX=e.search(\"firefox\")>-1,a.PLATFORM_IS_MOBILE=a.PLATFORM_IOS_VERSION>0||a.PLATFORM_ANDROID_VERSION>0,a.PLATFORM_BROWSER_VERSION=function(e){let t,i,n=\"\";return-1!==(t=e.indexOf(\"opr/\"))?n=e.substring(t+4):-1!==(t=e.indexOf(\"opera\"))?(n=e.substring(t+6),-1!==(t=e.indexOf(\"version\"))&&(n=e.substring(t+8))):-1!==(t=e.indexOf(\"rv:\"))?n=e.substring(t+3):-1!==(t=e.indexOf(\"msie\"))?n=e.substring(t+5):-1!==(t=e.indexOf(\"edge\"))?n=e.substring(t+5):-1!==(t=e.indexOf(\"chrome\"))?n=e.substring(t+7):-1!==(t=e.indexOf(\"safari\"))?(n=e.substring(t+7),-1!==(t=e.indexOf(\"version\"))&&(n=e.substring(t+8))):-1!==(t=e.indexOf(\"firefox\"))?n=e.substring(t+8):e.lastIndexOf(\" \")+1<(t=e.lastIndexOf(\"/\"))&&(n=e.substring(t+1)),-1!==(i=n.indexOf(\";\"))&&(n=n.substring(0,i)),-1!==(i=n.indexOf(\" \"))&&(n=n.substring(0,i)),(e=parseInt(`${n}`,10))?e:0}(e),a.PLATFORM_ID=a.PLATFORM_IS_MOBILE?a.PLATFORM_ANDROID_VERSION>0?`Android${a.PLATFORM_ANDROID_VERSION}`:a.PLATFORM_IS_IPAD?`iPad${a.PLATFORM_IOS_VERSION}`:a.PLATFORM_IS_IPHONE_IPOD?`iPhone${a.PLATFORM_IOS_VERSION}`:\"UnknownMobile\":\"Desktop\",a.log(\"Device:\",a.PLATFORM_ID,\"PLATFORM_IS_SAFARI:\",a.PLATFORM_IS_SAFARI,\"PLATFORM_IS_CHROME:\",a.PLATFORM_IS_CHROME)},a.checkUserAgent(navigator.userAgent.toLowerCase()),a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?\"touchend\":\"click\",a.MOBILE_EVENT_DRAG=\"touchmove\",a.PLATFORM_SEND_REQUEST_BY_FORM=!1,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=a.PLATFORM_ANDROID_VERSION>=3.1,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0,a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD,a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD,a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_ANDROID_VERSION>0&&a.PLATFORM_ANDROID_VERSION<3.1||a.PLATFORM_IS_WINDOWSPHONE,a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=a.PLATFORM_IOS_VERSION>=4.2,a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=a.PLATFORM_ANDROID_VERSION>=2.2&&a.PLATFORM_ANDROID_VERSION<=3||a.PLATFORM_IE_MOBILE_VERSION>=9,a.PLATFORM_NOT_SUPPORT_VIDEO_AD=a.PLATFORM_ANDROID_VERSION>0&&a.PLATFORM_ANDROID_VERSION<=2.1,a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&a.PLATFORM_IOS_VERSION>=4.2,a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&a.PLATFORM_IOS_VERSION<10||a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST,a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=a.PLATFORM_ANDROID_VERSION>=3.1||a.PLATFORM_IOS_VERSION>=10,a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=a.PLATFORM_ANDROID_VERSION>0&&a.PLATFORM_ANDROID_VERSION<=3,a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=a.PLATFORM_IE_MOBILE_VERSION>=9,a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=a.PLATFORM_IOS_VERSION>0&&a.PLATFORM_IOS_VERSION<4.2&&a.PLATFORM_IOS_VERSION>=4,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=!1,a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||a.PLATFORM_IOS_VERSION>=4&&a.PLATFORM_IOS_VERSION<4.2,a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=a.PLATFORM_IS_IPAD,a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(a.PLATFORM_ANDROID_VERSION>0||a.PLATFORM_BROWSER_VERSION>=64),a.RENDERER_STATE_INIT=1,a.RENDERER_STATE_STARTING=2,a.RENDERER_STATE_STARTED=3,a.RENDERER_STATE_COMPLETING=4,a.RENDERER_STATE_COMPLETED=5,a.RENDERER_STATE_FAILED=6,a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT,a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING,a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED,a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING,a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED,a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED,a.EVENT_AD=\"adEvent\",a.EVENT_AD_BUFFERING_START=\"adBufferingStart\",a.EVENT_AD_BUFFERING_END=\"adBufferingEnd\",a.EVENT_SLOT_IMPRESSION=\"slotImpression\",a.EVENT_SLOT_END=\"slotEnd\",a.EVENT_AD_INITIATED=\"adInitiated\",a.EVENT_AD_IMPRESSION=\"defaultImpression\",a.EVENT_AD_IMPRESSION_END=\"adEnd\",a.EVENT_AD_QUARTILE=\"quartile\",a.EVENT_AD_FIRST_QUARTILE=\"firstQuartile\",a.EVENT_AD_MIDPOINT=\"midPoint\",a.EVENT_AD_THIRD_QUARTILE=\"thirdQuartile\",a.EVENT_AD_SKIPPED=\"adSkipped\",a.EVENT_AD_COMPLETE=\"complete\",a.EVENT_AD_CLICK=\"defaultClick\",a.EVENT_AD_MUTE=\"_mute\",a.EVENT_AD_UNMUTE=\"_un-mute\",a.EVENT_AD_COLLAPSE=\"_collapse\",a.EVENT_AD_EXPAND=\"_expand\",a.EVENT_AD_PAUSE=\"_pause\",a.EVENT_AD_RESUME=\"_resume\",a.EVENT_AD_REWIND=\"_rewind\",a.EVENT_AD_ACCEPT_INVITATION=\"_accept-invitation\",a.EVENT_AD_CLOSE=\"_close\",a.EVENT_AD_MINIMIZE=\"_minimize\",a.EVENT_ERROR=\"_e_unknown\",a.EVENT_RESELLER_NO_AD=\"resellerNoAd\",a.EVENT_AD_MEASUREMENT=\"concreteEvent\",a.EVENT_EXTENSION_LOADED=\"extensionLoaded\",a.EVENT_AD_VOLUME_CHANGE=\"adVolumeChange\",a.EVENT_AD_AUTO_PLAY_BLOCKED=\"videoAutoPlayBlocked\",a.INFO_KEY_CUSTOM_ID=\"customId\",a.INFO_KEY_MODULE_TYPE=\"moduleType\",a.MODULE_TYPE_EXTENSION=\"extension\",a.MODULE_TYPE_RENDERER=\"renderer\",a.MODULE_TYPE_TRANSLATOR=\"translator\",a.INFO_KEY_ERROR_CODE=\"errorCode\",a.INFO_KEY_ERROR_INFO=\"errorInfo\",a.INFO_KEY_ERROR_MODULE=\"errorModule\",a.INFO_KEY_VAST_ERROR_CODE=\"vastErrorCode\",a.ERROR_IO=\"_e_io\",a.ERROR_TIMEOUT=\"_e_timeout\",a.ERROR_NULL_ASSET=\"_e_null-asset\",a.ERROR_ADINSTANCE_UNAVAILABLE=\"_e_adinst-unavail\",a.ERROR_UNKNOWN=\"_e_unknown\",a.ERROR_MISSING_PARAMETER=\"_e_missing-param\",a.ERROR_NO_AD_AVAILABLE=\"_e_no-ad\",a.ERROR_PARSE=\"_e_parse\",a.ERROR_INVALID_VALUE=\"_e_invalid-value\",a.ERROR_INVALID_SLOT=\"_e_invalid-slot\",a.ERROR_NO_RENDERER=\"_e_no-renderer\",a.ERROR_DEVICE_LIMIT=\"_e_device-limit\",a.ERROR_3P_COMPONENT=\"_e_3p-comp\",a.ERROR_UNSUPPORTED_3P_FEATURE=\"_e_unsupp-3p-feature\",a.ERROR_SECURITY=\"_e_security\",a.ERROR_UNMATCHED_SLOT_SIZE=\"_e_slot-size-unmatch\",a.INFO_KEY_URL=\"url\",a.INFO_KEY_SHOW_BROWSER=\"showBrowser\",a.INFO_KEY_CUSTOM_EVENT_NAME=\"customEventName\",a.INFO_KEY_NEED_EMPTY_CT=\"needEmptyCT\",a.INFO_KEY_CONCRETE_EVENT_ID=\"concreteEventId\",a.EVENT_TYPE_CLICK_TRACKING=\"CLICKTRACKING\",a.EVENT_TYPE_IMPRESSION=\"IMPRESSION\",a.EVENT_TYPE_CLICK=\"CLICK\",a.EVENT_TYPE_STANDARD=\"STANDARD\",a.EVENT_TYPE_GENERIC=\"GENERIC\",a.EVENT_TYPE_ERROR=\"ERROR\",a.EVENT_VIDEO_VIEW=\"videoView\",a.SHORT_EVENT_TYPE_IMPRESSION=\"i\",a.SHORT_EVENT_TYPE_CLICK=\"c\",a.SHORT_EVENT_TYPE_STANDARD=\"s\",a.SHORT_EVENT_TYPE_ERROR=\"e\",a.INIT_VALUE_ZERO=\"0\",a.INIT_VALUE_ONE=\"1\",a.INIT_VALUE_TWO=\"2\",a.INFO_KEY_PARAMETERS=\"parameters\",a.URL_PARAMETER_KEY_ET=\"et\",a.URL_PARAMETER_KEY_CN=\"cn\",a.URL_PARAMETER_KEY_INIT=\"init\",a.URL_PARAMETER_KEY_CT=\"ct\",a.URL_PARAMETER_KEY_METR=\"metr\",a.URL_PARAMETER_KEY_CR=\"cr\",a.URL_PARAMETER_KEY_KEY_VALUE=\"kv\",a.URL_PARAMETER_KEY_ERROR_INFO=\"additional\",a.URL_PARAMETER_KEY_ERROR_MODULE=\"renderer\",a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID=\"reid\",a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID=\"creid\",a.CAPABILITY_SLOT_TEMPLATE=\"sltp\",a.CAPABILITY_DISPLAY_REFRESH=\"rfnt\",a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS=\"emcr\",a.CAPABILITY_RECORD_VIDEO_VIEW=\"exvt\",a.CAPABILITY_CHECK_COMPANION=\"cmpn\",a.CAPABILITY_CHECK_TARGETING=\"targ\",a.CAPABILITY_RESET_EXCLUSIVITY=\"rste\",a.CAPABILITY_FALLBACK_UNKNOWN_ASSET=\"unka\",a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION=\"unks\",a.CAPABILITY_FALLBACK_ADS=\"fbad\",a.CAPABILITY_SLOT_CALLBACK=\"slcb\",a.CAPABILITY_NULL_CREATIVE=\"nucr\",a.CAPABILITY_AUTO_EVENT_TRACKING=\"aeti\",a.CAPABILITY_RENDERER_MANIFEST=\"rema\",a.CAPABILITY_REQUIRE_VIDEO_CALLBACK=\"vicb\",a.CAPABILITY_SKIP_AD_SELECTION=\"skas\",a.SLOT_TYPE_TEMPORAL=\"temporal\",a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL=\"videoPlayerNonTemporal\",a.SLOT_TYPE_SITESECTION_NONTEMPORAL=\"siteSectionNonTemporal\",a.TIME_POSITION_CLASS_PREROLL=\"PREROLL\",a.TIME_POSITION_CLASS_MIDROLL=\"MIDROLL\",a.TIME_POSITION_CLASS_POSTROLL=\"POSTROLL\",a.TIME_POSITION_CLASS_OVERLAY=\"OVERLAY\",a.TIME_POSITION_CLASS_DISPLAY=\"DISPLAY\",a.TIME_POSITION_CLASS_PAUSE_MIDROLL=\"PAUSE_MIDROLL\",a.EVENT_REQUEST_INITIATED=\"onRequestInitiated\",a.EVENT_REQUEST_COMPLETE=\"onRequestComplete\",a.EVENT_SLOT_STARTED=\"onSlotStarted\",a.EVENT_SLOT_ENDED=\"onSlotEnded\",a.EVENT_CONTENT_VIDEO_PAUSED=\"contentVideoPaused\",a.EVENT_CONTENT_VIDEO_RESUMED=\"contentVideoResumed\",a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST=\"contentVideoPauseRequest\",a.EVENT_CONTENT_VIDEO_RESUME_REQUEST=\"contentVideoResumeRequest\",a.CAPABILITY_STATUS_OFF=0,a.CAPABILITY_STATUS_ON=1,a.PARAMETER_LEVEL_PROFILE=0,a.PARAMETER_LEVEL_GLOBAL=1,a.PARAMETER_LEVEL_OVERRIDE=5,a.PARAMETER_ENABLE_FORM_TRANSPORT=\"sdk.enableFormTransport\",a.PARAMETER_DESIRED_BITRATE=\"desiredBitrate\",a.PARAMETER_VIDEO_POOL_SIZE=\"sdk.videoPoolSize\",a.PARAMETER_PAGE_SLOT_CONTENT_TYPE=\"sdk.pageSlotContentType\",a.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=\"PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT\",a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT=\"extension.ad.control.clickElement\",a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED=\"extension.contentVideo.enabled\",a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME=\"extension.contentVideo.respondPauseResume\",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK=\"extension.contentVideo.autoSeekBack\",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE=\"extension.contentVideo.autoSourceRestore\",a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED=\"extension.videoState.enabled\",a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT=\"renderer.video.startDetectTimeout\",a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT=\"renderer.video.progressDetectTimeout\",a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY=\"renderer.video.android.delay\",a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE=\"renderer.video.displayControlsWhenPause\",a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION=\"renderer.video.clickDetection\",a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED=\"renderer.video.playAfterStalled\",a.PARAMETER_EXTENSION_SURVEY_ENABLED=\"extension.survey.enabled\",a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME=\"renderer.html.coadScriptName\",a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT=\"renderer.html.isBackgroundTransparent\",a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION=\"renderer.html.shouldEndAfterDuration\",a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT=\"renderer.html.adLoadTimeout\",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE=\"renderer.html.placementType\",a.PARAMETER_RENDERER_HTML_BOOTSTRAP=\"renderer.html.bootstrap\",a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR=\"renderer.html.primaryAnchor\",a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH=\"renderer.html.marginWidth\",a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT=\"renderer.html.marginHeight\",a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY=\"renderer.vpaid.creativeTimeoutDelay\",a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS=\"translator.vast.timeoutInMilliseconds\",a.PARAMETER_VAST_MAX_WRAPPER_COUNT=\"translator.vast.maxWrapperCount\",a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5,a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INLINE=\"inline\",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL=\"interstitial\",a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL=\"app-interstitial\",a.ID_TYPE_FW=1,a.ID_TYPE_CUSTOM=2,a.ID_TYPE_GROUP=3,a.VIDEO_STATE_PLAYING=1,a.VIDEO_STATE_PAUSED=2,a.VIDEO_STATE_STOPPED=3,a.VIDEO_STATE_COMPLETED=4,a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1,a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NON_AUTO_PLAY=3,a.VIDEO_ASSET_DURATION_TYPE_EXACT=\"exact\",a.VIDEO_ASSET_DURATION_TYPE_VARIABLE=\"variable\",a.ADUNIT_PREROLL=\"preroll\",a.ADUNIT_MIDROLL=\"midroll\",a.ADUNIT_POSTROLL=\"postroll\",a.ADUNIT_OVERLAY=\"overlay\",a.ADUNIT_STREAM_PREROLL=\"stream_preroll\",a.ADUNIT_STREAM_POSTROLL=\"stream_postroll\",a.SLOT_LOCATION_PLAYER=\"player\",a.SLOT_LOCATION_EXTERNAL=\"external\",a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=0,a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=5,a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6,a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=8,a.REQUEST_MODE_ON_DEMAND=\"on-demand\",a.REQUEST_MODE_LIVE=\"live\",a.MINIMUM_VAST_VERSION_SUPPORTED=2,a.MAXIMUM_VAST_VERSION_SUPPORTED=4,a.ERROR_VAST_XML_PARSING=\"100\",a.ERROR_VAST_SCHEMA_VALIDATION=\"101\",a.ERROR_VAST_VERSION_NOT_SUPPORTED=\"102\",a.ERROR_VAST_TRACKING_ERROR=\"200\",a.ERROR_VAST_LINEARITY_NOT_MATCH=\"201\",a.ERROR_VAST_NO_AD=\"303\",a.ERROR_VAST_WRAPPER_LIMIT_REACH=\"302\",a.ERROR_VAST_URI_TIMEOUT=\"301\",a.ERROR_VAST_GENERAL_LINEAR_ERROR=\"400\",a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR=\"500\",a.ERROR_VAST_COMPANION_GENERAL_ERROR=\"600\",a.ERROR_VAST_GENERAL_VPAID_ERROR=\"901\",a.Util={canPlayVideoType(e){if(a.PLATFORM_IS_SAFARI&&(\"video/ogg\"===e||\"video/webm\"===e))return!1;if(a.PLATFORM_ANDROID_VERSION>1&&\"video/m4v\"===e)return!0;if(\"video/3gp\"===e&&(e=\"video/3gpp\"),a.PLATFORM_ANDROID_VERSION>=3&&\"video/3gpp\"===e)return!0;const t=document.createElement(\"video\");return!!t.canPlayType&&!(!t.canPlayType(e)&&!t.canPlayType(e.replace(\"/\",\"/x-\")))},str2bool:e=>!!e&&(\"true\"===(e=a.Util.trim(e).toLowerCase())||\"yes\"===e||\"on\"===e||\"1\"===e),trim:e=>\"string\"!=typeof e?e.toString():e.replace(/^\\s+|\\s+$/g,\"\"),isBlank:e=>!e||\"\"===a.Util.trim(e),encodeToHex(e){for(var t=\"\",i=0;i<e.length;i++){for(var n=e.charCodeAt(i).toString(16).toUpperCase();n.length<4;)n=`0${n}`;t+=`\\\\u${n.toUpperCase()}`}return t},forEachOnArray(e,t,i){let n;if(null==e)throw new TypeError(\" array is null or not defined\");const s=(e=Object(e)).length>>>0;if(\"[object Function]\"!=={}.toString.call(t))throw new TypeError(`${t} is not a function`);for(i&&(n=i),i=0;i<s;){if(i in e){const s=e[i];t.call(n,s,i,e)}i++}},mixin(e,t){for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e},copy:e=>a.Util.mixin({},e),bind(e,t){let i=t,n=Array.prototype.slice.call(arguments);return n.shift(),i=n.shift(),function(){return i.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},getObject(e,t,i){if(!e)return null;e=e.split(\".\"),t=t||window;for(var n,s=0;t&&(n=e[s]);s++)t=n in t?t[n]:i?t[n]={}:void 0;return t},buildNode(b,c,d,e,f){a.debug(\"Util.buildNode\"),d||(d=document),b.innerHTML=c||\"\",b=b.getElementsByTagName(\"script\");const g=d.getElementsByTagName(\"head\")[0];for(c=0;c<b.length;++c)if(a.PLATFORM_IS_FIREFOX||b[c].src){var h=d.createElement(\"script\");b[c].charset&&(h.charset=b[c].charset),b[c].src&&(h.src=b[c].src),b[c].innerHTML&&(h.innerHTML=b[c].innerHTML),h.onload=h.onreadystatechange=function(){this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||g.removeChild(h)};try{g.appendChild(h)}catch(e){a.warn(`load script err: ${e}`)}}else h=b[c].innerHTML,e&&(h=h.replace(/var fw_scope = document;/,`var fw_scope=${e};`)),f&&(h=h.replace(/var fw_scope_window = window;/,`var fw_scope_window=${f};`)),eval(h)},replacePageSlot(e,t,i){let n,s=e;a.debug(`Util.replacePageSlot(${Array.prototype.slice.call(arguments).join(\",\")})`);try{var r=document.getElementById(s)?document:parent.document.getElementById(s)?parent.document:null,o=document.getElementById(s)?\"window\":parent.document.getElementById(s)?\"parent\":null}catch(e){o=r=null}if(!r)for(let e=0;e<window.frames.length;e++)try{window.frames[e].document.getElementById(s)&&(r=window.frames[e].document,o=`window.frames[${e}]`)}catch(e){a.warn(e)}if(o&&(n=`${o}.document`),a.log(`replacing slot ${s} in frame ${n}`),!r)throw`Slot element not found: ${s}`;s=i?r.getElementById(i):r.getElementById(`_fw_container_${s}`),a.Util.buildNode(s,t,r,n,o)},transformUrlToProxy(e){if(null==a.proxyUrl)return e;const t=a.proxyUrl.replace(\"$\",\"$$\");return e=e.replace(/https?:\\/\\//,t),a.proxyAuthenticationParameter&&(e=a.Util.setParameterInURL(e,a.proxyAuthenticationParameter.key,a.proxyAuthenticationParameter.value)),e},pingURLWithImage(e){new Image(1,1).src=a.Util.transformUrlToProxy(e)},pingURLWithForm(e,t,i){i=i?\"_fw_request\":\"_fw_cb\",null==t&&(t=Math.random());const n=document.createElement(\"iframe\");n.name=`${i}_iframe_${t}`,n.id=`${i}_iframe_${t}`,n.style.position=\"absolute\",n.style.left=\"-10000px\",n.style.width=\"1px\",n.style.visibility=\"hidden\";const s=document.createElement(\"form\");s.action=a.Util.transformUrlToProxy(e),s.id=`${i}_form_${t}`,s.target=n.id,s.method=\"post\",s.style.position=\"absolute\",s.style.left=\"-10000px\",s.style.width=\"1px\",s.style.visibility=\"hidden\",document.body&&(document.body.appendChild(n),document.body.appendChild(s),s.submit(),document.body.removeChild(s))},pingURLWithScript(e){let t=document.getElementsByTagName(\"head\")[0],i=document.createElement(\"script\");i.src=a.Util.transformUrlToProxy(e),i.onload=i.onreadystatechange=function(){this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||t.removeChild(i)},t.appendChild(i)},pingURL(e){a.debug(`send callback: ${e}`),e&&(a.PLATFORM_SEND_REQUEST_BY_FORM?a.Util.pingURLWithForm(e,null,!1):a.Util.pingURLWithImage(e))},pingURLs(e){for(let t=0;t<e.length;t++)a.Util.pingURL(e[t])},setParameterInURL(e,t,i){if(!e||!t||null==i)return null;let n=!1;if(e=e.split(\"?\"),i=encodeURIComponent(i),e[1]){const a=e[1].split(\"&\");for(let e=0;e<a.length;++e){var s=a[e].split(\"=\");if(s[0]===t){a[e]=`${s[0]}=${i}`,n=!0;break}}s=a.join(\"&\"),n||(s=`${t}=${i}&${s}`)}else s=`${t}=${i}`;return`${e[0]}?${s}`},getParameterInURL(e,t){if(!e||!t)return null;if((e=e.split(\"?\"))[1]){e=e[1].split(\"&\");for(let i=0;i<e.length;++i){const n=e[i].split(\"=\");if(n[0]===t&&!a.Util.isBlank(n[1]))return decodeURIComponent(n[1])}}return null},isParameterInURL(e,t){if(!e||!t)return!1;if((e=e.split(\"?\"))[1]){e=e[1].split(\"&\");for(let i=0;i<e.length;++i)if(e[i].split(\"=\")[0]===t)return!0}return!1},flashVersion(){let e=\"0,0,0,0\";if(null!=navigator.plugins&&navigator.plugins.length>0){if(navigator.plugins[\"Shockwave Flash 2.0\"]||navigator.plugins[\"Shockwave Flash\"])try{let t=navigator.plugins[`Shockwave Flash${navigator.plugins[\"Shockwave Flash 2.0\"]?\" 2.0\":\"\"}`].description.split(\" \"),i=t[2].split(\".\"),n=i[0],s=i[1],r=t[3];\"\"===r&&(r=t[4]),\"d\"===r[0]?r=r.substring(1):\"r\"===r[0]&&((r=r.substring(1)).indexOf(\"d\")>0&&(r=r.substring(0,r.indexOf(\"d\")))),e=`${n},${s},${r},0`}catch(e){a.warn(\"Flash detection failed on navigator method\")}}else try{const t=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash.7\").GetVariable(\"$version\").split(\" \")[1].split(\",\");3===t.length?e=`${t.join(\",\")},0`:4===t.length&&(e=t.join(\",\"))}catch(e){a.warn(\"Flash detection failed on ActiveX method\")}return e},xmlToJson(e){let t={};if(!e)return null;if(1===e.nodeType){if(e.attributes.length>0){t[\"@attributes\"]={};for(var i=0;i<e.attributes.length;i++){var n=e.attributes.item(i);t[\"@attributes\"][n.nodeName]=n.nodeValue}}}else 3===e.nodeType?t=e.nodeValue:4===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()){for(i=0;i<e.childNodes.length;i++){const s=(n=e.childNodes.item(i)).nodeName;if(void 0===t[s])t[s]=a.Util.xmlToJson(n);else{if(void 0===t[s].length||\"string\"==typeof t[s]){const e=t[s];t[s]=[],t[s].push(e)}t[s].push(a.Util.xmlToJson(n))}}void 0!==t[\"#cdata-section\"]?(t.value=t[\"#cdata-section\"],t.value.constructor===Array&&(t.value=t.value.join(\"\"))):t[\"#text\"]&&(t.value=t[\"#text\"])}return t},lazyJavaScriptLoad(e,t){let i=document.getElementsByTagName(\"head\")[0]||document.documentElement,n=document.createElement(\"script\");n.type=\"text/javascript\",n.src=e,t&&(n.attachEvent&&!window.opera?n.onreadystatechange=function(){\"loaded\"!==n.readyState&&\"complete\"!==n.readyState||(i.removeChild(n),n.onreadystatechange=null,t())}:n.addEventListener(\"load\",function(){i.removeChild(n),t()},!1)),i.insertBefore(n,i.firstChild)},getViewport(){let e=0,t=0;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.getElementsByTagName(\"body\")&&document.getElementsByTagName(\"body\")[0]&&(e=document.getElementsByTagName(\"body\")[0].clientWidth,t=document.getElementsByTagName(\"body\")[0].clientHeight),{width:e,height:t,offsetX:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,offsetY:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},getAbsoluteUrl(e,t){if(e=a.Util.trim(e),-1!==(t=a.Util.trim(t)).indexOf(\"://\"))return t;let i=e.substring(0,e.indexOf(\"://\"));if(0===t.indexOf(\"//\"))return`${i}:${t}`;let n=e;return-1!==(i=e.indexOf(\"/\",e.indexOf(\"://\")+5))&&(n=e.substring(0,i)),0===t.indexOf(\"/\")?n+t:(n=e,-1!==(i=e.lastIndexOf(\"#\"))&&(n=e.substring(0,i)),0===t.indexOf(\"#\")?n+t:(i=e,-1!==(n=e.indexOf(\"?\"))&&(i=e.substring(0,n)),0===t.indexOf(\"?\")?i+t:(i=-1!==(n=-1===n?e.lastIndexOf(\"/\"):i.lastIndexOf(\"/\"))?e.substring(0,n+1):`${i}/`)+t))},secondsToHms(e){e=isNaN(Number(e))?0:Number(e);let t=Math.floor(e%3600/60),i=Math.round(e%3600%60);return`${`0${Math.floor(e/3600)}`.slice(-2)}:${`0${t}`.slice(-2)}:${`0${i}`.slice(-2)}`},getFixedDigitRandomNumber:e=>(e=isNaN(Number(e))?0:Number(e),Math.floor(9*Math.random()*Math.pow(10,e-1)+Math.pow(10,e-1))),getDateStringInISOFormat:e=>e instanceof Date&&!isNaN(e.valueOf())?e.toISOString():null},a.MediaState=function(){},a.MediaState.prototype={},a.MediaState.prototype.constructor=a.MediaState,a.Util.mixin(a.MediaState.prototype,{play(e){a.debug(`${this._name} play(${e})`)},pause(e){a.debug(`${this._name} pause(${e})`)},complete(e){a.debug(`${this._name} complete(${e})`)}}),a.MediaInitState=function(){this._name=\"MediaInitState\"},a.MediaInitState.prototype=new a.MediaState,a.MediaInitState.prototype.constructor=a.MediaInitState,a.Util.mixin(a.MediaInitState.prototype,{play(e){a.debug(`${this._name} play(${e})`),e.setMediaState(a.MediaPlayingState.instance),\"function\"==typeof e.onStartPlaying&&e.onStartPlaying()}}),a.MediaInitState.instance=new a.MediaInitState,a.MediaPlayingState=function(){this._name=\"MediaPlayingState\"},a.MediaPlayingState.prototype=new a.MediaState,a.MediaPlayingState.prototype.constructor=a.MediaPlayingState,a.Util.mixin(a.MediaPlayingState.prototype,{pause(e){a.debug(`${this._name} pause(${e})`),e.setMediaState(a.MediaPausedState.instance),\"function\"==typeof e.onPausePlaying&&e.onPausePlaying()},complete(e){a.debug(`${this._name} complete(${e})`),e.setMediaState(a.MediaEndState.instance),\"function\"==typeof e.onCompletePlaying&&e.onCompletePlaying()}}),a.MediaPlayingState.instance=new a.MediaPlayingState,a.MediaPausedState=function(){this._name=\"MediaPausedState\"},a.MediaPausedState.prototype=new a.MediaState,a.MediaPausedState.prototype.constructor=a.MediaPausedState,a.Util.mixin(a.MediaPausedState.prototype,{play(e){a.debug(`${this._name} play(${e})`),e.setMediaState(a.MediaPlayingState.instance),\"function\"==typeof e.onResumePlaying&&e.onResumePlaying()},complete(e){a.debug(`${this._name} complete(${e})`),e.setMediaState(a.MediaEndState.instance),\"function\"==typeof e.onCompletePlaying&&e.onCompletePlaying()}}),a.MediaPausedState.instance=new a.MediaPausedState,a.MediaReplayingState=function(){this._name=\"MediaReplayingState\"},a.MediaReplayingState.prototype=new a.MediaState,a.MediaReplayingState.prototype.constructor=a.MediaReplayingState,a.Util.mixin(a.MediaReplayingState.prototype,{pause(e){a.debug(`${this._name} pause(${e})`),e.setMediaState(a.MediaReplayPausedState.instance),\"function\"==typeof e.onPausePlaying&&e.onPausePlaying()},complete(e){a.debug(`${this._name} complete(${e})`),e.setMediaState(a.MediaEndState.instance),\"function\"==typeof e.onCompleteReplaying&&e.onCompleteReplaying()}}),a.MediaReplayingState.instance=new a.MediaReplayingState,a.MediaReplayPausedState=function(){this._name=\"MediaReplayPausedState\"},a.MediaReplayPausedState.prototype=new a.MediaState,a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState,a.Util.mixin(a.MediaReplayPausedState.prototype,{play(e){a.debug(`${this._name} play(${e})`),e.setMediaState(a.MediaReplayingState.instance),\"function\"==typeof e.onResumePlaying&&e.onResumePlaying()},complete(e){a.debug(`${this._name} complete(${e})`),e.setMediaState(a.MediaEndState.instance),\"function\"==typeof e.onCompleteReplaying&&e.onCompleteReplaying()}}),a.MediaReplayPausedState.instance=new a.MediaReplayPausedState,a.MediaEndState=function(){this._name=\"MediaEndState\"},a.MediaEndState.prototype=new a.MediaState,a.MediaEndState.prototype.constructor=a.MediaEndState,a.Util.mixin(a.MediaEndState.prototype,{play(e){a.debug(`${this._name} play(${e})`),e.setMediaState(a.MediaReplayingState.instance),\"function\"==typeof e.onStartReplaying&&e.onStartReplaying()}}),a.MediaEndState.instance=new a.MediaEndState,a.RendererState=function(){},a.RendererState.prototype={},a.RendererState.prototype.constructor=a.RendererState,a.Util.mixin(a.RendererState.prototype,{start(e){a.debug(`${this._name} start() rendererController = ${e}`)},notifyStarted(e){a.debug(`${this._name} notifyStarted() rendererController = ${e}`)},stop(e){a.debug(`${this._name} stop() rendererController = ${e}`)},complete(e){a.debug(`${this._name} complete() rendererController = ${e}`)},notifyCompleted(e){a.debug(`${this._name} notifyCompleted() rendererController = ${e}`)},fail(e){a.debug(`${this._name} fail() rendererController = ${e}`),e.setRendererState(a.RendererFailedState.instance),e.getAdInstance().complete()}}),a.RendererInitState=function(){this._name=\"RendererInitState\"},a.RendererInitState.prototype=new a.RendererState,a.RendererInitState.prototype.constructor=a.RendererInitState,a.RendererInitState.instance=new a.RendererInitState,a.Util.mixin(a.RendererInitState.prototype,{start(e){a.debug(`${this._name} start()`),e.setRendererState(a.RendererStartingState.instance),e.getRenderer().start(e)},stop(e){a.debug(`${this._name} stop()`),e.setRendererState(a.RendererCompletingState.instance),e.getRendererState().notifyCompleted(e)}}),a.RendererStartingState=function(){this._name=\"RendererStartingState\"},a.RendererStartingState.prototype=new a.RendererState,a.RendererStartingState.prototype.constructor=a.RendererStartingState,a.RendererStartingState.instance=new a.RendererStartingState,a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted(e){a.debug(`${this._name} notifyStarted()`),e.setRendererState(a.RendererStartedState.instance),e.getAdInstance().play()},stop(e){a.debug(`${this._name} stop()`),\"function\"==typeof e.getRenderer().stop&&(e.setRendererState(a.RendererCompletingState.instance),e.getRenderer().stop())}}),a.RendererStartedState=function(){this._name=\"RendererStartedState\"},a.RendererStartedState.prototype=new a.RendererState,a.RendererStartedState.prototype.constructor=a.RendererStartedState,a.RendererStartedState.instance=new a.RendererStartedState,a.Util.mixin(a.RendererStartedState.prototype,{complete(e){a.debug(`${this._name} complete()`),e.setRendererState(a.RendererCompletingState.instance)},stop(e){a.debug(`${this._name} stop()`),\"function\"==typeof e.getRenderer().stop&&(e.setRendererState(a.RendererCompletingState.instance),!1===e.getRenderer().stop()&&e.getAdInstance().fakeComplete())}}),a.RendererCompletingState=function(){this._name=\"RendererCompletingState\"},a.RendererCompletingState.prototype=new a.RendererState,a.RendererCompletingState.prototype.constructor=a.RendererCompletingState,a.RendererCompletingState.instance=new a.RendererCompletingState,a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted(e){a.debug(`${this._name} notifyCompleted()`),e.setRendererState(a.RendererCompletedState.instance),e.getAdInstance().complete()}}),a.RendererCompletedState=function(){this._name=\"RendererCompletedState\"},a.RendererCompletedState.prototype=new a.RendererState,a.RendererCompletedState.prototype.constructor=a.RendererCompletedState,a.RendererCompletedState.instance=new a.RendererCompletedState,a.RendererFailedState=function(){this._name=\"RendererFailedState\"},a.RendererFailedState.prototype=new a.RendererState,a.RendererFailedState.prototype.constructor=a.RendererFailedState,a.RendererFailedState.instance=new a.RendererFailedState,a.HTMLRenderer=function(){this._rendererController=null},a.HTMLRenderer.prototype={start(e){this._rendererController=e,this._rendererController.getAdInstance().getSlot().getBase()?this._setupParameters()&&(this._render(),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)):this._onRendererFailed(a.ERROR_INVALID_SLOT,\"slot base is empty\")},pause(){this.log(\"pause\"),this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume(){this.log(\"resume\"),this.shouldEndAfterDuration&&this.timer&&this.timer.start()},stop(){return this.log(`stop isMRAIDAd:${this.isMRAIDAd} tpc:${this._tpc} interstitial:${this.shouldKeepInterstitial}`),this._stop()},_stop(){if(this.log(`_stop isMRAIDAd:${this.isMRAIDAd} tpc:${this._tpc} interstitial:${this.shouldKeepInterstitial}`),!this.isMRAIDAd&&this._tpc===a.TIME_POSITION_CLASS_DISPLAY&&!this.shouldKeepInterstitial)return!1;this._cleanup(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},resize(){let e=this._rendererController.getAdInstance(),t=e.getSlot().getBase();e.getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?!this.isMRAIDAd||this.isMRAIDAd&&this.mraid.state===this.mraid.STATEDEFAULT?(e=`_fw_ad_container_html_${e.getSlot().getCustomId()}_`,(e=document.getElementById(e)).style.width=t.style.width||\"100%\",e.style.height=t.style.height||\"100%\",this._layoutOverlayAd(this.defaultAdElement)):this.log(\"Cannot resize an MRAID ad that is not in the default state\"):this.log(\"Cannot resize a non-overlay ad\")},_cleanup(){if(this.log(\"_cleanup\"),this.timer&&(this.timer.stop(),this.timer=null),this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),window.removeEventListener?(document.removeEventListener(\"touchmove\",this.touchMoveDisabler,!1),window.removeEventListener(\"message\",this.messageHandlerFunc,!1),window.removeEventListener(\"resize\",this.viewportChangeFunc,!1),window.removeEventListener(\"scroll\",this.viewportChangeFunc,!1)):window.detachEvent&&(window.detachEvent(\"onmessage\",this.messageHandlerFunc),window.detachEvent(\"onresize\",this.viewportChangeFunc),window.detachEvent(\"onscroll\",this.viewportChangeFunc)),this.isMRAIDAd&&(this.mraid.inExpandedState()&&(this.log(\"stopping with expanded state, invoke close()\"),this._mraidClose()),this.mraid.inDefaultState()))return this.log(\"stopping with default state, invoke close()\"),void this._mraidClose();if(this.expandedAdElement){var e=this.expandedAdElement.parentNode;this.expandedAdElement._fw_closeButton&&e.removeChild(this.expandedAdElement._fw_closeButton),e.removeChild(this.expandedAdElement),this.expandedAdElement===this.defaultAdElement&&(this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null),this.expandedAdElement=null}if(this.expandedLightbox&&((e=this.expandedLightbox.parentNode).removeChild(this.expandedLightbox),this.expandedLightbox=null),this.defaultAdElement){e=this.defaultAdElement.parentNode;const t=this.defaultAdElement;t.style.display=\"none\",e!==this._rendererController.getAdInstance().getSlot().getBase()&&window.setTimeout(function(){for(let i=e&&e.childNodes||[],n=0;n<i.length;n++){const s=i[n];s===t&&e.removeChild(s)}},200),this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null}this.defaultAdElementContainer&&((e=this.defaultAdElementContainer.parentNode).removeChild(this.defaultAdElementContainer),this.defaultAdElementContainer=null),(this.shouldPauseContentWhenStart||this.isInterstitialNow&&!this.isMRAIDAd)&&this._rendererController.requestContentStateChange(!1)},_setupParameters(){let e=this._rendererController.getAdInstance(),t=e.getSlot().getTimePositionClass();this._tpc=t;let i,n=e.getActiveCreativeRendition();if(e=n.getBaseUnit(),n=n.getCreativeApi(),a.PLATFORM_NOT_SUPPORT_OVERLAY_AD&&t===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,\"Overlay not supported on this device.\"),!1;if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&(t===a.TIME_POSITION_CLASS_MIDROLL||t===a.TIME_POSITION_CLASS_PAUSE_MIDROLL))return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,\"Midroll, pause_midroll not supported on this device.\"),!1;if(a.PLATFORM_IS_IPHONE_IPOD)switch(t){case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_OVERLAY:return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,\"Midroll, pause_midroll and overlay ads are not supported on iPod, iPhone.\"),!1;case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF)}if(this.adLoadTimeout=5,(i=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT))&&(this.adLoadTimeout=Number(i)>0?Number(i):this.adLoadTimeout),this.shouldKeepInterstitial=!1,(i=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE))?this.shouldKeepInterstitial=i===a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL:\"string\"==typeof e&&(this.shouldKeepInterstitial=e.toLowerCase()===a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL),this.isInterstitialNow=this.shouldKeepInterstitial,this.shouldPauseContentWhenStart=!1,this.shouldPauseContentWhenExpandOrClick=!this.shouldKeepInterstitial&&(t===a.TIME_POSITION_CLASS_DISPLAY||t===a.TIME_POSITION_CLASS_OVERLAY),this.shouldBackgroundTransparent=!1,void 0!==(i=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT))&&null!=i&&(this.shouldBackgroundTransparent=a.Util.str2bool(i)),this.shouldEndAfterDuration=t!==a.TIME_POSITION_CLASS_DISPLAY||this.shouldKeepInterstitial,void 0!==(i=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION))&&null!=i&&(this.shouldEndAfterDuration=a.Util.str2bool(i)),this.coadScriptName=this._rendererController.getParameter(a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME),this.coadScriptName||(this.coadScriptName=this._rendererController.getParameter(\"coad_script_name\")),this.primaryAnchor=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR)||\"bc\",this.marginWidth=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH)||0,this.marginHeight=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT)||0,this.bootstrap=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_BOOTSTRAP),e=a.Util.getViewport(),this.defaultExpandWidth=e.width,this.defaultExpandHeight=e.height,this.isMRAIDAd=\"MRAID-1.0\"===n,this.mraid=new function(e){this.STATELOADING=\"loading\",this.STATEDEFAULT=\"default\",this.STATEEXPANDED=\"expanded\",this.STATEHIDDEN=\"hidden\",this._renderer=e,this._state=this.STATELOADING,this._useCustomClose=!1,this.viewable=this.expandIsModal=!0,this._baseUrlExpanded=this._baseUrlDefault=\"\",(e=Object.defineProperty||function(e,t,i){i.get&&e.__defineGetter__(t,i.get),i.set&&e.__defineSetter__(t,i.set)})(this,\"baseUrl\",{get(){return this.inExpandedState()&&this._baseUrlExpanded||this._baseUrlDefault},set(e){this.inExpandedState()?this._baseUrlExpanded=e:(this._baseUrlDefault=e,this._baseUrlExpanded=\"\")}}),e(this,\"useCustomClose\",{get(){return this._useCustomClose},set(e){this._useCustomClose===!e&&(this._useCustomClose=!!e,this.pushData())}}),e(this,\"placementType\",{get(){return this._renderer.shouldKeepInterstitial?\"interstitial\":\"inline\"}}),e(this,\"expandWidth\",{get(){return this._renderer.requestedExpandWidth&&this._renderer.requestedExpandWidth<this._renderer.defaultExpandWidth?this._renderer.requestedExpandWidth:this._renderer.defaultExpandWidth}}),e(this,\"expandHeight\",{get(){return this._renderer.requestedExpandHeight&&this._renderer.requestedExpandHeight<this._renderer.defaultExpandHeight?this._renderer.requestedExpandHeight:this._renderer.defaultExpandHeight}}),e(this,\"state\",{get(){return this._state},set(e){this.log(`mraid.state change ${this.state} => ${e}`),this.state!==e&&(this._renderer.shouldPauseContentWhenExpandOrClick&&(e===this.STATEEXPANDED?this._renderer._rendererController.requestContentStateChange(!0):this.inExpandedState()&&this._renderer._rendererController.requestContentStateChange(!1)),e===this.STATEEXPANDED?(this._renderer.expandedAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION}):(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer._rendererController.processEvent({name:a.EVENT_AD_EXPAND})),this._renderer.presentInterstitial(),this._renderer.shouldEndAfterDuration&&this._renderer.timer.pause()):e===this.STATEDEFAULT&&(this._renderer.shouldKeepInterstitial?(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.presentInterstitial()):(this.inExpandedState()&&(this._renderer.expandedAdElement!==this._renderer.defaultAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_CLOSE}):this._renderer._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})),this._renderer.expandedAdElement=null,this._renderer.presentInline()),this._renderer.shouldEndAfterDuration&&this._renderer.timer.start()),this._state=e,this.pushData(),e===this.STATEHIDDEN&&this._renderer.stop())}}),this.inLoadingState=function(){return this.state===this.STATELOADING},this.inDefaultState=function(){return this.state===this.STATEDEFAULT},this.inExpandedState=function(){return this.state===this.STATEEXPANDED},this.inHiddenState=function(){return this.state===this.STATEHIDDEN},this.pushData=function(){const e=`mraid._Update(\"${this.state}\", ${this.viewable}, \"${this.placementType}\", ${this.expandWidth}, ${this.expandHeight}, ${this.useCustomClose}, ${this.expandIsModal})`;this.log(`mraid.pushData: going to invoke on iframe with ${e}`),this._renderer.defaultAdElement?(this._renderer.defaultAdElement.contentWindow.postMessage(`fwsdk-bounce:${e}`,\"*\"),this._renderer.expandedAdElement&&this._renderer.expandedAdElement!==this._renderer.defaultAdElement&&this._renderer.expandedAdElement.contentWindow.postMessage(`fwsdk-bounce:${e}`,\"*\")):this.warn(`_mraidPushData: no iframe suitable to send ${e}`)},this.log=function(e){this._renderer.log(e)},this.warn=function(e){this._renderer.warn(e)}}(this),this.onLoadFunc=a.Util.bind(this,function(){this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),this.timer&&this.shouldEndAfterDuration&&this.timer.start()}),this.touchMoveDisabler=function(e){e.preventDefault()},this.log(`setting parameters, adLoadTimeout: ${this.adLoadTimeout}, isMRAIDAd: ${this.isMRAIDAd}, shouldKeepInterstitial: ${this.shouldKeepInterstitial}, shouldEndAfterDuration: ${this.shouldEndAfterDuration}, shouldPauseContentWhenStart: ${this.shouldPauseContentWhenStart}, shouldPauseContentWhenExpandOrClick: ${this.shouldPauseContentWhenExpandOrClick}, shouldBackgroundTransparent: ${this.shouldBackgroundTransparent}, defaultExpandWidth: ${this.defaultExpandWidth}, defaultExpandHeight: ${this.defaultExpandHeight}, coadScriptName: ${this.coadScriptName}, primaryAnchor: ${this.primaryAnchor}, marginWidth: ${this.marginWidth}, marginHeight: ${this.marginHeight}, bootstrap: ${this.bootstrap}`),this.shouldKeepInterstitial){if(t===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_INVALID_SLOT,\"Interstitial ad is not supported in overlay slot.\"),!1}else!this.isMRAIDAd||a.PLATFORM_IS_IPHONE_IPOD&&t!==a.TIME_POSITION_CLASS_DISPLAY||(this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_COLLAPSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON));return!0},_render(){this.log(\"_render\");let b=this._rendererController.getAdInstance(),c=b.getSlot(),d=c.getTimePositionClass(),e=c.getBase(),f=b.getActiveCreativeRendition(),g=f.getDuration(),h=f.getPrimaryCreativeRenditionAsset();b=h.getUrl();const k=h.getContent();if(d===a.TIME_POSITION_CLASS_DISPLAY&&(e.innerHTML=\"\"),this.timer=new a.Timer(g,a.Util.bind(this,this._stop)),this.coadScriptName&&\"function\"==typeof window[this.coadScriptName])this.defaultAdElement=window[this.coadScriptName](k,b,f.getHeight(),f.getWidth(),h.getMimeType(),c.getCustomId()),this.timer&&this.shouldEndAfterDuration&&this.timer.start();else{if(g=document.createElement(\"span\"),g.id=`_fw_ad_container_html_${c.getCustomId()}_`,g.style.position=\"relative\"===e.style.position?\"absolute\":\"relative\",g.style.display=\"inline-block\",g.style.margin=\"0px\",g.style.padding=\"0px\",g.style.width=e.style.width||\"100%\",g.style.height=e.style.height||\"100%\",g.style.top=g.style.left=\"0px\",e.appendChild(g),this.defaultAdElementContainer=g,!b&&!k)return this._onRendererFailed(a.ERROR_NULL_ASSET,\"Empty URL and empty content\"),void this._stop();if(\"text/html_lit_nowrapper\"===f.getContentType()||\"text/html_lit_js_wc_nw\"===f.getContentType()){if(this.isMRAIDAd||this.isInterstitialNow)return this._onRendererFailed(a.ERROR_INVALID_VALUE,\"\"),void this._stop();if(!k)return this._onRendererFailed(a.ERROR_NULL_ASSET,\"Empty content\"),void this._stop();this.defaultAdElement=g,this.defaultAdElement.innerHTML=k,c=this.defaultAdElement.getElementsByTagName(\"script\");const l=document.getElementsByTagName(\"head\")[0];for(e=0;e<c.length;++e)if(c[e].src){var p=document.createElement(\"script\");p.src=c[e].src,c[e].charset&&(p.charset=c[e].charset),c[e].innerHTML&&(p.innerHTML=c[e].innerHTML),p.onload=p.onreadystatechange=function(){this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||l.removeChild(p)},l.appendChild(p)}else p=c[e].innerHTML,eval(p);return this.presentInline(),void this.onLoadFunc()}f=document.createElement(\"iframe\"),f.id=`_fw_ad_container_iframe_${c.getCustomId()}_${Math.random()}`,f.attachEvent?f.attachEvent(\"onload\",this.onLoadFunc):f.onload=this.onLoadFunc,this.defaultAdElement=f,this.defaultAdElementContainer.appendChild(f),this._fillAdNode(f,b,k),this.isMRAIDAd&&(this.adLoadTimeoutTimer=new a.Timer(this.adLoadTimeout,a.Util.bind(this,function(){this._onRendererFailed(a.ERROR_TIMEOUT,\"Loading MRAID Ad timed out\"),d!==a.TIME_POSITION_CLASS_DISPLAY&&this.isMRAIDAd&&!this.mraid.inLoadingState()?this._mraidClose():this._stop()})),this.adLoadTimeoutTimer.start())}this.defaultAdElement||(c=e.getElementsByTagName(\"iframe\"))&&c.length>0&&(this.defaultAdElement=c[c.length-1]),this.defaultAdElement?(this.defaultAdElement.frameBorder=\"0\",this.shouldBackgroundTransparent&&(this.defaultAdElement.allowTransparency=\"true\",this.defaultAdElement.style[\"background-color\"]=\"rgba(255,255,255,0)\"),this.isInterstitialNow?(this.expandedAdElement=this.defaultAdElement,this.presentInterstitial()):this.presentInline(),this.messageHandlerFunc=a.Util.bind(this,this._onWindowMessageReceived),this.viewportChangeFunc=a.Util.bind(this,function(){this.viewportChangeFuncTimer&&window.clearTimeout(this.viewportChangeFuncTimer),this.viewportChangeFuncTimer=window.setTimeout(a.Util.bind(this,this._onViewportResizeScroll),200)}),window.addEventListener?(window.addEventListener(\"message\",this.messageHandlerFunc,!1),window.addEventListener(\"resize\",this.viewportChangeFunc,!1),window.addEventListener(\"scroll\",this.viewportChangeFunc,!1)):window.attachEvent&&(window.attachEvent(\"onmessage\",this.messageHandlerFunc),window.attachEvent(\"onresize\",this.viewportChangeFunc),window.attachEvent(\"onscroll\",this.viewportChangeFunc))):this.isMRAIDAd&&(this._onRendererFailed(a.ERROR_UNKNOWN,\"Failed to find iframe in slotBase for MRAID ad\"),this._stop())},_layoutOverlayAd(e){this.log(\"_layoutOverlayAd\");let t=this._rendererController.getAdInstance(),i=t.getSlot(),n=i.getVideoDisplaySize().width;i=i.getVideoDisplaySize().height;let s=t.getActiveCreativeRendition();switch(t=s.getWidth()||240,s=s.getHeight()||50,e.style.width=`${Math.min(t,n)}px`,e.style.height=`${Math.min(s,i)}px`,e.style.left=e.style.top=e.style.right=e.style.bottom=\"\",this.primaryAnchor){case\"tl\":case\"lt\":e.style.top=`${this.marginHeight}px`,e.style.left=`${this.marginWidth}px`;break;case\"tr\":case\"rt\":e.style.top=`${this.marginHeight}px`,e.style.right=`${this.marginWidth}px`;break;case\"bl\":case\"lb\":e.style.bottom=`${this.marginHeight}px`,e.style.left=`${this.marginWidth}px`;break;case\"br\":case\"rb\":e.style.bottom=`${this.marginHeight}px`,e.style.right=`${this.marginWidth}px`;break;case\"tc\":case\"ct\":e.style.top=`${this.marginHeight}px`,e.style.left=`${.5*Math.max(0,n-t)}px`;break;case\"lm\":case\"ml\":e.style.left=`${this.marginWidth}px`,e.style.top=`${.5*Math.max(0,i-s)}px`;break;case\"rm\":case\"mr\":e.style.right=`${this.marginWidth}px`,e.style.top=`${.5*Math.max(0,i-s)}px`;break;case\"mc\":case\"cm\":case\"c\":case\"m\":e.style.left=`${.5*Math.max(0,n-t)}px`,e.style.top=`${.5*Math.max(0,i-s)}px`;break;default:case\"bc\":case\"cb\":e.style.bottom=`${this.marginHeight}px`,e.style.left=`${.5*Math.max(0,n-t)}px`}},_fillAdNode(e,t,i){if(this.log(`_fillAdNode, url:${t}, content:${i?\"<omited>\":\"<empty>\"}`),t)e.src=t;else{if(!i)return this._onRendererFailed(a.ERROR_NULL_ASSET,\"Empty URL and content\"),!1;(e=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument).open(),e.write(i),e.close()}return!0},presentInline(){this.log(\"presentInline\"),this.isInterstitialNow=!1;const e=this.defaultAdElement;if(e){let t=this._rendererController.getAdInstance(),i=t.getSlot(),n=i.getTimePositionClass(),s=i.getWidth(),r=i.getHeight(),o=i.getVideoDisplaySize().width;i=i.getVideoDisplaySize().height;let l=t.getActiveCreativeRendition();switch(t=l.getWidth(),l=l.getHeight(),e.scrolling=\"no\",e.style.overflow=\"hidden\",n){case a.TIME_POSITION_CLASS_DISPLAY:e.style.position=\"\",e.style.background=this.shouldBackgroundTransparent?\"transparent\":\"\",e.style.left=\"0px\",e.style.top=\"0px\",e.style.width=`${t||s}px`,e.style.height=`${l||r}px`;break;case a.TIME_POSITION_CLASS_OVERLAY:e.style.position=\"absolute\",e.style.background=this.shouldBackgroundTransparent?\"transparent\":\"white\",this._layoutOverlayAd(e);break;default:e.style.position=\"absolute\",e.style.background=this.shouldBackgroundTransparent?\"transparent\":\"white\",e.style.left=\"0px\",e.style.top=\"0px\",e.style.width=`${o}px`,e.style.height=`${i}px`}}},presentInterstitial(){if(this.log(`presentInterstitial, defaultExpandWidth: ${this.defaultExpandWidth}, defaultExpandHeight: ${this.defaultExpandHeight}, this.mraid.expandWidth: ${this.mraid.expandWidth}, this.mraid.expandHeight: ${this.mraid.expandHeight}, (Math.max(0, this.defaultExpandWidth - this.mraid.expandWidth) / 2) = ${Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2}, (Math.max(0, this.defaultExpandHeight - this.mraid.expandHeight) / 2) = ${Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2}`),this.expandedAdElement){this.isInterstitialNow=!0,document.addEventListener&&(document.removeEventListener(\"touchmove\",this.touchMoveDisabler,!1),document.addEventListener(\"touchmove\",this.touchMoveDisabler,!1));const e=this.expandedAdElement.parentNode;if(this.expandedLightbox||(this.expandedLightbox=document.createElement(\"div\"),this.expandedLightbox.style.background=\"black\",this.expandedLightbox.style.opacity=.8,this.expandedLightbox.style.position=\"fixed\",this.expandedLightbox.style.top=\"0px\",this.expandedLightbox.style.left=\"0px\",this.expandedLightbox.style.zIndex=this.expandedLightbox.style[\"z-index\"]=9999,e.appendChild(this.expandedLightbox)),this.expandedLightbox.style.width=`${this.defaultExpandWidth}px`,this.expandedLightbox.style.height=`${this.defaultExpandHeight}px`,this.expandedAdElement.frameBorder=\"0\",this.expandedAdElement.scrolling=\"no\",this.expandedAdElement.style.position=\"fixed\",this.expandedAdElement.style.overflow=\"hidden\",this.expandedAdElement.style.top=this.expandedAdElement.top=`${Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2}px`,this.expandedAdElement.style.left=this.expandedAdElement.left=`${Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2}px`,this.expandedAdElement.style.width=this.expandedAdElement.width=`${this.mraid.expandWidth}px`,this.expandedAdElement.style.height=this.expandedAdElement.height=`${this.mraid.expandHeight}px`,this.expandedAdElement.style.zIndex=this.expandedAdElement.style[\"z-index\"]=1e4,this.log(`presentInterstitial, expanded ad element size: (top, left, width, height) = (${this.expandedAdElement.top}, ${this.expandedAdElement.left}, ${this.expandedAdElement.width}, ${this.expandedAdElement.height})`),this.isMRAIDAd){let t=this.expandedAdElement._fw_closeButton;t||((t=document.createElement(\"div\")).addEventListener?t.addEventListener(\"click\",a.Util.bind(this,function(){this._mraidClose()})):t.attachEvent&&t.attachEvent(\"onclick\",a.Util.bind(this,function(){this._mraidClose()})),t.style.position=\"fixed\",t.style.margin=\"0px\",t.style.padding=\"0px\",t.style.width=\"25px\",t.style.height=\"25px\",t.style.zIndex=t.style[\"z-index\"]=10001,e.appendChild(t),this.expandedAdElement._fw_closeButton=t),t.style.top=this.expandedAdElement.style.top,t.style.left=`${Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+this.mraid.expandWidth-25}px`,t.innerHTML=this.mraid.useCustomClose?a.PLATFORM_ANDROID_VERSION>0?\"   \":\"\":a.PLATFORM_ANDROID_VERSION>0&&a.PLATFORM_ANDROID_VERSION<=3?'<img style=\"width:25px; height:25px; border:0\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xJREFUeNrMmjFv2kAUxw/IUAZUw4AqJjIxMAQJ9sIHgDYLUqfSBTowJBudAmOnNCNeAitLyVgxxNlBgk+QTKgb6UQHhr7nniNj8PmM3zk86XQZOPt+ee/e+9+dI4zQms1mGTpsb6EVXH42h/YHmqHrukH17kjAiWvQfYT2gfeH2BjaHfYA9hwqCABkobvik9eI/qkIMYB2A0BPSkG4By44hErrQfvhx0MRn/F/Cy3LwjH0yhfZdRSThOhyCI2FZ/iuRrFYjMxmMyMwCEDc8nB6LSsDTBZg7g4GAYj7ANmI0gpeMDEPTxwDhBRMzAXiGrqv7PgMYTSA+eWZtQACvfCTHbedQzYbu4LwOvHolp3q9TorlUpsuVyyfr/P1us16ezi8TirVqtmP5lMzPcIiuepvc5EHT+4doPIZDImhPV3q9UyX0hl+MxOp2O+I5/Ps1qt5pWat4py1CE7Gm4jnf99Sph9z5Lw9gWf845HhLJjtVqx0WhEDuMGgaElYVdbWYuTDbxGYcwiELreskQiwXK5HFssFmyz2ZBA4PoTrA9nFhtCFnu2PCJdL6bTKYlnCCCYfe4WyGc/I4PCEEK8zD3Cw+rxkPjGDIMp2Rl+otRMDGHZaZRvTQ8yv55RBGEKSwQ5C/IEWRiFEGhnMVj1naCbJa9slk6nVUKg/T2h2iyhZywZ4/RCMplUCWFW+hPBsQ0ZjFMhEEOY9SRKLUv3rRnFEHtFI4nhRPelX1xH2FQYOYjf9EsJ8qQSQqVqth8dkYGI6oQK1awExKvYUQlNL5CFSghq1exiCwQxVEOEAGPEYFPyG2QKniS+CWNTRL05w7DSdf2blX7HYe7siD0ztteRm7B3doQww5c9Ow+vspcKRvHXbrfJBCBBmOH13XdnZe95jcKzJmoVK/KMhPV2JAq/UDG8TgJVCEA3GAlvGG5a61JGpmM4UKtYJ4zEs7fmuu8Qu8vU3xEK12EqlXJV0FZIgTe6QhAOcx/kUEKxYUhVZGX8Oft/sX9sNudz2zHXW13wCm6B71m4F6AiwyuECnhj7mtjxQdUKPcrQdStCELoEZtnNO6ZwiuGU8Xr4wE/HwzgJVDY19T49cOlzA9jsk/EC0iQMQ/cM+9C8MIngOjLDjj0o5oGrzVZBWsBa8TA78Cgnznh3QQe6we9j0cpPnTe1IYG4kgIZR5273mvCdIohg6G6TzI5O32T4ABAPsBS28k7apdAAAAAElFTkSuQmCC\">':'<img style=\"width:25px; height:25px; border:0\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48Y2lyY2xlIGZpbGw9IiM2NjY2NjYiIGN4PSIyMDAuMTM5IiBjeT0iMTk5Ljg2IiByPSIxOTcuODYiLz48cGF0aCBmaWxsPSIjRjBGMEYwIiBzdHJva2U9IiNGMEYwRjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTExNC44NjUsMzAzLjY0NGMtNi4yMjYsNi4yMjctMTUuMzYzLDcuMTg2LTIwLjQwNywyLjE0NGwtMC41MjItMC41MjJjLTUuMDQzLTUuMDQzLTQuMDgzLTE0LjE4LDIuMTQ0LTIwLjQwN0wyODQuODYsOTYuMDc4YzYuMjI2LTYuMjI3LDE1LjM2Mi03LjE4NiwyMC40MDUtMi4xNDRsMC41MjIsMC41MjFjNS4wNDMsNS4wNDIsNC4wODMsMTQuMTc5LTIuMTQ0LDIwLjQwOEwxMTQuODY1LDMwMy42NDR6Ii8+PHBhdGggZmlsbD0iI0YwRjBGMCIgc3Ryb2tlPSIjRjBGMEYwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zMDcuODE5LDI4OC42NjZjNS4xNTMsNS4xNTgsNS4wNDgsMTMuNjI0LTAuMjQxLDE4LjkxMWwwLDBjLTUuMjg4LDUuMjg5LTEzLjc1Miw1LjM5My0xOC45MDksMC4yNEw5MS45MDYsMTExLjA1NWMtNS4xNTYtNS4xNTYtNS4wNDgtMTMuNjIzLDAuMjQtMTguOTFsMCwwYzUuMjktNS4yODksMTMuNzU1LTUuMzk2LDE4LjkxMS0wLjI0MUwzMDcuODE5LDI4OC42NjZ6Ii8+PC9zdmc+\">'}this.isMRAIDAd||this._rendererController.requestContentStateChange(!0)}},_onWindowMessageReceived(e){if(this.defaultAdElement&&(e.source===this.defaultAdElement.contentWindow||this.expandedAdElement&&e.source===this.expandedAdElement.contentWindow)){this.log(`_onWindowMessageReceived, event.data:${e.data}, event.origin:${e.origin}`);let t=e.data.toString().split(\":\");if(t&&t.length>=2&&\"fwsdk-invoke\"===t[0]){const i=t[1];if((t=t.slice(2))&&t.length>0){for(let e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);1===t.length&&(t=t[0])}else t=null;\"iframe_ready\"===i?(this.onLoadFunc&&e.source===this.defaultAdElement.contentWindow&&this.defaultAdElement!==this.expandedAdElement&&this.onLoadFunc(),t&&(t=a.Util.trim(t))&&this.isMRAIDAd&&(this.mraid.baseUrl=t),this.bootstrap&&e.source.postMessage(`fwsdk-bounce:${this.bootstrap}`,e.origin),e.source.postMessage('fwsdk-bounce:mraid._messagingModel = \"postMessage\"',e.origin),this.isMRAIDAd&&(e.source===this.defaultAdElement.contentWindow&&this.shouldPauseContentWhenStart&&this._rendererController.requestContentStateChange(!0),this.mraid.inLoadingState()?this.mraid.state=this.mraid.STATEDEFAULT:this.expandedAdElement&&e.source===this.expandedAdElement.contentWindow&&this.mraid.pushData())):this.isMRAIDAd?this._mraidMethods(i,t):\"close\"===i&&this._stop()}}},_mraidMethods(e,t){if(e&&this.isMRAIDAd)switch(this.log(`_mraidMethods(${e}, ${t})`),e){case\"open\":\"string\"==typeof t?this._mraidOpen(t):t.length>=2&&this._mraidOpen(t[0],a.Util.str2bool(t[1]));break;case\"close\":this._mraidClose();break;case\"expand\":this._mraidExpand(t);break;case\"useCustomClose\":t&&t.length>0?this.mraid.useCustomClose=a.Util.str2bool(t):this.warn(\"Invalid parameter to useCustomClose\");break;case\"setExpandProperties\":if(!t)break;this.requestedExpandWidth=Number(t[0]),this.requestedExpandHeight=Number(t[1]),this.requestedExpandWidth&&this.requestedExpandHeight&&(this.requestedExpandWidth!==this.defaultExpandWidth||this.requestedExpandHeight!==this.defaultExpandHeight)||(this.requestedExpandHeight=this.requestedExpandWidth=0),this.mraid.useCustomClose=a.Util.str2bool(t[2]),this.requestedExpandWidth===this.mraid.expandWidth&&this.requestedExpandHeight===this.mraid.expandHeight||this.mraid.pushData();break;case\"log\":this.log(`MRAID log:${t}`);break;default:this.warn(`Unknown MRAID function call: ${e} with param:${t}`)}},_mraidOpen(e,t){this.log(`_mraidOpen(${e}), baseUrl:${this.mraid.baseUrl}, absolute Url${e=a.Util.getAbsoluteUrl(this.mraid.baseUrl,e)}`),e&&\"string\"==typeof e&&e.length>0?((t||void 0===t)&&window.open(e),this._rendererController.processEvent({name:a.EVENT_AD_CLICK,info:{showBrowser:!1,url:e}})):this.warn(\"_mraidOpen: url required for open\")},_mraidClose(){if(this.log(`_mraidClose, current state: ${this.mraid.state}`),this.mraid.inExpandedState()){window.removeEventListener&&document.removeEventListener(\"touchmove\",this.touchMoveDisabler,!1);let e=this.expandedAdElement,t=this.expandedAdElement._fw_closeButton;this.expandedAdElement._fw_closeButton=null;const i=this.expandedAdElement.parentNode;this.mraid.state=this.mraid.STATEDEFAULT,this.expandedLightbox&&(i.removeChild(this.expandedLightbox),this.expandedLightbox=null),e!==this.defaultAdElement&&(e.style.display=\"hidden\",window.setTimeout(function(){i.removeChild(e)},50)),i.removeChild(t)}else this.mraid.inDefaultState()?this.mraid.state=this.mraid.STATEHIDDEN:this.warn(\"_mraidClose: close() is only valid when in expanded/default state\")},_mraidExpand(e){if(this.log(`_mraidExpand, current state: ${this.mraid.state}`),this.mraid.inDefaultState())if(this.shouldKeepInterstitial)this.warn(\"_mraidExpand: expand() is only valid for inline ad\");else{if(e){let t=document.createElement(\"iframe\"),i=a.Util.getAbsoluteUrl(this.mraid.baseUrl,e);this.shouldBackgroundTransparent&&(t.allowTransparency=\"true\",t.style[\"background-color\"]=\"rgba(255,255,255,0)\"),(this.defaultAdElementContainer||this.defaultAdElement.parentNode).appendChild(t),this.expandedAdElement=t,this.log(`_mraidExpand(${e}), baseUrl:${this.mraid.baseUrl}, absolute Url${i}`),this._fillAdNode(t,i,null)}this.mraid.state=this.mraid.STATEEXPANDED,this.isInterstitialNow=!0,this._onViewportResizeScroll()}else this.warn(\"_mraidExpand: expand() is only valid when in default state\")},_onViewportResizeScroll(){const e=a.Util.getViewport();this.defaultExpandWidth=e.width,this.defaultExpandHeight=e.height,this.isInterstitialNow&&this.presentInterstitial()},log(e){const t=this._rendererController.getAdInstance().getSlot();a.log(`HTMLRenderer[${t}]\\t${e}`)},warn(e){const t=this._rendererController.getAdInstance().getSlot();a.warn(`HTMLRenderer[${t}]\\t${e}`)},info:()=>({moduleType:a.MODULE_TYPE_RENDERER}),getPlayheadTime(){return this.timer?this.timer.getPlayheadTime():-1},getDuration(){return this.timer?this.timer.getDuration():-1},_onRendererFailed(e,t,i){const n={};n[a.INFO_KEY_ERROR_MODULE]=\"HTMLRenderer\",n[a.INFO_KEY_ERROR_CODE]=e,this._rendererController.getAdInstance().getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?i||(i=a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR):this._rendererController.getAdInstance().getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY||i||(i=a.ERROR_VAST_COMPANION_GENERAL_ERROR),i&&(n[a.INFO_KEY_VAST_ERROR_CODE]=i),t&&(n[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,n)}},a.HTMLRenderer.prototype.constructor=a.HTMLRenderer,a.Ad=function(){this._id=null,this._creatives=[],this._noLoad=!1,this._soAdUnit=null,this._isRequiredToShow=!1},a.Ad.prototype={isRequiredToShow(){return this._isRequiredToShow},parse(e){if(e){this._id=e.adId||null,this._noLoad=e.noLoad,this._soAdUnit=e.adUnit,e.hasOwnProperty(\"required\")&&(this._isRequiredToShow=e.required);let t=0;for(e=e.creatives||[];t<e.length;t++){let i=e[t],n=new a.Creative;n.parse(i),this._creatives.push(n)}}},getSoAdUnit(){return this._soAdUnit},getId(){return this._id},getNoLoad(){return this._noLoad},getCreative(e){for(let t=0;t<this._creatives.length;t++)if(this._creatives[t].getId()===e)return this._creatives[t];return null},addCreativeRendition(){const e=new a.Creative;return this._creatives.push(e),e}},a.Ad.prototype.constructor=a.Ad,a.Creative=function(){this._duration=this._baseUnit=this._id=null,this._parameters={},this._creativeRenditions=[]},a.Creative.prototype={getId(){return this._id},getBaseUnit(){return this._baseUnit},getDuration(){return this._duration},getParameter(e){return this._parameters[e]},setParameter(e,t){null==t?delete this._parameters[e]:this._parameters[e]=t},parse(e){if(e){if(this._id=e.creativeId||null,this._baseUnit=e.baseUnit||null,this._duration=1*e.duration,e.parameters)if(e.parameters.constructor===Array)for(var t=0,i=e.parameters||[];t<i.length;t++){var n=i[t];this._parameters[n.name]=n.value}else\"object\"==typeof e.parameters&&(this._parameters=a.Util.copy(e.parameters));for(t=0,i=e.creativeRenditions||[];t<i.length;t++){n=i[t],(e=new a.CreativeRendition).parse(n),e.setDuration(this._duration),e.setBaseUnit(this._baseUnit);for(const t in this._parameters)this._parameters.hasOwnProperty(t)&&e.setParameter(t,this._parameters[t]);this._creativeRenditions.push(e)}}},getAllCreativeRenditions(){return this._creativeRenditions},addCreativeRendition(e){this._creativeRenditions.push(e)},getEligibleCreativeRenditionsForAdInstance(e){let t,i=[],n=[];for(t=0;t<this._creativeRenditions.length;t++){const s=this._creativeRenditions[t];s.getId()===e._creativeRenditionId&&s.getReplicaId()===e._replicaId&&i.push(s),\"\"===s.getReplicaId()&&n.push(s)}return 0===i.length?n:i},cloneForTranslation(){const e=new a.Creative;return e.parse({creativeId:this._id,baseUnit:this._baseUnit,duration:this._duration,parameters:a.Util.copy(this._parameters)}),e}},a.Creative.prototype.constructor=a.Creative,a.CreativeRendition=function(){this._id=null,this._creativeApi=\"None\",this._baseUnit=null,this._replicaId=\"\",this._height=this._width=this._preference=this._wrapperUrl=this._wrapperType=this._contentType=null,this._parameters={},this._primaryCreativeRenditionAsset=null,this._otherCreativeRenditionAssets=[],this._universalAdId=this._duration=null},a.CreativeRendition.prototype={getId(){return this._id},getCreativeApi(){return this._creativeApi},setCreativeApi(e){this._creativeApi=e||\"None\"},getReplicaId(){return this._replicaId},getContentType(){return this._contentType?this._contentType:this._primaryCreativeRenditionAsset&&this._primaryCreativeRenditionAsset.getContentType()?this._primaryCreativeRenditionAsset.getContentType():null},setContentType(e){this._contentType=e},getWrapperType(){return this._wrapperType},setWrapperType(e){this._wrapperType=e},getWrapperUrl(){return this._wrapperUrl},setWrapperUrl(e){this._wrapperUrl=e},getBaseUnit(){return this._baseUnit},setBaseUnit(e){this._baseUnit=e},getPreference(){return this._preference},setPreference(e){this._preference=e},getWidth(){return this._width},setWidth(e){this._width=e},getHeight(){return this._height},setHeight(e){this._height=e},getDuration(){return this._duration},setDuration(e){this._duration=e},getParameter(e){return this._parameters[e]},setParameter(e,t){null==t?delete this._parameters[e]:this._parameters[e]=t},getUniversalAdId(){return this._universalAdId},setUniversalAdId(e){this._universalAdId=e},getPrimaryCreativeRenditionAsset(){return this._primaryCreativeRenditionAsset},getOtherCreativeRenditionAssets(){return this._otherCreativeRenditionAssets.slice()},addCreativeRenditionAsset(e,t){const i=new a.CreativeRenditionAsset;return i.setName(e),t?this._primaryCreativeRenditionAsset=i:this._otherCreativeRenditionAssets.push(i),i},parse(e){if(e){this._id=e.creativeRenditionId||null,this._creativeApi=e.creativeApi||\"None\",this._replicaId=e.hasOwnProperty(\"adReplicaId\")?e.adReplicaId:\"\",this._contentType=e.contentType||null,this._wrapperType=e.wrapperType||null,this._wrapperUrl=e.wrapperUrl||null,this._preference=1*e.preference,this._width=1*e.width,this._height=1*e.height;for(var t,i=0,n=e.parameters||[];i<n.length;i++)t=n[i],this._parameters[t.name]=t.value;for(this._primaryCreativeRenditionAsset=new a.CreativeRenditionAsset,this._primaryCreativeRenditionAsset.parse(e.asset),i=0,n=e.otherAssets||[];i<n.length;i++)t=n[i],(e=new a.CreativeRenditionAsset).parse(t),this._otherCreativeRenditionAssets.push(e)}}},a.CreativeRendition.prototype.constructor=a.CreativeRendition,a.CreativeRenditionAsset=function(){this._bytes=this._mimeType=this._contentType=this._content=this._url=this._name=this._id=null},a.CreativeRenditionAsset.prototype={getName(){return this._name},setName(e){this._name=e},getUrl(){return this._url},setUrl(e){this._url=e},getContent(){return this._content},setContent(e){this._content=e},getContentType(){return this._contentType},setContentType(e){this._contentType=e},getMimeType(){return this._mimeType},setMimeType(e){this._mimeType=e},getBytes(){return this._bytes},setBytes(e){this._bytes=e},parse(e){e&&(this._id=e.id||null,this._name=e.name||null,this._url=e.url||null,this._content=e.content||null,this._contentType=e.contentType||null,this._mimeType=e.mimeType||null,this._bytes=1*e.bytes)}},a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset,a.AdInstance=function(e){this._context=e,this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=null,this._replicaId=\"\",this._primaryCreativeRendition=this._creative=null,this._creativeRenditions=[],this._noLoad=!1,this._companionAdInstances=[],this._eventCallbacks=[],this._externalEventCallbackUrlsDictionary={},this._rendererController=new a.RendererController(e,this),this._timer=new a.Timer,this._metr=0,this._state=a.MediaInitState.instance,this._isStartSuccessfully=this._translated=this._isImpressionSent=this._isInitiatedSent=!1,this._lastDurationFromRenderer=-1,this._slotCustomId=this._parentAdInstancesGroup=null,this._isSkipped=!1,this._wrapperCount=0},a.AdInstance.prototype={},a.AdInstance.prototype.constructor=a.AdInstance,a.METR_MASK_QUARTILE=0,a.METR_MASK_MIDPOINT=1,a.METR_MASK_COMPLETE=2,a.METR_MASK_VOLUME=3,a.METR_MASK_SIZE=4,a.METR_MASK_CONTROL=5,a.METR_MASK_REWIND=6,a.METR_MASK_ACCEPT_INVITATION=7,a.METR_MASK_CLOSE=8,a.METR_MASK_MINIMIZE=9,a.METR_MASK_CLICK=10,a.AdInstance._metrDictionary={},a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND,a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION,a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE,a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE,a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK,a.Util.mixin(a.AdInstance.prototype,{getAdId(){return this._adId},getUniversalAdId(){return this.getActiveCreativeRendition()?this.getActiveCreativeRendition().getUniversalAdId():null},getSoAdUnit(){return this._soAdUnit},getEventCallbackUrls(e,t){let i=[],n=t===a.EVENT_TYPE_CLICK,s=t===a.EVENT_TYPE_CLICK_TRACKING;return(e=a.EventCallback.getEventCallback(this._eventCallbacks,e,s?a.EVENT_TYPE_CLICK:t))?((t={})[a.INFO_KEY_NEED_EMPTY_CT]=!0,n?e._showBrowser&&i.push(e.getUrl(t)):s&&e._showBrowser||i.push(e.getUrl(t)),n||(i=i.concat(e.getTrackingUrls())),i):i},addEventCallbackUrls(e,t,i){i&&this._isValidEventNameAndType(e,t)&&(this._externalEventCallbackUrlsDictionary[`${t}-${e}`]=this.getExternalEventCallbackUrls(e,t).concat(i))},setClickThroughUrl(e,t){t&&this._isValidEventNameAndType(e,a.EVENT_TYPE_CLICK)&&(e=this.getEventCallback(e,a.EVENT_TYPE_CLICK))&&(a.Util.isParameterInURL(e._url,a.URL_PARAMETER_KEY_CR)||(e._url=`${e._url}&${a.URL_PARAMETER_KEY_CR}=`),e._url=a.Util.setParameterInURL(e._url,a.URL_PARAMETER_KEY_CR,t),e._showBrowser=!0)},addCreativeRendition(){const e=new a.CreativeRendition;return e.parse({creativeRenditionId:this._creativeRenditionId,adReplicaId:this._replicaId,preference:0}),e.setBaseUnit(this._creative.getBaseUnit()),e.setDuration(this._creative.getDuration()),this._creativeRenditions.push(e),this.isPlaceholder()&&(this._noLoad=!1),e},getRendererController(){return this._rendererController},getSlot(){return this._slot||(this._slot=this._context._adResponse.getSlotByCustomId(this._slotCustomId)),this._slot},getCompanionSlots(){for(var e=[],t=0;t<this._companionAdInstances.length;t++)e.push(this._companionAdInstances[t]._slot);return e},getActiveCreativeRendition(){return this._primaryCreativeRendition},setActiveCreativeRendition(e){e?(-1===this._creativeRenditions.indexOf(e)&&this._creativeRenditions.push(e),this._primaryCreativeRendition=e,this._creativeRenditionId=e.getId()):a.warn(\"AdInstance.setActiveCreativeRendition\",\"rendition is null\")},getAllCreativeRenditions(){const e=this._creativeRenditions.slice();e.sort(function(e,t){return t.getPreference()-e.getPreference()});const t=e.indexOf(this._primaryCreativeRendition);return t>-1&&(e.splice(t,1),e.unshift(this._primaryCreativeRendition)),e},getRenderableCreativeRenditions(){let e=this._creativeRenditions.slice().sort(function(e,t){return t.getPreference()-e.getPreference()}).filter(function(e){return this._rendererController.rendererMatch(e)},this),t=e.indexOf(this._primaryCreativeRendition);return t>-1&&(e.splice(t,1),e.unshift(this._primaryCreativeRendition)),e},getPlayheadTime(){let e=-1;if(this._rendererController.getRenderer()&&\"function\"==typeof this._rendererController.getRenderer().getPlayheadTime)try{e=this._rendererController.getRenderer().getPlayheadTime()}catch(e){a.warn(\"AdInstance.getPlayheadTime\",e.description)}return e},getDuration(){let e=-1;return this._rendererController.getRenderer()&&\"function\"==typeof this._rendererController.getRenderer().getDuration&&(this._lastDurationFromRenderer=e=this._rendererController.getRenderer().getDuration()),-1===e&&(e=this._lastDurationFromRenderer>-1?this._lastDurationFromRenderer:this.getActiveCreativeRendition().getDuration()),e},parse(e){if(e){let i,n;this._adId=e.adId||null,this._creativeId=e.creativeId||null,this._creativeRenditionId=e.creativeRenditionId||null,this._replicaId=e.hasOwnProperty(\"replicaId\")?e.replicaId:\"\",this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad(),this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit(),this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId),this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);let s=0;for(i=e.eventCallbacks||[];s<i.length;s++){var t=i[s];(n=a.EventCallback.newEventCallback(this._context,t.name,t.type))&&(n._adInstance=this,n.parse(t),this._eventCallbacks.push(n))}for(s=0,i=e.companionAds||[];s<i.length;++s)(t=i[s])&&t.adSlotCustomId&&((n=new a.AdInstance(this._context))._slotCustomId=t.adSlotCustomId,n.parse(t),this._companionAdInstances.push(n));for(s=0,i=e.fallbackAds||[];s<i.length;++s)t=i[s],n=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(n),n._slot=this._slot,n._parentAdInstancesGroup=this._parentAdInstancesGroup,n.parse(t);this._creativeRenditions.length>0&&(this._primaryCreativeRendition=this._creativeRenditions[0])}},play(){if(a.log(`AdInstance.play ${this._slotCustomId}`),this._timer.tick(),this.processEvent(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION),this._isStartSuccessfully||(a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION,{adInstance:this,slotCustomId:this._slotCustomId}),this._isStartSuccessfully=!0),this._state.play(this),this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]===a.MODULE_TYPE_RENDERER)for(let e=0;e<this._companionAdInstances.length;e++)this._companionAdInstances[e].isPlaceholder()||this._companionAdInstances[e].getSlot().playCompanionAds(this._companionAdInstances[e])},pause(){a.log(`AdInstance.pause ${this._slotCustomId}`),this._isStartSuccessfully?this._rendererController&&this._rendererController.pause():a.log(\"Ad hasn't started yet. Ignore.\")},resume(){a.log(`AdInstance.resume${this._slotCustomId}`),this._isStartSuccessfully?this._rendererController&&this._rendererController.resume():a.log(\"Ad hasn't started yet. Ignore.\")},skip(){a.log(\"AdInstance.skip\"),\"VPAID\"!==this.getActiveCreativeRendition().getCreativeApi()?(this._isSkipped=!0,this.processEvent(a.EVENT_AD_SKIPPED,a.EVENT_TYPE_GENERIC),this.stop()):a.log(\"VPAID creative, skip has been implemented inside of VPAID\")},stop(){a.log(\"AdInstance.stop\"),this._rendererController.stop()},fakeComplete(){this._slot.getTimePositionClass()===a.TIME_POSITION_CLASS_DISPLAY&&(this._isStartSuccessfully=!1,this._slot.playNextAdInstance())},complete(){this._isStartSuccessfully&&(this.processEvent(a.EVENT_AD_IMPRESSION_END,a.EVENT_TYPE_IMPRESSION),a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION_END,{adInstance:this})),this._state.complete(this),this._rendererController._restorePlaceholdersForHybrid(),this._rendererController.setRenderer(null),this._isStartSuccessfully=!1,this._slot.playNextAdInstance()},isStarted(){return this._isStartSuccessfully},onStartPlaying(){a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]?this._isImpressionSent=!0:this._translated=!0},onCompletePlaying(){},onStartReplaying(){},onCompleteReplaying(){},getEventCallback(e,t){return a.EventCallback.getEventCallback(this._eventCallbacks,e,t)},processEvent(e,t,i,n){let s=!0;return t=this.getEventCallback(e,t),e===a.EVENT_AD_IMPRESSION&&this._isStartSuccessfully&&(t=this.getEventCallback(a.EVENT_ERROR,a.EVENT_TYPE_ERROR),i={errorInfo:\"Trying to send defaultImpression multiple times\"},s=!1),t?n||t.process(i):s=!1,e===a.EVENT_AD_CLICK&&this._context.dispatchEvent(a.EVENT_AD_CLICK,{adInstance:this}),(e!==a.EVENT_AD_IMPRESSION&&e!==a.EVENT_AD_IMPRESSION_END||a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE])&&(n={subType:e,adInstance:this,slot:this._slot},e===a.EVENT_ERROR&&(n[a.INFO_KEY_ERROR_CODE]=i[a.INFO_KEY_ERROR_CODE],n[a.INFO_KEY_ERROR_INFO]=i[a.INFO_KEY_ERROR_INFO],n[a.INFO_KEY_ERROR_MODULE]=i[a.INFO_KEY_ERROR_MODULE]),e===a.EVENT_AD_MEASUREMENT&&(n[a.INFO_KEY_CONCRETE_EVENT_ID]=i[a.INFO_KEY_CONCRETE_EVENT_ID]),this._context.dispatchEvent(a.EVENT_AD,n)),s},setVolume(e){a.debug(`AdInstance.setVolume(${e})`),this.isStarted()&&\"function\"==typeof this._rendererController.getRenderer().setVolume&&this._rendererController.getRenderer().setVolume(e)},setMetr(e,t){let i=a.AdInstance._metrDictionary[e],n=t;i&&(e===a.EVENT_AD_CLICK&&(n=!t),this._metr=n===a.CAPABILITY_STATUS_ON||!0===n?this._metr|i:this._metr&~i)},getExternalEventCallbackUrls(e,t){return(this._externalEventCallbackUrlsDictionary[`${t}-${e}`]||[]).slice()},reset(){this._rendererController.reset();for(let e=0;e<this._companionAdInstances.length;e++){const t=this._companionAdInstances[e];t._state!==a.MediaPlayingState.instance&&t._state!==a.MediaReplayingState.instance||t.stop(),t._rendererController.reset()}},cloneForTranslation(){const e=new a.AdInstance(this._context);e._adId=this._adId,e._creativeId=this._creativeId,e._creative=this._creative.cloneForTranslation(),e._creativeRenditionId=this._creativeRenditionId,e._isInitiatedSent=this._isInitiatedSent,e._noLoad=this._noLoad,e._slot=this.getSlot(),e._soAdUnit=this.getSoAdUnit(),e._replicaId=this._replicaId,e._wrapperCount=this._wrapperCount;for(var t=0;t<this._eventCallbacks.length;t++){const i=this._eventCallbacks[t].copy();i._adInstance=e,e._eventCallbacks.push(i)}for(e._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary),t=0;t<this._companionAdInstances.length;t++)this._companionAdInstances[t].isPlaceholder()?e._companionAdInstances.push(this._companionAdInstances[t].cloneForTranslation()):e._companionAdInstances.push(this._companionAdInstances[t]);return e},isPlaceholder(){return this._noLoad},setMediaState(e){this._state=e},_isValidEventNameAndType:(e,t)=>!a.Util.isBlank(e)&&!a.Util.isBlank(t)&&(t===a.EVENT_TYPE_CLICK||t===a.EVENT_TYPE_CLICK_TRACKING||t===a.EVENT_TYPE_IMPRESSION&&(e===a.EVENT_AD_IMPRESSION||e===a.EVENT_AD_FIRST_QUARTILE||e===a.EVENT_AD_MIDPOINT||e===a.EVENT_AD_THIRD_QUARTILE||e===a.EVENT_AD_COMPLETE)||t===a.EVENT_TYPE_STANDARD&&(e===a.EVENT_AD_PAUSE||e===a.EVENT_AD_RESUME||e===a.EVENT_AD_REWIND||e===a.EVENT_AD_MUTE||e===a.EVENT_AD_UNMUTE||e===a.EVENT_AD_COLLAPSE||e===a.EVENT_AD_EXPAND||e===a.EVENT_AD_MINIMIZE||e===a.EVENT_AD_CLOSE||e===a.EVENT_AD_ACCEPT_INVITATION)||t===a.EVENT_TYPE_ERROR&&e===a.EVENT_ERROR),isPlayable(){let e=!(this._rendererController.getRendererState()===a.RendererFailedState.instance&&!this._isImpressionSent);return e?((e=e&&!this._translated)||a.debug(\"AdInstance.isPlayable returning false translated:\",this._translated),e):(a.debug(\"AdInstance.isPlayable returning false isImpressionSent:\",this._isImpressionSent),e)},toString(){return`[AdInstance ${this._adId}]`},getCompanionAdInstances(){for(var e=[],t=0;t<this._companionAdInstances.length;++t)this._companionAdInstances[t].isPlaceholder()||e.push(this._companionAdInstances[t]);return e},isRequiredToShow(){return this._context._adResponse.getAd(this._adId).isRequiredToShow()},incrementWrapperCount(){this._wrapperCount++},getWrapperCount(){return this._wrapperCount}}),a.AdManager=function(){const e=this;this._context=this.newContext(),this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,function(t){e.onRequestComplete(t)}),this._networkId=this._serverURL=\"\",this._onRequestComplete=this._location=null},a.AdManager.prototype={getVersion(){if(a.version){const i=a.version.match(/^js-(\\d)\\.(\\d)\\.(\\d).(\\d)/)||a.version.match(/^js-(\\d)\\.(\\d)\\.(\\d)/)||a.version.match(/^js-(\\d)\\.(\\d)/);if(null!=i&&i.length>0){for(var e=0,t=0;t<i.length-1;t++)e+=i[i.length-t-1]<<(t<<3);return e}if(0===a.version.indexOf(\"js-master\"))return 4294967295}return 0},setNetwork(e){if(a.debug(`AdManager.setNetwork(${Array.prototype.slice.call(arguments).join(\",\")})`),1*e>0){this._networkId=1*e;for(const e in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(e)){const t=a._instanceQueue[e];t&&t._videoAsset._videoPlayPending&&t._videoAsset.play()}}else a.warn(\"AdManager.setNetwork\",\"valid networkId required\")},setServerURL(e){a.debug(`AdManager.setServerURL(${Array.prototype.slice.call(arguments).join(\",\")})`),a.warn(\"AdManager.setServerURL method is DEPRECATED, use AdManager.setServer instead.\"),this.setServer(e)},setServer(e){if(a.debug(`AdManager.setServer(${Array.prototype.slice.call(arguments).join(\",\")})`),e&&\"string\"==typeof e){this._serverURL=e;for(const e in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(e)){const t=a._instanceQueue[e];t&&t._videoAsset._videoPlayPending&&t._videoAsset.play()}}else a.warn(\"AdManager.setServer\",\"server url required\")},setLocation(e){a.debug(`AdManager.setLocation(${Array.prototype.slice.call(arguments).join(\",\")})`),this._location=e},newContext(){return a.debug(`AdManager.newContext(${Array.prototype.slice.call(arguments).join(\",\")})`),new a.Context(this)},newContextWithContext(e){a.debug(`AdManager.newContextWithContext(${Array.prototype.slice.call(arguments).join(\",\")})`);const t=this.cloneContext(e);t._temporalSlotBase=e._temporalSlotBase,e.getContentVideoElement()&&(t.setContentVideoElement(e.getContentVideoElement()),delete t._temporalSlotBase[`_fw_contentVideo_${e._instanceId}`]),t._videoDisplaySize=e._videoDisplaySize,t._overriddenAdRenderers=e._overriddenAdRenderers,t._currentContentPlayheadTime=e._currentContentPlayheadTime,t.startSubsession(e._adRequest._subsessionToken),t.setRequestMode(e._adRequest._requestMode),t._adRequest._compatibleDimensions=e._adRequest._compatibleDimensions,t._videoAsset._state=e._videoAsset._state,t._videoAsset._callbackTimer=e._videoAsset._callbackTimer,t._videoAsset._videoPlayPending=e._videoPlayPending,t._videoAsset._requestedVideoViewUrl=e._videoAsset._requestedVideoViewUrl,t._videoAsset._delay=e._videoAsset._delay,t._videoAsset._durationType=e._videoAsset._durationType;let i,n=e._extensionManager.extensions;for(i in n)n.hasOwnProperty(i)&&t.loadExtension(n[i]);return this._context=t},setParameter(e,t,i){a.debug(`AdManager.setParameter(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.setParameter(e,t,i)},getParameter(e){return this._context.getParameter(e)},submitRequest(e,t){a.debug(\"AdManager.submitRequest()\"),e&&\"function\"==typeof e?this._onRequestComplete=e:a.warn(\"AdManager.submitRequest(): callback function required\"),this._context.submitRequest(t/1e3)},onRequestComplete(e){a.debug(`AdManager.onRequestComplete(${Array.prototype.slice.call(arguments).join(\",\")})`),this._onRequestComplete&&(this._onRequestComplete({success:e.success,response:e.response}),this._onRequestComplete=null)},registerVideoDisplayBase(e){a.debug(`AdManager.registerVideoDisplayBase(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.registerVideoDisplayBase(e)},setVideoAsset(e,t){a.debug(`AdManager.setVideoAsset(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.setVideoAsset(e,t)},setSiteSection(e){a.debug(`AdManager.setSiteSection(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.setSiteSection(e)},addKeyValue(e,t){a.debug(`AdManager.addKeyValue(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.addKeyValue(e,t)},setVideoDisplayCompatibleSizes(e){a.debug(`AdManager.setVideoDisplayCompatibleSizes(${Array.prototype.slice.call(arguments).join(\",\")})`),this._context.setVideoDisplayCompatibleSizes(e)},playSlots(e,t){let i=e;a.warn(\"AdManager.playSlots() has DEPRECATED, use tv.freewheel.SDK.Slot.Play() instead\"),a.debug(`AdManager.playSlots(${e})`),\"string\"==typeof e&&(i=e.toUpperCase()),this._playSlots(i,t)},_playSlots(e,t){let i=t;if(\"function\"!=typeof i&&(i=function(){}),this._context._adResponse){const s=[];t=this._context.getTemporalSlots();for(var n=0;n<t.length;++n){const i=t[n];(Math.abs(i.getTimePosition()-e)<.1||e===i.getTimePositionClass())&&s.push(i)}if(0===s.length)a.warn(\"AdManager.playSlots\",\"no slot matches\",e),i();else if(e===a.TIME_POSITION_CLASS_OVERLAY)for(n=0;n<s.length;n++)!function(e){if(!e._onContentVideoTimeUpdate){var t=this._context.getContentVideoElement(),i=e._onContentVideoTimeUpdate=function(n){a.log(`_onContentVideoTimeUpdate: event.type = ${n.type}`),!t.paused&&!0!==t._fw_videoAdPlaying&&t.currentTime-e.getTimePosition()>=0&&t.currentTime-e.getTimePosition()<1&&(t.removeEventListener(\"timeupdate\",i,!1),e._play(function(){var n=setInterval(function(){!t.paused&&Math.abs(t.currentTime-e.getTimePosition())>2&&(t.addEventListener(\"timeupdate\",i,!1),clearInterval(n))},1e3)}))};t.addEventListener(\"timeupdate\",i,!1)}}(s[n]);else!function(){const e=s.shift();e?e._play(i):i()}()}else a.warn(\"AdManager._playSlots\",\"request is not completed\"),i()},dispose(){a.debug(\"AdManager.dispose()\"),this._context.dispose(),this._onRequestComplete=null},cloneContext(e){let t,i=this.newContext(),n=e._adRequest._capabilities._capabilities;for(t in n)n.hasOwnProperty(t)&&i.setCapability(t,n[t]);return i.setProfile(e._adRequest._playerProfile),i.setSiteSection(e._ss_id,e._ss_networkId,e._ss_pageViewRandom,e._ss_idType,e._ss_fallbackId),i.setVideoAsset(e._va_id,e._va_duration,e._va_networkId,e._va_location,e._va_autoPlayType,e._va_viewRandom,e._va_idType,e._va_fallbackId,e._va_durationType),i.setVisitor(e._adRequest._visitorCustomId,e._adRequest._visitorIpV4Address),i}},a.AdManager.prototype.constructor=a.AdManager,a.AdRequest=function(e){this._context=e,this._capabilities=new a.Capabilities,this._keyValues=[],this._playerProfile=\"\",this._compatibleDimensions=null,this._temporalSlots=[],this._siteSectionId=this._siteSectionCustomId=\"\",this._siteSectionNetworkId=0,this._siteSectionFallbackId=\"\",this._siteSectionViewRandom=0,this._requestMode=this._visitorIpV4Address=this._visitorCustomId=\"\",this._subsessionToken=this._requestDuration=0,this._candidateAdIds=[],this._slotScanner=new a.PageSlotScanner(e),this._urlParams={},this._urlKeyValues=[],this._customInfo=\"\"},a.AdRequest.prototype={setCapability(e,t){this._capabilities.setCapability(e,t)},addKeyValue(e,t){\"string\"!=typeof e||\"string\"!=typeof t||0===e.length?a.warn(\"AdRequest.addKeyValue:\",\"key and value required\"):(e=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`,this._keyValues.indexOf(e)<0&&this._keyValues.push(e))},setProfile(e){\"string\"!=typeof e?a.warn(\"AdRequest.setProfile:\",\"player profile required\"):this._playerProfile=e},setVideoDisplayCompatibleSizes(e){if(e&&e.length){for(var t=[],i={},n=0;n<e.length;++n)if(a.debug(\"dimension is:\",e[n].width,\"X\",e[n].height),e[n].width>0&&e[n].height>0){const s=`${e[n].width},${e[n].height}`;null==i[s]&&(i[s]=\"\",t.push(s))}t.length>0&&(this._compatibleDimensions=t.join(\"|\"))}else a.warn(\"AdRequest.setVideoDisplayCompatibleSizes:\",\"compatible dimensions required\")},setSiteSection(e,t,i,n,s){if(e){switch(n){case a.ID_TYPE_FW:this._siteSectionId=e;break;case a.ID_TYPE_GROUP:this._siteSectionId=`g${e}`;break;default:this._siteSectionCustomId=e}1*t>0&&(this._siteSectionNetworkId=1*t),1*i>0&&(this._siteSectionViewRandom=1*i),\"number\"==typeof s&&s>0?this._siteSectionFallbackId=`${s}`:\"string\"==typeof s&&(this._siteSectionFallbackId=s.trim())}else a.warn(\"AdRequest.setSiteSection: id required\")},setVisitor(e,t){\"string\"!=typeof e?a.warn(\"AdRequest.setVisitor:\",\"customId required\"):(this._visitorCustomId=e,\"string\"==typeof t&&\"\"!==t&&(this._visitorIpV4Address=t))},setRequestMode(e){e!==a.REQUEST_MODE_ON_DEMAND&&e!==a.REQUEST_MODE_LIVE?a.warn(\"AdRequest.setRequestMode:\",`unknown mode: ${e}`):(this._requestMode=e,this._requestMode===a.REQUEST_MODE_LIVE&&0===this._subsessionToken&&this.setSubsessionToken(1e4*Math.random()+1))},setRequestDuration(e){\"number\"!=typeof e?a.warn(\"AdRequest.setRequestDuration:\",\"request duration required\"):(e<0&&(a.warn(\"AdRequest.setRequestDuration:\",\"requestDuration is negative, reset it to 0\"),e=0),this._requestDuration=e)},addCandidateAd(e){\"number\"!=typeof e?a.warn(\"AdRequest.addCandidateAd:\",\"candidate ad ID required\"):e<0?a.warn(\"AdRequest.addCandidateAd\",\"invalid ad ID, ignore\"):this._candidateAdIds.push(e)},addTemporalSlot(e,t,i,n,s,r,o,l){if(a.Util.isBlank(e)||a.Util.isBlank(t)||i<0)a.warn(\"AdRequest.addTemporalSlot:\",\"invalid parameters\");else{for(var d=0;d<this._temporalSlots.length;d++)if(this._temporalSlots[d].getCustomId()===e)return void a.warn(\"AdRequest.addTemporalSlot:\",\"slot is already existed, ignored\");(d=new a.Slot(this._context)).setCustomId(e),d.setAdUnit(t),d.setTimePosition(i),d.setSlotProfile(n),d.setCuepointSequence(1*s),d.setMaxDuration(r),d.setMinDuration(o),d.setAcceptContentType(l),this._temporalSlots.push(d)}},setSubsessionToken(e){this._subsessionToken=e},scanPageSlots(){this._slotScanner.scanPageSlots()},generateTypeBRequestUrl(){let e=this._context._adManager._serverURL.split(\"?\"),t=e[0],i=[/fwmrm\\.net$/,/fwmrm\\.net\\/$/,/fwmrm\\.net\\/ad$/,/fwmrm\\.net\\/ad\\/$/,/fwmrm\\.net\\/ad\\/g$/,/fwmrm\\.net\\/ad\\/g\\/$/,/fwmrm\\.net\\/ad\\/g\\/1$/];if(0===t.indexOf(\"http://\")||0===t.indexOf(\"https://\"))for(let e=0;e<i.length;++e)if(t.match(i[e])){t=`${t.slice(0,t.indexOf(\"fwmrm.net\")+9)}/ad/g/1`;break}return this.parseQueryStr(e.slice(1).join(\"?\")),e=`${this.generateGlobalParametersQueryStr()};${this.generateKeyValuesStr()};`,this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)&&1===this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)||(e+=this.generateSlotsTypeBStr()),a.Util.isBlank(this._customInfo)||(e+=`;${this._customInfo}`),`${t}?${e}`},generateVideoViewRequestUrlWithDummyContextInstanceId(e){this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_ON);let t=this.generateTypeBRequestUrl();return t=a.Util.setParameterInURL(t,\"cbfn\",`tv.freewheel.SDK._instanceQueue['Context_${e}']._videoAsset.requestComplete`),a.debug(`generateVideoViewRequestUrlWithDummyContextInstanceId():${t}`),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_UNSET),t},parseQueryStr(e){let t=e;if(a.debug(`AdRequest.parseQueryStr(${Array.prototype.slice.call(arguments).join(\",\")})`),this._urlParams={},this._urlKeyValues=[],this._customInfo=\"\",t){let e;if(\";\"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),(t=t.split(\";\"))[0]){var i=t[0].split(\"&\");for(e=0;e<i.length;++e){const t=i[e].split(\"=\");2===t.length&&(this._urlParams[t[0]]=t[1])}}if(t[1])for(i=t[1].split(\"&\"),e=0;e<i.length;++e)this._urlKeyValues.push(i[e]);t[2]&&(this._customInfo=t.slice(2).join(\";\"))}},generateGlobalParametersQueryStr(){a.debug(\"AdRequest.generateGlobalParametersQueryStr\");let e=this._context.getParameter(\"wrapperVersion\");e=[[\"prof\",this._playerProfile,\"string\"],[\"nw\",this._context._adManager._networkId,\"number\"],[\"caid\",this._context._videoAsset._customId,\"string\"],[\"asid\",this._context._videoAsset._id,\"string\"],[\"vdur\",this._context._videoAsset._duration,\"number\"],[\"asnw\",this._context._videoAsset._networkId,\"number\"],[\"asml\",this._context._videoAsset._location,\"string\"],[\"vprn\",this._context._videoAsset._viewRandom,\"number\"],[\"afid\",this._context._videoAsset._fallbackId,\"string\"],[\"vdty\",this._context._videoAsset._durationType,\"string\"],[\"vtpo\",this._context._videoAsset._currentTpos,\"number\"],[\"csid\",this._siteSectionCustomId,\"string\"],[\"ssid\",this._siteSectionId,\"string\"],[\"ssnw\",this._siteSectionNetworkId,\"number\"],[\"pvrn\",this._siteSectionViewRandom,\"number\"],[\"sfid\",this._siteSectionFallbackId,\"string\"],[\"vcid\",this._visitorCustomId,\"string\"],[\"mode\",this._requestMode,\"string\"],[\"vrdu\",this._requestDuration,\"number\"],[\"ssto\",this._subsessionToken,\"number\"],[\"cd\",this._compatibleDimensions||this.detectScreenDimension(),\"string\"],[\"vclr\",a.version+(e?`,${e}`:\"\"),\"string\"],[\"resp\",a.PLATFORM_SEND_REQUEST_BY_FORM?\"json2\":\"json\",\"string\"],[\"orig\",`${window.location.protocol}//${window.location.host}`,\"string\"],[\"cbfn\",`tv.freewheel.SDK._instanceQueue['Context_${this._context._instanceId}'].requestComplete`,\"string\"],[\"vip\",this._visitorIpV4Address,\"string\"],[\"cana\",this._candidateAdIds.join(\",\"),\"string\"]];for(let t=0;t<e.length;t++){const i=e[t];switch(i[2]){case\"string\":a.Util.isBlank(i[1])||(this._urlParams[i[0]]=encodeURIComponent(i[1]));break;case\"number\":i[1]>0&&(this._urlParams[i[0]]=i[1])}}for(var t in e=\"\",this._urlParams)this._urlParams.hasOwnProperty(t)&&(e+=`${t}=${this._urlParams[t]}&`);switch(e=e.substring(0,e.length-1),this._slotScanner._candidateAds.length>0&&(null==this._capabilities._capabilities[a.CAPABILITY_CHECK_COMPANION]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_COMPANION,a.CAPABILITY_STATUS_ON),null==this._capabilities._capabilities[a.CAPABILITY_CHECK_TARGETING]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_TARGETING,a.CAPABILITY_STATUS_OFF)),this._context._videoAsset._eventCallback||this._context._videoAsset._requestedVideoViewUrl||!this._context._videoAsset._id&&!this._context._videoAsset._customId||this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),this._capabilities._capabilities[a.CAPABILITY_DISPLAY_REFRESH]&&this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_OFF),e=this._capabilities.parseCapabilities(e),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),this._context._videoAsset._autoPlayType){case a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED:t=\"+play+uapl\";break;case a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:t=\"-play\";break;default:t=\"+play-uapl\"}return e.replace(/flag=/,`flag=${encodeURIComponent(t)}`)},generateKeyValuesStr(){a.debug(\"AdRequest.generateKeyValuesStr\");let e=a.Util.flashVersion();e=this._keyValues.concat([`_fw_h_x_flash_version=${encodeURIComponent(e)}`,`_fw_dpr=${void 0===window.devicePixelRatio?\"1\":window.devicePixelRatio.toFixed(2).toString()}`]);for(var t=0;t<this._urlKeyValues.length;t++){const i=this._urlKeyValues[t];e.indexOf(i)<0&&e.push(i)}return(t=this._context._adManager._location)&&e.push(`ltlg=${encodeURIComponent(`${Math.round(1e4*t.coords.latitude)/1e4},${Math.round(1e4*t.coords.longitude)/1e4}`)}`),e.join(\"&\")},generateSlotsTypeBStr(){a.debug(\"AdRequest.generateSlotsTypeBStr\");for(var e=\"\",t=[],i=0;i<this._temporalSlots.length;i++){let e=this._temporalSlots[i];e=[[\"slid\",e.getCustomId(),\"string\"],[\"slau\",e.getAdUnit(),\"string\"],[\"ptgt\",\"a\",\"string\"],[\"tpos\",e.getTimePosition(),\"number\"],[\"cpsq\",e.getCuepointSequence(),\"number\"],[\"envp\",e.getSlotProfile(),\"string\"],[\"maxd\",e.getMaxDuration(),\"number\"],[\"mind\",e.getMinDuration(),\"number\"],[\"prct\",e.getAcceptContentType(),\"string\"]];for(var n=[],s=0;s<e.length;s++){const t=e[s];switch(t[2]){case\"string\":a.Util.isBlank(t[1])||n.push(`${t[0]}=${encodeURIComponent(t[1])}`);break;case\"number\":[\"cpsq\",\"maxd\",\"mind\"].indexOf(t[0])>-1?t[1]>0&&n.push(`${t[0]}=${t[1]}`):t[1]>=0&&n.push(`${t[0]}=${t[1]}`)}}t.push(n.join(\"&\"))}return t.length>0&&(e=`${t.join(\";\")};`),e+this._slotScanner.slotsToTypeBStr()},detectScreenDimension:()=>(a.debug(\"AdRequest.detectScreenDimension:\",`${screen.width},${screen.height}`),`${screen.width},${screen.height}`)},a.AdResponse=function(e){this._context=e},a.AdResponse.prototype={},a.AdResponse.prototype.constructor=a.AdResponse,a.Util.mixin(a.AdResponse.prototype,{parse(e,t){let i;this._data=e,this._temporalSlots=[],this._videoPlayerNonTemporalSlots=[],this._siteSectionNonTemporalSlots=[],this._profileParameters={},this._ads=[],this._siteSectionCustomId=a.Util.getObject(\"siteSection.customId\",e)||\"\",this._adRenderers=[];let n=a.Util.getObject(\"parameters\",e)||[];for(i=0;i<n.length;++i){var s=n[i];this._profileParameters[s.name]=s.value}for(this._adRenderers=a.Util.getObject(\"rendererManifest.adRenderers.adRenderer\",e)||[],i=0;i<this._adRenderers.length;i++)void 0!==this._adRenderers[i].adUnit&&(this._adRenderers[i].baseUnit=this._adRenderers[i].adUnit,delete this._adRenderers[i].adUnit);for(n=a.Util.getObject(\"ads.ads\",e)||[],i=0;i<n.length;++i)(s=new a.Ad(this._context)).parse(n[i]),this._ads.push(s);for(n=a.Util.getObject(\"siteSection.videoPlayer.videoAsset.adSlots\",e)||[],i=0;i<n.length;++i)(s=new a.Slot(this._context)).setType(a.SLOT_TYPE_TEMPORAL),s.setBase(t),s.parse(n[i]),this._temporalSlots.push(s);for(n=a.Util.getObject(\"siteSection.videoPlayer.adSlots\",e)||[],i=0;i<n.length;++i)(s=new a.Slot(this._context)).setType(a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL),s.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),s.parse(n[i]),this._initSlotData(s),this._videoPlayerNonTemporalSlots.push(s);for(n=a.Util.getObject(\"siteSection.adSlots\",e)||[],i=0;i<n.length;++i)(s=new a.Slot(this._context)).setType(a.SLOT_TYPE_SITESECTION_NONTEMPORAL),s.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),s.parse(n[i]),this._initSlotData(s),this._siteSectionNonTemporalSlots.push(s);e=a.Util.getObject(\"siteSection.videoPlayer.videoAsset\",e)||{},this._context._videoAsset.parse(e)},getCreative(e,t){return(e=this.getAd(e))?e.getCreative(t):null},getAd(e){for(let t=0;t<this._ads.length;t++){const i=this._ads[t];if(i.getId()===e)return i}return null},getTemporalSlots(){return this._temporalSlots},getSiteSectionNonTemporalSlots(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId(){return this._siteSectionCustomId},getSlotByCustomId(e){for(var t=0;t<this._temporalSlots.length;++t)if(this._temporalSlots[t].getCustomId()===e)return this._temporalSlots[t];for(t=0;t<this._videoPlayerNonTemporalSlots.length;++t)if(this._videoPlayerNonTemporalSlots[t].getCustomId()===e)return this._videoPlayerNonTemporalSlots[t];for(t=0;t<this._siteSectionNonTemporalSlots.length;++t)if(this._siteSectionNonTemporalSlots[t].getCustomId()===e)return this._siteSectionNonTemporalSlots[t];return a.warn(\"getSlotByCustomId(): not found\",e),null},_initSlotData(e){for(var t=!1,i=0;i<this._context._adRequest._slotScanner._knownSlots.length;i++){const n=this._context._adRequest._slotScanner._knownSlots[i];if(e.getCustomId()===n.id&&n.element){e.setWidth(n.width),e.setHeight(n.height),e.setBase(n.element),e.setAcceptCompanion(n.acceptCompanion),e.setInitialAdOption(n.initialAdOption),t=!0;break}}return t||a.warn(`Failed to init slot ${e.getCustomId()}`),t}}),a.Capabilities=function(){this._capabilities={},this.init()},a.Capabilities.prototype={init(){for(let e=[a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS,a.CAPABILITY_FALLBACK_UNKNOWN_ASSET,a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION,a.CAPABILITY_FALLBACK_ADS,a.CAPABILITY_SLOT_CALLBACK,a.CAPABILITY_NULL_CREATIVE,a.CAPABILITY_AUTO_EVENT_TRACKING,a.CAPABILITY_RENDERER_MANIFEST],t=0;t<e.length;t++)this._capabilities[e[t]]=a.CAPABILITY_STATUS_ON},setCapability(e,t){this._capabilities[e]=t},getCapability(e){return this._capabilities[e]},parseCapabilities(e){let t,i=\"\";for(t in this._capabilities)if(this._capabilities.hasOwnProperty(t)){switch(this._capabilities[t]){case a.CAPABILITY_STATUS_ON:i+=`+${t}`;break;case a.CAPABILITY_STATUS_OFF:i+=`-${t}`}e=e.replace(new RegExp(`(%2B|-|\\\\+)${t}`,\"g\"),\"\")}return i=encodeURIComponent(i),e.indexOf(\"flag=\")>-1?e.replace(/flag=/,`flag=${i}`):`${e}&flag=${i}`}},a.ContentVideoExtension=function(){this.autoSourceRestore=this.respondPauseResume=!0,this._originalTime=0,this._contentVideoControls=this._contentVideoSrc=null},a.ContentVideoExtension.prototype={_isEnabled(){const e=this._context.getParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED);return(null==e||!0===a.Util.str2bool(e))&&null!=this._context.getContentVideoElement()},_getBooleanParameter(e,t){return null==(e=this._context.getParameter(e))&&(e=t),a.Util.str2bool(e)},init(e){a.debug(\"ContentVideoExtension.init(context)\"),this._context=e,this._fixContentVideoCurrentTime=a.Util.bind(this,function(e){if(a.log(`_fixContentVideoCurrentTime: event = ${e.type}`),!(this._context.getContentVideoElement().currentTime<=0||this._context.getContentVideoElement().seekable.length<=0)&&(this._context.getContentVideoElement().removeEventListener(\"timeupdate\",this._fixContentVideoCurrentTime,!1),this._context.getContentVideoElement().currentTime>0&&this._context.getContentVideoElement().currentTime<1&&this._originalTime>1)){a.log(\"ContentVideoExtension: seeking to original time\",this._originalTime);try{this._context.getContentVideoElement().currentTime=this._originalTime}catch(e){a.warn(\"ContentVideoExtension: seek error\")}}}),this._pause=a.Util.bind(this,function(e){a.log(`_pause: event = ${e.type}`),this._isEnabled()?this._respondPauseResume()&&(a.debug(\"ContentVideoExtension: EVENT_CONTENT_VIDEO_PAUSE_REQUEST pausing content video\",this._context.getContentVideoElement().src),this._originalTime=this._context.getContentVideoElement().currentTime,this._context.getContentVideoElement().pause()):a.debug(\"ContentVideoExtension: extension is not enabled, do nothing.\")}),this._resume=a.Util.bind(this,function(e){a.log(`_resume: event = ${e.type}`),this._isEnabled()?this._respondPauseResume()&&(a.debug(\"ContentVideoExtension: EVENT_CONTENT_VIDEO_RESUME_REQUEST resume content video\",this._context.getContentVideoElement().src),!this._context._videoAsset||null!=this._context._videoAsset._state&&this._context._videoAsset._state!==a.VIDEO_STATE_COMPLETED?(a.log(\"ContentVideoExtension: resume content video\"),this._context.getContentVideoElement().play(),a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL&&!0===this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK,!0)&&this._context.getContentVideoElement().addEventListener(\"timeupdate\",this._fixContentVideoCurrentTime,!1)):a.warn(\"ContentVideoExtension: video state is uninitialized or completed, skip resume.\")):a.debug(\"ContentVideoExtension: extension is not enabled, do nothing.\")}),this._onAttach=a.Util.bind(this,function(e){if(this._isEnabled()){if(this._autoSourceRestore())switch(e.slot.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug(\"ContentVideoExtension: store current content video src\",this._context.getContentVideoElement().src),this._contentVideoSrc=this._context.getContentVideoElement().src,this._contentVideoControls=this._context.getContentVideoElement().controls,this._context.getContentVideoElement().paused||this._context.getContentVideoElement().pause()}}else a.debug(\"ContentVideoExtension: extension is not enabled, do nothing.\")}),this._onDetach=a.Util.bind(this,function(e){if(this._isEnabled()){if(this._autoSourceRestore())switch(e=e.slot.getTimePositionClass(),e){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug(\"ContentVideoExtension: restore content video src to\",this._contentVideoSrc),this._context.getContentVideoElement().src!==this._contentVideoSrc&&(this._context.getContentVideoElement().src=this._contentVideoSrc),this._context.getContentVideoElement().controls=this._contentVideoControls,e===a.TIME_POSITION_CLASS_PREROLL&&this._context.getContentVideoElement().load()}}else a.debug(\"ContentVideoExtension: extension is not enabled, do nothing.\")}),a.debug(\"ContentVideoExtension: enabling content video pause resume request handling.\"),this._context.addEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause),this._context.addEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume),a.debug(\"ContentVideoExtension: enabling content video source management.\"),this._context.addEventListener(a.EVENT_SLOT_STARTED,this._onAttach),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onDetach)},_respondPauseResume(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,!0)},dispose(){a.debug(\"ContentVideoExtension.dispose()\"),this._context&&(this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause),this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume),this._context.removeEventListener(a.EVENT_SLOT_STARTED,this._onAttach),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onDetach),this._context=null)}},a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension,a._instanceCounter=0,a._instanceQueue={},a.Context=function(e){this._adManager=e,this._eventDispatcher=new a.EventDispatcher,this._adRequest=new a.AdRequest(this),this._adResponse=null,this._videoAsset=new a.VideoAsset(this),this._temporalSlotBase=null,this._videoDisplaySize={},this._globalLevelParameterDictionary={},this._overrideLevelParameterDictionary={},this._rendererManifest={},this._overriddenAdRenderers=[],this._extensionManager=new a.ExtensionManager(this),this._totalSetDisplaySizeCount=this._autoSetDisplaySizeCount=this._requestState=0,this._instanceId=a._instanceCounter,a._instanceQueue[`Context_${a._instanceCounter}`]=this,a._instanceCounter++,this._contentVideoAttached=!1,this._currentContentPlayheadTime=0,this._ss_id=\"\",this._ss_networkId=this._ss_pageViewRandom=0,this._ss_idType=a.ID_TYPE_CUSTOM,this._va_location=this._va_networkId=this._va_duration=this._va_id=this._ss_fallbackId=\"\",this._va_autoPlayType=a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED,this._va_fallbackId=\"\",this._va_viewRandom=0,this._va_idType=a.ID_TYPE_CUSTOM,this._va_durationType=a.VIDEO_ASSET_DURATION_TYPE_EXACT,this._isRefreshRequest=!1,this._refreshSlots=[],this._adVolume=1,this._onVolumeChange=this.__onVolumeChange.bind(this)},a.Context.prototype={getAdVolume(){return this._adVolume},setAdVolume(e){if(a.debug(\"Context.setAdVolume\",e),this.getContentVideoElement())if(\"number\"!=typeof e||e<0||e>1)a.debug(`Invalid volume: ${e}`);else if((a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_IPAD)&&e>0&&e<1)a.debug(\"iOS doesn't allow volume values other than 0 and 1, ignore.\");else if(e===this._adVolume)a.debug(\"Volume did not change, ignore.\");else{this._adVolume=e,e=this.getTemporalSlots();for(let t=0;t<e.length;++t){let i=e[t];if(i.getType()===a.SLOT_TYPE_TEMPORAL&&i.getState()!==a.MediaInitState.instance&&i.getState()!==a.MediaEndState.instance&&(i=i.getCurrentAdInstance())){i.setVolume(this._adVolume);break}}}else a.debug(\"No video element set, ignore.\")},__onVolumeChange(e){a.debug(`Context._onVolumeChange(): event = ${e.type}`),a.debug(`Context._onVolumeChange(): video element is muted: ${this.getContentVideoElement().muted}`),0!==this._adVolume||this.getContentVideoElement().muted?this.setAdVolume(this.getContentVideoElement().muted?0:this.getContentVideoElement().volume):this.setAdVolume(this.getContentVideoElement().volume)},addRenderer(e,t,i,n,s,a,r){this._overriddenAdRenderers.push({url:e,baseUnit:t,contentType:i,creativeApi:a,slotType:n,soAdUnit:s,parameter:r})},setCapability(e,t){a.debug(\"Context.setCapability\",e,t),this._adRequest.setCapability(e,t)},addKeyValue(e,t){a.debug(\"Context.addKeyValue\",e,t),this._adRequest.addKeyValue(e,t)},setParameter(e,t,i){if(a.debug(\"Context.setParameter\",e,t,i),i===a.PARAMETER_LEVEL_GLOBAL)i=this._globalLevelParameterDictionary;else{if(i!==a.PARAMETER_LEVEL_OVERRIDE)return;i=this._overrideLevelParameterDictionary}null==t?delete i[e]:i[e]=t},getParameter(e){return e?this._overrideLevelParameterDictionary.hasOwnProperty(e)?this._overrideLevelParameterDictionary[e]:this._adResponse&&this._adResponse._profileParameters.hasOwnProperty(e)?this._adResponse._profileParameters[e]:this._globalLevelParameterDictionary.hasOwnProperty(e)?this._globalLevelParameterDictionary[e]:null:null},setVideoState(e){a.debug(\"Context.setVideoState\",e),this._videoAsset.setVideoState(e)},registerVideoDisplayBase(e){if(a.debug(\"Context.registerVideoDisplayBase\",e),e&&\"string\"==typeof e){if(this._temporalSlotBase&&this._temporalSlotBase.id===e){a.debug(\"Context.registerVideoDisplayBase\",\"register the same display base, will only change size\");var t=this._temporalSlotBase.getElementsByTagName(\"video\")}else{if(this._temporalSlotBase&&this.getContentVideoElement().removeEventListener(\"volumechange\",this._onVolumeChange),this._temporalSlotBase=document.getElementById(e),!this._temporalSlotBase)return void a.warn(\"Context.registerVideoDisplayBase\",\"could not get element\",e);if(0===(t=this._temporalSlotBase.getElementsByTagName(\"video\")).length)return a.warn(\"Context.registerVideoDisplayBase\",\"could not get video element from\",e),void(this._temporalSlotBase=null);this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]=t[0],this.getContentVideoElement().addEventListener(\"volumechange\",this._onVolumeChange),this._adVolume=t[0].muted?0:t[0].volume}this._setVideoDisplaySizeByContentVideo(t[0])}else a.warn(\"Context.registerVideoDisplayBase\",\"id required\")},setContentVideoElement(e){if(a.debug(\"Context.setContentVideoElement()\"),e&&e.parentNode){const t=this._temporalSlotBase;this._temporalSlotBase=e.parentNode,this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]===e?a.debug(\"Context.setContentVideoElement\",\"set the same video in same div, will only change size\"):(t&&t[`_fw_contentVideo_${this._instanceId}`]&&t[`_fw_contentVideo_${this._instanceId}`].removeEventListener(\"volumechange\",this._onVolumeChange),this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]=e,this.getContentVideoElement().addEventListener(\"volumechange\",this._onVolumeChange),this._adVolume=this.getContentVideoElement().muted?0:this.getContentVideoElement().volume),this._setVideoDisplaySizeByContentVideo(e)}else a.warn(\"Context.setContentVideoElement\",\"contentVideo and contentVideo.parentNode is required\")},getContentVideoElement(){return this._temporalSlotBase?this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]:(a.warn(\"SlotBase is null\"),null)},setVideoDisplaySize(e,t,i,n,s){a.debug(`Context.setVideoDisplaySize(${Array.prototype.slice.call(arguments).join(\",\")})`),this._totalSetDisplaySizeCount++,this._videoDisplaySize={left:e,top:t,width:i,height:n,position:s};for(let e=this.getTemporalSlots(),t=0;t<e.length;++t){const s=e[t];if(s.setWidth(i),s.setHeight(n),s.getState()===a.MediaPlayingState.instance||s.getState()===a.MediaReplayingState.instance){(e=s.getCurrentAdInstance())&&((e=e.getRendererController().getRenderer())&&e.resize?e.resize():a.debug(\"renderer do not support resize\"));break}}},getVideoDisplaySize(){function e(e){return e=parseInt(e,10),isNaN(e)&&(e=0),e}return this._videoDisplaySize.left=e(this._videoDisplaySize.left),this._videoDisplaySize.right=e(this._videoDisplaySize.right),this._videoDisplaySize.width=e(this._videoDisplaySize.width),this._videoDisplaySize.height=e(this._videoDisplaySize.height),this._videoDisplaySize},setVideoDisplayCompatibleSizes(e){a.debug(\"Context.setVideoDisplayCompatibleSizes\",e),this._adRequest.setVideoDisplayCompatibleSizes(e)},resize(e,t){if(a.debug(`Context.resize(${Array.prototype.slice.call(arguments).join(\",\")})`),!this._temporalSlotBase)return a.warn(\"SlotBase is null\"),null;this.setVideoDisplaySize(this._videoDisplaySize.left,this._videoDisplaySize.right,e,t,this._videoDisplaySize.position)},setProfile(e){a.debug(\"Context.setProfile\",e),this._adRequest.setProfile(e)},setVideoAsset(e,t,i,n,s,r,o,l,d){a.debug(`Context.setVideoAsset(${Array.prototype.slice.call(arguments).join(\",\")})`),this._videoAsset.setVideoAsset(e,t,i,n,s,r,o,l,d),this._va_id=e,this._va_duration=t,this._va_networkId=i,this._va_location=n,this._va_autoPlayType=s,this._va_viewRandom=r,this._va_idType=o,this._va_fallbackId=l,this._va_durationType=d},setVideoAssetCurrentTimePosition(e){a.debug(`Context.setVideoAssetCurrentTimePosition(${e})`),this._videoAsset.setVideoAssetCurrentTimePosition(e)},setSiteSection(e,t,i,n,s){a.debug(`Context.setSiteSection(${Array.prototype.slice.call(arguments).join(\",\")})`),this._adRequest.setSiteSection(e,t,i,n,s),this._ss_id=e,this._ss_networkId=t,this._ss_pageViewRandom=i,this._ss_idType=n,this._ss_fallbackId=s},setVisitor(e,t){a.debug(`Context.setVisitor(${Array.prototype.slice.call(arguments).join(\",\")})`),this._adRequest.setVisitor(e,t)},startSubsession(e){a.debug(`Context.startSubsession(${e})`),this._adRequest.setSubsessionToken(e)},setRequestMode(e){a.debug(`Context.setRequestMode(${e})`),this._adRequest.setRequestMode(e)},setRequestDuration(e){a.debug(`Context.setRequestDuration(${e})`),this._adRequest.setRequestDuration(e)},addCandidateAd(e){a.debug(`Context.addCandidateAd(${e})`),this._adRequest.addCandidateAd(e)},addTemporalSlot(e,t,i,n,s,r,o,l){a.debug(`Context.addTemporalSlot(${Array.prototype.slice.call(arguments).join(\",\")})`),this._adRequest.addTemporalSlot(e,t,i,n,s,r,o,l)},getTemporalSlots(){return this._adResponse?this._adResponse._temporalSlots.slice():[]},getSlotByCustomId(e){return this._adResponse?this._adResponse.getSlotByCustomId(e):null},getSlotsByTimePositionClass(e){let t,i=[];if(this._adResponse){for(t=0;t<this._adResponse._temporalSlots.length;t++)this._adResponse._temporalSlots[t].getTimePositionClass()===e&&i.push(this._adResponse._temporalSlots[t]);for(t=0;t<this._adResponse._siteSectionNonTemporalSlots.length;t++)this._adResponse._siteSectionNonTemporalSlots[t].getTimePositionClass()===e&&i.push(this._adResponse._siteSectionNonTemporalSlots[t]);for(t=0;t<this._adResponse._videoPlayerNonTemporalSlots.length;t++)this._adResponse._videoPlayerNonTemporalSlots[t].getTimePositionClass()===e&&i.push(this._adResponse._videoPlayerNonTemporalSlots[t])}return i},submitRequest(e){if(a.debug(\"Context.submitRequest\",s),this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{}),this._requestState)a.warn(\"Context.submitRequest: request already submitted\");else if(a.Util.isBlank(this._adManager._serverURL))a.warn(\"Context.submitRequest: serverURL is not set\");else{if(this._requestState=1,this._adRequest.scanPageSlots(),this._isRefreshRequest){var t={};let e,n;for(s=[],e=0;e<this._refreshSlots.length;e++){const r=this._refreshSlots[e];if(void 0!==this._adRequest._slotScanner._slots[r]){t[r]=this._adRequest._slotScanner._slots[r];var i=t[r].split(\"&\");for(n=0;n<i.length;n++)-1!==i[n].search(\"flag\")&&(i[n]=\"flag=-cmpn\");t[r]=i.join(\"&\")}for(n=0;n<this._adRequest._slotScanner._knownSlots.length;n++)this._adRequest._slotScanner._knownSlots[n].id===r&&((i=this._adRequest._slotScanner._knownSlots[n]).acceptCompanion=!1,i.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,s.push(i))}this._adRequest._slotScanner._slots=t,this._adRequest._slotScanner._knownSlots=s}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)&&(a.debug(\"Context.submitRequest: enabling Safari transport mechanism globally\"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0),\".js\"!==(t=this._adManager._serverURL).substring(t.length-3,t.length)&&(t=this._adRequest.generateTypeBRequestUrl());var n=this,s=e;(\"number\"!=typeof s||s<=0||!s)&&(s=5),setTimeout(function(){1===n._requestState&&(a.warn(\"Context.submitRequest: request timeout\"),n.requestComplete(null))},1e3*s),a.log(\"Context.submitRequest: sending request to\",t,\"timeout\",s),a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug(\"Context.submitRequest:\",\"use json2\"),a.Util.pingURLWithForm(t,this._instanceId,!0),n._onMessagePosted=function(e){\"object\"==typeof e.data&&e.data.hasOwnProperty(\"cbfn\")&&e.data.cbfn.indexOf(`['Context_${n._instanceId}']`)>-1&&n.requestComplete(e.data.response)},window.addEventListener(\"message\",n._onMessagePosted,!1)):a.Util.pingURLWithScript(t)}},requestComplete(e){if(1!==this._requestState)a.warn(\"ad request complete after timeout\"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:"],[-1,"!"],[0,"1});else{if(this._requestState=2,a.debug(\"Context.requestComplete\"),a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener(\"message\",this._onMessagePosted,!1);var t=document.getElementById(`_fw_request_iframe_${this._instanceId}`);document.body.removeChild(t)}if(null!=e){a._instanceQueue[`Context_${this._instanceId}`]=null,this._adResponse=new a.AdResponse(this),this._adResponse.parse(e,this._temporalSlotBase),a.log(\"Ad request succeeded\"),t=(this._adResponse._profileParameters.autoloadExtensions||\"\").split(\",\");for(let e=0;e<t.length;e++){const i=t[e].trim();a.log(`Loading extension: ${i}`),this.loadExtension(i)}for(this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!0,response:e}),t=this._adResponse.getSiteSectionNonTemporalSlots(),e=0;e<t.length;++e)a.log(\"Auto play site section nonTemporal slots\"),t[e].play();for(t=this._adResponse.getVideoPlayerNonTemporalSlots(),e=0;e<t.length;++e)a.log(\"Auto play video player nonTemporal slots\"),t[e].play()}else a.warn(\"Ad request failed\"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:"],[-1,"!"],[0,"1})}},addEventListener(e,t){a.debug(\"Context.addEventListener\",e),this._eventDispatcher.addEventListener(e,t)},removeEventListener(e,t){a.debug(\"Context.removeEventListener\",e),this._eventDispatcher.removeEventListener(e,t)},dispatchEvent(e,t){if(a.log(\"Context.dispatchEvent\",e),e===a.EVENT_SLOT_STARTED){var i=t.slot.getTimePositionClass();i!==a.TIME_POSITION_CLASS_PREROLL&&i!==a.TIME_POSITION_CLASS_MIDROLL&&i!==a.TIME_POSITION_CLASS_POSTROLL||(this._contentVideoAttached=!0,this._markCurrentContentPlayheadTime())}else e===a.EVENT_SLOT_ENDED&&((i=t.slot.getTimePositionClass())===a.TIME_POSITION_CLASS_PREROLL||i===a.TIME_POSITION_CLASS_MIDROLL||i===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!1);(t=t||{}).type=e,t.target=this,this._eventDispatcher.dispatchEvent(t)},dispose(){if(a.debug(\"Context.dispose\"),this.setVideoState(a.VIDEO_STATE_STOPPED),this._adResponse){if(this._temporalSlotBase){for(let e=0,t=this._adResponse._temporalSlots||[];e<t.length;++e){const i=t[e];if(i._onContentVideoTimeUpdate){const e=this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`];e&&e.removeEventListener(\"timeupdate\",i._onContentVideoTimeUpdate,!1),i._onContentVideoTimeUpdate=null}}this.getContentVideoElement().removeEventListener(\"volumechange\",this._onVolumeChange),this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]=null}this._isRefreshRequest=!1,this._refreshSlots=[],this._extensionManager.dispose(),this._extensionManager=null}},loadExtension(e){this._extensionManager.load(e,this)},_markCurrentContentPlayheadTime(){const e=this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`].currentTime;e>0&&(this._currentContentPlayheadTime=e)},_getContentPlayheadTime(){let e=-1;return!this._contentVideoAttached&&this._temporalSlotBase&&this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`]&&(e=this._temporalSlotBase[`_fw_contentVideo_${this._instanceId}`].currentTime),e>0?e:this._currentContentPlayheadTime},_requestContentVideoToPauseBySlot(e){this._videoAsset.requestPauseBySlot(e)},_requestContentVideoToResumeBySlot(e){this._videoAsset.requestResumeBySlot(e)},_setVideoDisplaySizeByContentVideo(e){if(this._autoSetDisplaySizeCount===this._totalSetDisplaySizeCount){let t=e.style.left,i=e.style.top,n=e.offsetWidth?e.offsetWidth:e.style.pixelWidth,s=e.offsetHeight?e.offsetHeight:e.style.pixelHeight;e=e.style.position,this._autoSetDisplaySizeCount++,this.setVideoDisplaySize(t,i,n,s,e)}},_replacePageSlot(b,c){let d;a.debug(\"fw replace %s\",b);try{var e=document.getElementById(b)?document:parent.document.getElementById(b)?parent.document:null,f=document.getElementById(b)?\"window\":parent.document.getElementById(b)?\"parent\":null}catch(t){f=e=null}if(!e)for(var g=0;g<window.frames.length;g++)try{window.frames[g].document.getElementById(b)&&(e=window.frames[g].document,f=`window.frames[${g}]`)}catch(e){a.debug(e)}if(f&&(d=`${f}.document`),a.debug(\"fw replacing slot %s in frame %s\",b,d),!e)throw`Slot element not found: ${b}`;g=e.getElementById(`_fw_container_${b}`),g.innerHTML=c,c=g.getElementsByTagName(\"script\");const h=e.getElementsByTagName(\"head\")[0];for(g=0;g<c.length;++g)if(a.PLATFORM_IS_FIREFOX||c[g].src){var k=e.createElement(\"script\");c[g].charset&&(k.charset=c[g].charset),c[g].src&&(k.src=c[g].src),c[g].innerHTML&&(k.innerHTML=c[g].innerHTML),k.onload=k.onreadystatechange=function(){this.readyState&&\"loaded\"!==this.readyState&&\"complete\"!==this.readyState||h.removeChild(k)},a.debug(\"fw append script for %s\",b),h.appendChild(k)}else k=c[g].innerHTML,k=k.replace(/var fw_scope = document;/,`var fw_scope=${d};`),k=k.replace(/var fw_scope_window = window;/,`var fw_scope_window=${f};`),a.debug(\"fw eval in %s for %s, %s\",d,b,k),eval(k);a.debug(\"fw finish replace %s\",b)}},a.Context.prototype.constructor=a.Context,a.DisplayRefreshExtension=function(){this.REFRESH_TYPE_NONE=\"refresh_none\",this.REFRESH_TYPE_AD=\"refresh_ad\",this.REFRESH_TYPE_TIME=\"refresh_time\",this.REPLACE_TYPE_NONE=\"replace_none\",this.REPLACE_TYPE_BLANK=\"replace_blank\",this.REPLACE_TYPE_AD=\"replace_ad\",this._subContext=null,this._displaySlots=[],this._companionSlots=[],this._keyValues=[],this._globalParameters=[],this._overrideParameters=[],this._refreshType=this.REFRESH_TYPE_NONE,this._replaceType=this.REPLACE_TYPE_NONE,this._refreshInterval=0,this._refreshTimer=null,this._firstTemporalAd=!0,this._REQUEST_TIME_OUT=5},a.DisplayRefreshExtension.prototype={init(e){this._context=e,a.debug(\"DisplayRefreshExtension.init(context)\"),this._onRendererEvent=a.Util.bind(this,function(e){a.debug(\"DisplayRefreshExtension._onRendererEvent()\"),e.subType===a.EVENT_AD_IMPRESSION&&this._onAdStarted(e)}),this._onSlotEnded=a.Util.bind(this,function(e){const t=e.slot.getTimePositionClass();if(e=e.slot,a.debug(\"DisplayRefreshExtension._onSlotEnded()\",e,t),null!=e&&t!==a.TIME_POSITION_CLASS_DISPLAY&&0!==e.getAdInstances().length)if(this._refreshType===this.REFRESH_TYPE_AD)this._resetSubContext(),this._refreshSlots(this._displaySlots);else if(this._refreshType===this.REFRESH_TYPE_TIME){this._resetSubContext(),this._refreshSlots(this._displaySlots);const e=this;this._refreshTimer=setInterval(function(){a.debug(\"DisplayRefreshExtension._onTimeout()\"),e._resetSubContext(),e._refreshSlots(e._displaySlots)},1e3*this._refreshInterval)}}),this._onRequestComplete=a.Util.bind(this,function(e){if(a.debug(\"DisplayRefreshExtension._onRequestComplete()\"),e.success){switch(this._context.getParameter(\"refreshType\")){case\"ad\":this._refreshType=this.REFRESH_TYPE_AD;break;case\"time\":this._refreshInterval=this._context.getParameter(\"refreshInterval\"),this._refreshType=this._refreshInterval>0?this.REFRESH_TYPE_TIME:this.REFRESH_TYPE_NONE;break;default:this._refreshType=this.REFRESH_TYPE_NONE}switch(this._context.getParameter(\"replaceMissingCompanion\")){case\"blank\":this._replaceType=this.REPLACE_TYPE_BLANK;break;case\"ad\":this._replaceType=this.REPLACE_TYPE_AD;break;default:this._replaceType=this.REPLACE_TYPE_NONE}if(this._refreshType!==this.REFRESH_TYPE_NONE||this._replaceType!==this.REPLACE_TYPE_NONE){if(this._displaySlots=this._context.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),this._companionSlots=this._displaySlots.filter(function(e){return e.getAcceptCompanion()}),this._keyValues=this._context._adRequest._keyValues,this._globalParameters=this._context._globalLevelParameterDictionary,this._overrideParameters=this._context._overrideLevelParameterDictionary,this._firstTemporalAd=!0,this._context.addEventListener(a.EVENT_AD,this._onRendererEvent),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._refreshType===this.REFRESH_TYPE_TIME){const e=this;this._refreshTimer=setInterval(function(){a.debug(\"DisplayRefreshExtension._onTimeout()\"),e._resetSubContext(),e._refreshSlots(e._displaySlots)},1e3*this._refreshInterval)}}else this._refreshTimer&&clearInterval(this._refreshTimer)}else a.debug(\"DisplayRefreshExtension: request complete failed\")}),this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete)},_resetSubContext(){a.debug(\"DisplayRefreshExtension._resetSubContext()\"),this._subContext=this._context._adManager.cloneContext(this._context),this._subContext._extensionManager._displayRefreshExtension.dispose(),this._subContext._extensionManager._videoStateExtension.dispose(),this._subContext.setCapability(a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_STATUS_OFF),this._subContext.setCapability(a.CAPABILITY_DISPLAY_REFRESH,a.CAPABILITY_STATUS_ON),this._playRefreshedSlots=a.Util.bind(this,function(e){if(a.debug(\"DisplayRefreshExtension._playRefreshedSlots()\"),e.success){e=this._subContext.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY);for(let t=0;t<e.length;t++)e[t].play()}else a.debug(\"DisplayRefreshExtension._playRefreshedSlots(): subContext refresh request error:\",e)}),this._subContext.addEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots);for(let e=this._subContext._adRequest._keyValues,t=0;t<this._keyValues.length;t++)e.indexOf(this._keyValues[t])<0&&e.push(this._keyValues[t]);for(var e in this._globalParameters)this._globalParameters.hasOwnProperty(e)&&this._subContext.setParameter(e,this._globalParameters[e],a.PARAMETER_LEVEL_GLOBAL);for(e in this._overrideParameters)this._overrideParameters.hasOwnProperty(e)&&this._subContext.setParameter(e,this._overrideParameters[e],a.PARAMETER_LEVEL_OVERRIDE)},_onAdStarted(e){a.debug(\"DisplayRefreshExtension._onAdStarted()\");let t=e.adInstance.getSlot();if(a.debug(\"DisplayRefreshExtension._onAdStarted(): slot: \",t,\" | timePositionClass:\",t.getTimePositionClass()),null!=t&&t.getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY&&(this._resetSubContext(),this._refreshTimer&&clearInterval(this._refreshTimer),this._replaceType!==this.REPLACE_TYPE_NONE)){e=e.adInstance,t=t.getAdInstances();for(let i=0;i<t.length;i++)e.getAdId()===t[i].getAdId()&&this._checkMissingCompanionForAd(e)}},_checkMissingCompanionForAd(e){a.debug(\"DisplayRefreshExtension._checkMissingCompanionForAd()\",e);let t,i=this._companionSlots.slice();for(e=e.getCompanionAdInstances(),t=0;t<e.length;t++){const n=i.indexOf(e[t].getSlot());n>-1&&i.splice(n,1)}if(this._firstTemporalAd&&(this._firstTemporalAd=!1,i=i.filter(function(e){if(e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL)return a.debug(\"DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial false in slot \",e.getCustomId()),!0;for(let t=e.getAdInstances(),i=0;i<t.length;i++)if(!t[i].isPlaceholder())return a.debug(\"DisplayRefreshExtension._checkMissingCompanionForAd(): first companion found in slot \",e.getCustomId()),!1;return a.debug(\"DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial true, no ad in slot \",e.getCustomId()),!0})),this._replaceType===this.REPLACE_TYPE_BLANK)for(t=0;t<i.length;t++)i[t].stop(),this._subContext._replacePageSlot(i[t].getCustomId(),\"\");else this._replaceType===this.REPLACE_TYPE_AD&&this._refreshSlots(i)},_refreshSlots(e){if(a.debug(\"DisplayRefreshExtension._refreshSlots()\",e),null!=e&&0!==e.length){for(let t=0;t<e.length;t++)e[t].stop(),this._subContext._refreshSlots.push(e[t].getCustomId());this._subContext._isRefreshRequest=!0,this._subContext.submitRequest(this._REQUEST_TIME_OUT)}},dispose(){a.debug(\"DisplayRefreshExtension.dispose()\"),this._context&&(this._context.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._context.removeEventListener(a.EVENT_AD,this._onRendererEvent),this._context=null),this._subContext&&(this._subContext.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots),this._subContext=null),this._displaySlots=[],this._companionSlots=[],this._keyValues=[],this._globalParameters=[],this._overrideParameters=[],this._refreshType=this.REFRESH_TYPE_NONE,this._replaceType=this.REPLACE_TYPE_NONE,this._refreshInterval=0,this._refreshTimer&&clearInterval(this._refreshTimer),this._refreshTimer=null,this._firstTemporalAd=!0}},a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension,a.EventCallback=function(e){this._url=this._name=this._type=null,this._showBrowser=!1,this._trackingUrls=[],this._adInstance=this._slot=null,this._context=e},a.EventCallback.prototype={},a.EventCallback.prototype.constructor=a.EventCallback,a.EventCallback.getEventCallback=function(e,t,i){for(var n,s=0;s<e.length;s++)if((n=e[s])._name===t&&n._type===i)return n;for(s=0;s<e.length;s++)if((n=e[s])._type===a.EVENT_TYPE_GENERIC)return(t=a.EventCallback.newEventCallback(n._context,t,i))&&(t._url=n._url,t._slot=n._slot,t._adInstance=n._adInstance,e.push(t)),t;return null},a.EventCallback.newEventCallback=function(e,t,i){if(i===a.EVENT_TYPE_GENERIC)e=new a.EventCallback(e);else if(i===a.EVENT_TYPE_ERROR)e=new a.ErrorEventCallback(e);else if(i===a.EVENT_TYPE_CLICK)e=new a.AdClickEventCallback(e);else if(i===a.EVENT_TYPE_STANDARD)e=new a.AdStandardEventCallback(e);else if(t===a.EVENT_SLOT_IMPRESSION||t===a.EVENT_SLOT_END)e=new a.SlotImpressionEventCallback(e);else if(t===a.EVENT_AD_IMPRESSION||t===a.EVENT_AD_IMPRESSION_END)e=new a.AdImpressionEventCallback(e);else if(t===a.EVENT_VIDEO_VIEW)e=new a.VideoViewEventCallback(e);else if(t===a.EVENT_RESELLER_NO_AD)e=new a.ResellerNoAdEventCallback(e);else{if(t!==a.EVENT_AD_FIRST_QUARTILE&&t!==a.EVENT_AD_MIDPOINT&&t!==a.EVENT_AD_THIRD_QUARTILE&&t!==a.EVENT_AD_COMPLETE)return null;e=new a.AdQuartileEventCallback(e)}return e._name=t,e._type=i,e},a.EventCallback.getShortType=function(e){let t=\"\";switch(e){case a.EVENT_TYPE_IMPRESSION:t=a.SHORT_EVENT_TYPE_IMPRESSION;break;case a.EVENT_TYPE_CLICK:t=a.SHORT_EVENT_TYPE_CLICK;break;case a.EVENT_TYPE_STANDARD:t=a.SHORT_EVENT_TYPE_STANDARD;break;case a.EVENT_TYPE_ERROR:t=a.SHORT_EVENT_TYPE_ERROR}return t},a.Util.mixin(a.EventCallback.prototype,{parse(e){if(e){this._usage=e.use,this._type=e.type,this._name=e.name,this._url=e.url,this._showBrowser=e.showBrowser,this._trackingUrls=[];let t=0;for(e=e.trackingUrls||[];t<e.length;t++)this._trackingUrls.push(e[t].value)}},copy(){const e=new this.constructor(this._context);return e._type=this._type,e._name=this._name,e._url=this._url,e._showBrowser=this._showBrowser,e._trackingUrls=this._trackingUrls.slice(),e._slot=this._slot,e._adInstance=this._adInstance,e},getUrl(e){let t=this._replaceMacrosInUrl(this._url,e);return this._name===a.EVENT_AD_MEASUREMENT?(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_ET,a.SHORT_EVENT_TYPE_IMPRESSION),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID,e[a.INFO_KEY_CONCRETE_EVENT_ID])):t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_ET,a.EventCallback.getShortType(this._type)),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CN,this._name),this._adInstance&&this._adInstance._creativeRenditionId>0&&(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID,this._adInstance._creativeRenditionId)),t},getTrackingUrls(e){let t=this._trackingUrls;if(this._adInstance){var i=this._type;i===a.EVENT_TYPE_CLICK&&(i=a.EVENT_TYPE_CLICK_TRACKING),t=t.concat(this._adInstance.getExternalEventCallbackUrls(this._name,i))}i=[];for(let n=0;n<t.length;n++){const s=a.Util.trim(this._replaceMacrosInUrl(t[n],e));a.Util.isBlank(s)||i.push(s)}return i},process(e){e=e||{},this._processTrackingUrls(e),a.Util.pingURL(this.getUrl(e))},_processTrackingUrls(e){this._shouldSkipSendingTrackingAndExternalUrls()||a.Util.pingURLs(this.getTrackingUrls(e))},_shouldSkipSendingTrackingAndExternalUrls:()=>!1,_needEmptyCT(e){let t=!1;return e&&!0===e[a.INFO_KEY_NEED_EMPTY_CT]&&(t=!0),t},_getAdPlayheadTime(){let e=-1;return this._adInstance&&(e=this._adInstance.getPlayheadTime()),e},_getCreativeAssetLocation(){let e=null;return this._adInstance&&this._adInstance.getActiveCreativeRendition()&&this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset()&&(e=this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl()),e},_getParameter(e){return this._adInstance?this._adInstance._rendererController.getParameter(e):this._slot?this._slot.getParameter(e):this._context.getParameter(e)},_replaceVASTMacro:(e,t,i)=>(a.log(\"replace VAST Macro: url=\",`${e}, macro=${t}, value=${i}`),e&&t&&(i=encodeURIComponent(i||\"\"),e=(e=e.replace(`[${t}]`,i)).replace(`%5B${t}%5D`,i)),e),_replaceMacrosInUrl(e,t){if(a.Util.isBlank(e))return e;t&&t[a.INFO_KEY_VAST_ERROR_CODE]&&(e=this._replaceVASTMacro(e,\"ERRORCODE\",t[a.INFO_KEY_VAST_ERROR_CODE])),this._getCreativeAssetLocation()&&(e=this._replaceVASTMacro(e,\"ASSETURI\",this._getCreativeAssetLocation()));const i=this._context._getContentPlayheadTime();this._adInstance&&(t=null!=i&&Number(i)>=0?a.Util.secondsToHms(i):\"\",e=this._replaceVASTMacro(e,\"CONTENTPLAYHEAD\",t),e=this._replaceVASTMacro(e,\"CACHEBUSTING\",a.Util.getFixedDigitRandomNumber(8)),e=this._replaceVASTMacro(e,\"TIMESTAMP\",a.Util.getDateStringInISOFormat(new Date))),e=e.replace(/#(ce?)\\{([^\\}]+)\\}/g,a.Util.bind(this,function(e,t,n){switch(a.log(`matchedSubString${e}`),e=\"ce\"===t,t=null,n){case\"ad.playheadTime\":t=(n=this._getAdPlayheadTime())>=0?`${Math.round(n)}`:\"\";break;case\"content.playheadTime\":t=i>=0?`${Math.round(i)}`:\"\";break;case\"creative.assetLocation\":t=this._getCreativeAssetLocation();break;default:0===n.indexOf(\"parameter.\")&&(t=this._getParameter(n.substr(10)))}return a.Util.isBlank(t)&&(t=\"\"),e?encodeURIComponent(t):t})),t=\"\";try{t=a.Util.getParameterInURL(e,a.URL_PARAMETER_KEY_CR)}catch(t){return a.warn(t),e}return a.Util.isBlank(t)||(e=a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(t))),e}}),a.AdClickEventCallback=function(e){a.EventCallback.call(this,e)},a.AdClickEventCallback.prototype=new a.EventCallback,a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback,a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl(e){let t=a.EventCallback.prototype.getUrl.call(this,e);return e[a.INFO_KEY_URL]&&(a.Util.isParameterInURL(t,a.URL_PARAMETER_KEY_CR)||(t=`${t}&${a.URL_PARAMETER_KEY_CR}=`),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CR,e[a.INFO_KEY_URL])),t},process(e){e=e||{};let t=this.getUrl(e),i=!0===this._showBrowser;i=e.hasOwnProperty(a.INFO_KEY_SHOW_BROWSER)?!0===e[a.INFO_KEY_SHOW_BROWSER]:i,e[a.INFO_KEY_URL]&&(i=!0),i&&!a.Util.isBlank(t)?(window.open(t),this._processTrackingUrls(e)):a.EventCallback.prototype.process.call(this,e)}}),a.AdImpressionEventCallback=function(e){a.EventCallback.call(this,e)},a.AdImpressionEventCallback.prototype=new a.EventCallback,a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback,a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl(e){let t=a.EventCallback.prototype.getUrl.call(this,e);return t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_METR,this._adInstance._metr),this._name!==a.EVENT_AD_IMPRESSION&&(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(e)?\"\":this._adInstance._timer.tick())),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process(e){a.MODULE_TYPE_TRANSLATOR!==this._adInstance.getRendererController().getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&(a.EventCallback.prototype.process.call(this,e),this._processed=!0)}}),a.AdQuartileEventCallback=function(e){a.EventCallback.call(this,e)},a.AdQuartileEventCallback.prototype=new a.EventCallback,a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback,a.Util.mixin(a.AdQuartileEventCallback.prototype,{getUrl(e){let t=a.EventCallback.prototype.getUrl.call(this,e);return t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_METR,this._adInstance._metr),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(e)?\"\":this._adInstance._timer.tick())},process(e){this._processed||(a.EventCallback.prototype.process.call(this,e),this._processed=!0)}}),a.AdStandardEventCallback=function(e){a.EventCallback.call(this,e)},a.AdStandardEventCallback.prototype=new a.EventCallback,a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback,a.ErrorEventCallback=function(e){a.EventCallback.call(this,e)},a.ErrorEventCallback.prototype=new a.EventCallback,a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback,a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl(e){let t=a.EventCallback.prototype.getUrl.call(this,e),i=e[a.INFO_KEY_ERROR_CODE];i||(i=a.ERROR_UNKNOWN);let n=e[a.INFO_KEY_ERROR_INFO];return n||(n=\"\"),(e=e[a.INFO_KEY_ERROR_MODULE])||(e=\"\"),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CN,i),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_KEY_VALUE,`${encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_MODULE)}=${encodeURIComponent(e)}&${encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_INFO)}=${a.PLATFORM_ID}/${encodeURIComponent(n)}`)}}),a.ResellerNoAdEventCallback=function(e){a.EventCallback.call(this,e)},a.ResellerNoAdEventCallback.prototype=new a.EventCallback,a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback,a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{}),a.SlotImpressionEventCallback=function(e){a.EventCallback.call(this,e)},a.SlotImpressionEventCallback.prototype=new a.EventCallback,a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback,a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue(){return this._slot.isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl(e){return e=a.EventCallback.prototype.getUrl.call(this,e),a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process(e){a.EventCallback.prototype.process.call(this,e),this._processed=!0}}),a.VideoViewEventCallback=function(e){a.EventCallback.call(this,e)},a.VideoViewEventCallback.prototype=new a.EventCallback,a.VideoViewEventCallback.prototype.constructor=a.VideoViewEventCallback,a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue(){return this._processed?a.INIT_VALUE_ZERO:a.INIT_VALUE_ONE},_getCTValue(){return this._context._videoAsset.getPlayheadTime()},getUrl(e){return e=a.EventCallback.prototype.getUrl.call(this,e),e=a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_INIT,this._getInitValue()),a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_CT,this._getCTValue())},_shouldSkipSendingTrackingAndExternalUrls(){return this._processed},process(e){a.EventCallback.prototype.process.call(this,e),this._processed=!0}}),a.EventDispatcher=function(){this._listeners={}},a.EventDispatcher.prototype={addEventListener(e,t){void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t)},dispatchEvent(e){if(\"string\"==typeof e&&(e={type:e}),e.target||(e.target=this),e.type&&this._listeners[e.type]instanceof Array)for(let t=this._listeners[e.type],i=0,n=t.length;i<n;i++)try{t[i]&&t[i].call(this,e)}catch(t){a.warn(\"EventDispatcher.dispatchEvent\",e.type,t)}},removeEventListener(e,t){if(this._listeners[e]instanceof Array){const i=this._listeners[e];if(null==t)this._listeners[e]=[];else{e=0;for(let n=i.length;e<n;e++)if(i[e]===t){i.splice(e,1);break}}}}},a.EventDispatcher.prototype.constructor=a.EventDispatcher,a.ExtensionManager=function(e){this._extensions={},this._context=e,this._surveyExtension=new a.SurveyExtension,this._surveyExtension.init(e),this._videoStateExtension=new a.VideoStateExtension,this._videoStateExtension.init(e),this._displayRefreshExtension=new a.DisplayRefreshExtension,this._displayRefreshExtension.init(e),this._contentVideoExtension=new a.ContentVideoExtension,this._contentVideoExtension.init(e)},a.ExtensionManager.prototype={_scriptLoaded(e){if(null==this._extensions[e])this._loadFail(e,\"Extension supposed to be loaded but not found\");else{let t=a.Util.getObject(e);\"function\"!=typeof t?this._loadFail(e,\"Script loaded but extension class not found\"):\"function\"==typeof(t=new t).init&&\"function\"==typeof t.dispose?(a.log(`Extension loaded: ${e}`),t.init(this._context),this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!0,moduleName:e})):this._loadFail(e,\"Extension loaded but is not supported\")}},_getExtensionNameFromUrl(e){for(var t,i,n=/(?!.*\\.{2})(?:[\\\\/\\?=#])([a-z][\\w\\.]+)(?:\\.js(#|\\?|$))/gi;null!=(t=n.exec(e));)i=t;return i?i[1]:null},_loadFail(e,t){a.log(`Extension failed to load. ${e} : ${t}`),this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!1,errorVal:t,moduleName:e})},load(e){if(e){var t=this._getExtensionNameFromUrl(e);if(null==t)this._loadFail(t,`Extension name not exsit in the Url. Url: ${e}`);else if(this._extensions[t]===e)a.log(\"Extension is already loaded\"),this._loadFail(t,\"Extension is already loaded\");else{let i=1*this._context.getParameter(\"moduleLoadTimeout\")||6e4,n=!1,s=this,r=window.setTimeout(function(){n=!0,s._loadFail(t,`Timeout occured while loading extension. Url: ${e}`)},i);a.Util.lazyJavaScriptLoad(e,function(){a.log(`async load extension successful, URL:${e}`),window.clearTimeout(r),n?(a.debug(\"Extension loaded after timeout, do nothing.\"),s._loadFail(t,`Timeout occured while loading extension. Url: ${e}`)):(s._extensions[t]=e,s._scriptLoaded(t))})}}else this._loadFail(t,\"Url cannot be empty\")},dispose(){this._extensions=null,this._surveyExtension.dispose(),this._surveyExtension=null,this._displayRefreshExtension.dispose(),this._displayRefreshExtension=null,this._videoStateExtension.dispose(),this._videoStateExtension=null,this._contentVideoExtension.dispose(),this._context=this._contentVideoExtension=null}},a.ExtensionManager.prototype.constructor=a.ExtensionManager,a.HTMLAdGenerator={log(e){a.log(`HTMLAdGenerator\\t${e}`)},getExtension:e=>e&&(e=e.match(/^[^?]+\\/[^?.]*(\\.\\w+)+/))?e[e.length-1].slice(1):\"\",generateAd(e,t,i,n,s,r,o){a.HTMLAdGenerator.log(`generatorAd(${[].slice.call(arguments,0).join(\",\")})`);let l=r,d=!1;switch(null==l&&(d=!0,l=a.HTMLAdGenerator.getExtension(e).toLowerCase()),l){case\"jpeg\":case\"jpg\":case\"gif\":case\"png\":case\"image/jpeg\":case\"image/jpg\":case\"image/gif\":case\"image/png\":case\"image/bmp\":l=a.HTMLAdGenerator.generateImageHTML(e,t);break;case\"swf\":case\"application/x-shockwave-flash\":l=a.HTMLAdGenerator.generateFlashHTML(e,t,i,n,s);break;case\"script\":case\"js\":case\"text/javascript\":case\"text/js_ref\":case\"application/x-javascript\":l=a.HTMLAdGenerator.generateScriptHTML(e,i,n,s);break;case\"iframe\":case\"html\":case\"htm\":case\"text/html\":case\"text/html_doc_ref\":case\"text/html_lit_nowrapper\":case\"text/html_doc_lit_mobile\":l=a.HTMLAdGenerator.generateIFrameHTML(e,t,i,n,s);break;default:l=d?a.HTMLAdGenerator.generateIFrameHTML(e,t,i,n,s):a.HTMLAdGenerator.generateAd(e,t,i,n,s,null,o)}return\"text/html_doc_lit_mobile\"===o?a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(l):l},generateImageHTML:(e,t)=>(a.HTMLAdGenerator.log(\"generateImageHTML\"),t?`<a rel=\"noopener noreferrer\" href=\"${t}\" target=\"_blank\"><img src=\"${e}\" border=\"0\" /></a>`:`<img src=\"${e}\" border=\"0\" />`),generateFlashHTML(e,t,i,n,s){a.HTMLAdGenerator.log(\"generateFlashHTML\");let r=e;return t&&t.length>0&&(r+=-1===e.indexOf(\"?\")?\"?\":\"&\",r+=`clickTag=${encodeURIComponent(t)}`),e=`<OBJECT classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\"WIDTH=\"${n}\" HEIGHT=\"${s}\" id=\"${i}_external_ad\">`+`<PARAM NAME=movie VALUE=\"${r}\"/>`+'<PARAM NAME=quality VALUE=high/><PARAM NAME=bgcolor VALUE=#FFFFFF/><PARAM NAME=\"allowScriptAccess\" VALUE=\"always\"/><PARAM NAME=\"loop\" VALUE=\"true\"/>',`${e+=`<EMBED src=\"${r}\" `}quality=high bgcolor=#FFFFFF WIDTH=\"${n}\" HEIGHT=\"${s}\"NAME=\"${i}_external_video\" ALIGN=\"\" TYPE=\"application/x-shockwave-flash\"PLUGINSPAGE=\"http://www.macromedia.com/go/getflashplayer\"></EMBED></OBJECT>`},generateIFrameHTML:(e,t,i,n,s)=>(a.HTMLAdGenerator.log(\"generateIFrameHTML\"),`<iframe height=\"${s}\" width=\"${n}\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\" leftmargin=\"0\" rightmargin=\"0\" marginwidth=\"0\" marginheight=\"0\" src=\"${e}\"></iframe>`),docLitToHTMLLit:(e,t,i,n)=>(a.HTMLAdGenerator.log(\"docLitToHTMLLit\"),`<iframe id=\"_fw_frame_${t}\" width=\"${i}\" height=\"${n}\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\" scrolling=\"no\"></iframe><script language=\"javascript\" type=\"text/javascript\" id=\"_fw_container_js_${t}\">if(!fw_targets) {var fw_targets = [];}var _fw_wr;var fw_scope = document;var fw_content = '${a.Util.encodeToHex(e)}';var trgtFrm = fw_scope.getElementById(\"_fw_frame_${t}\");trgtFrm = (trgtFrm.contentWindow) ? trgtFrm.contentWindow : (trgtFrm.contentDocument.document) ? trgtFrm.contentDocument.document : trgtFrm.contentDocument;fw_targets[\"${t}\"] = trgtFrm;if(navigator.userAgent.match(/\\\\bMSIE\\\\b/) || navigator.userAgent.match(/\\\\bOpera\\\\b/)){trgtFrm.document.open();trgtFrm.document.write(fw_content);setTimeout(function(){fw_close(fw_targets[\"${t}\"])}, 7500);} else if (navigator.userAgent.match(/\\\\bFirefox\\\\b/)) {if(true && fw_content.length < 2000){var ec = escape(fw_content);var fw_iframe_url = \"http://m2.feiwei.tv/g/lib/template/echo.html?s=\"+ec;fw_scope.getElementById(\"_fw_frame_${t}\").src = fw_iframe_url;} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}function fw_close(theFrame){theFrame.document.close();}<\\/script>`),htmlLitToDocLit:e=>(a.HTMLAdGenerator.log(\"htmlLitToDocLit\"),`<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><title>Advertisement</title></head><body leftmargin=\"0\" topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\">${e}</body></html>`),wrapUnsafeHTML:(e,t,i,n)=>a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(a.HTMLAdGenerator.docLitToHTMLLit(a.HTMLAdGenerator.htmlLitToDocLit(e),t,i,n)),wrapJSCode:(e,t,i,n)=>a.HTMLAdGenerator.wrapUnsafeHTML(`<script language=\"javascript\" type=\"text/javascript\">${e}<\\/script>`,t,i,n),generateScriptHTML:(e,t,i,n)=>(a.HTMLAdGenerator.log(\"generateScriptHTML\"),a.HTMLAdGenerator.wrapUnsafeHTML(`<script language=\"javascript\" type=\"text/javascript\" src=\"${e}\"><\\/script>`,t,i,n)),htmlLitToHTMLDocLitMobile:e=>(a.HTMLAdGenerator.log(\"htmlLitToHTMLDocLitMobile\"),`<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, target-densitydpi = device-dpi\" /><title>Advertisement</title><script type=\"text/javascript\">window._fw_page_url = \"\";<\\/script></head><body style=\"margin:0px;background-color:transparent;\">${e}</body></html>`)},a.NullRenderer=function(){this._rendererController=null},a.NullRenderer.prototype={start(e){this._rendererController=e,this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},info:()=>({moduleType:a.MODULE_TYPE_RENDERER}),getPlayheadTime:()=>-1,getDuration:()=>-1},a.NullRenderer.prototype.constructor=a.NullRenderer,a.PageSlotScanner=function(e){this.OPTION_INIT=1,this.OPTION_FCAI=2,this.OPTION_NIIC=4,this.OPTION_NOSA=8,this.OPTION_NSIT=16,this._knownSlots=[],this._slots={},this._candidateAds=[],this._slotOptionFound=!1,this._context=e},a.PageSlotScanner.prototype={isSlotDuplicate(e){for(let t=0;t<this._knownSlots.length;++t)if(this._knownSlots[t].id===e)return!0;return!1},findPageSlotByScope(e){const t=e.document;if(t){let d=/(^|\\s)_fwph(\\s|$)/,h=t.getElementsByTagName(\"span\");for(e._fw_admanager||(e._fw_admanager={}),e._fw_admanager.pageScanState=!0,e=0;e<h.length;++e){var i;let _=h[e];if(d.test(_.className)&&(_=_.getAttribute(\"id\"),(i=t.getElementById(`_fw_input_${_}`))&&!this.isSlotDuplicate(_)&&(i=i.getAttribute(\"value\")))){\";\"!==i.charAt(i.length-1)&&(i+=\";\");let e=(i=i.split(\";\"))[i.length-2],d=!1;-1!==e.search(\"lo=i\")&&(d=!0);let h=!1;-1!==e.search(\"prct=\")&&(h=!0),e.search(\"flag=\")<0&&(e+=\"&flag=\"),e.search(\"ptgt=\")<0&&(e=`ptgt=s&${e}`),i=[];var n,s,r=e.split(\"&\");e=!0;for(var o=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,l=0;l<r.length;++l){let t=r[l].split(\"=\");if(2===t.length){if(t[1]=decodeURIComponent(t[1]),\"ssct\"===t[0]){if(h)continue;h=!0,t[0]=\"prct\"}\"flag\"===t[0]?(-1===t[1].search(/[-\\+]cmpn/)&&(t[1]+=\"+cmpn\"),\"+\"!==t[1].charAt(0)&&\"-\"!==t[1].charAt(0)&&(t[1]=`+${t[1]}`),d&&-1===t[1].search(\"-init\")&&(t[1]+=\"-init\"),-1!==t[1].search(\"-nrpl\")&&(t[1]=t[1].replace(\"-nrpl\",\"+cmpn\")),-1!==t[1].search(\"-cmpn\")&&(e=!1),o=this._getInitialOption(t[1]),this._slotOptionFound||(o=d?a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL:a.SLOT_OPTION_INITIAL_AD_STAND_ALONE)):\"w\"===t[0]?n=Number(t[1]):\"h\"===t[0]?s=Number(t[1]):\"cana\"===t[0]&&this._addCandidateAds(t[1]),t=`${encodeURIComponent(t[0])}=${encodeURIComponent(t[1])}`,i.push(t)}}h||(d=this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||\"text/html_doc_lit_mobile,text/html_doc_ref\",i.push(`prct=${encodeURIComponent(d)}`)),(d=t.getElementById(`_fw_container_${_}`))?(this._slots[_]=`${i.join(\"&\")};`,this._knownSlots.push({id:_,width:n,height:s,element:d,acceptCompanion:e,initialAdOption:o})):a.warn(`Failed to find container for slot ${_}`)}}}},scanPageSlots(){for(let e=0;e<window.frames.length;++e)try{a.debug(\"scanPageSlots in frame\",e),this.findPageSlotByScope(window.frames[e])}catch(e){a.debug(`PageSlotScanner: scanPageSlots exception ${e}`)}try{window.parent&&window.parent!==window&&(a.debug(\"scanPageSlots in parent frame\"),this.findPageSlotByScope(window.parent))}catch(e){a.debug(`PageSlotScanner: scanPageSlots exception ${e}`)}try{a.debug(\"scanPageSlots in current window\"),this.findPageSlotByScope(window)}catch(e){a.debug(`PageSlotScanner: scanPageSlots exception ${e}`)}},slotsToTypeBStr(){let e,t=\"\";for(e in this._slots)if(this._slots.hasOwnProperty(e)){let i=this._slots[e];-1===i.search(\"slid=\")&&(i=`slid=${encodeURIComponent(e)}&${i}`),\";\"!==(t+=i).charAt(t.length-1)&&(t+=\";\")}return t&&(t=t.substring(0,t.length-1)),t},_addCandidateAds(e){e=e.split(\",\");for(let t=0;t<e.length;t++){const i=parseInt(e[t],10);i>0&&this._candidateAds.push(i)}},_parseFlags(e){let t=[],i=[],n=\"\",s=!0;e+=\"+\";for(let a=0;a<e.length;++a){const r=e.charAt(a);switch(r){case\"+\":case\"-\":\"\"!==n&&((s?t:i).push(n),n=\"\"),s=\"+\"===r;break;default:n+=r}}return[t,i]},_getInitialOption(e){let t=!0,i=!1,n=0;e=this._parseFlags(e);for(var s=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,r=0;r<e.length;++r)for(let s=0;s<e[r].length;++s)switch(e[r][s].toString().toLowerCase()){case\"cmpn\":t=0===r;break;case\"nrpl\":t=0!==r;break;case\"init\":n=0===r?n&~this.OPTION_INIT:n|this.OPTION_INIT,i=!0;break;case\"fcai\":n=0===r?n|this.OPTION_FCAI:n&~this.OPTION_FCAI,i=!0;break;case\"niic\":n=0===r?n|this.OPTION_NIIC:n&~this.OPTION_NIIC,i=!0;break;case\"nosa\":n=0===r?n|this.OPTION_NOSA:n&~this.OPTION_NOSA,i=!0;break;case\"nsit\":n=0===r?n|this.OPTION_NSIT:n&~this.OPTION_NSIT,i=!0}switch(a.debug(`PageSlotScanner: _getInitialOption: acceptCompanion = ${t}`),n){case 0:i&&(s=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE);break;case 1:s=a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL;break;case 3:s=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY;break;case 2:s=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE;break;case 6:s=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE;break;case 8:s=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE;break;case 10:s=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE;break;case 16:s=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL;break;case 18:s=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL;break;default:s=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE}return this._slotOptionFound=i,s}},a.PageSlotScanner.prototype.constructor=a.PageSlotScanner,a.RendererController=function(e,t){let i=null,n=null,s={},r=a.RendererInitState.instance,o={},l=[],d=0;return{getAdInstance:()=>t,getContext:()=>e,getRendererState:()=>r,processEvent(e){let i=e.name;if(i===a.RENDERER_STATE_STARTED||i===a.RENDERER_STATE_COMPLETING||i===a.RENDERER_STATE_COMPLETED||i===a.RENDERER_STATE_FAILED)this.handleStateTransition(i,e.info);else{const n=this._inferEventType(i);if(n&&(n===a.EVENT_TYPE_CLICK&&e.info&&e.info[a.INFO_KEY_CUSTOM_EVENT_NAME]&&(i=e.info[a.INFO_KEY_CUSTOM_EVENT_NAME]),i!==a.EVENT_AD_MEASUREMENT||e.info[a.INFO_KEY_CONCRETE_EVENT_ID])){const s=i===a.EVENT_AD_INITIATED||i===a.EVENT_AD_BUFFERING_START||i===a.EVENT_AD_BUFFERING_END||i===a.EVENT_AD_VOLUME_CHANGE||e.info&&e.info.hasOwnProperty(\"apiOnly\")&&e.info.apiOnly;t.processEvent(i,n,e.info,s)}}},handleStateTransition(e,i){switch(e){case a.RENDERER_STATE_STARTED:r.notifyStarted(this);break;case a.RENDERER_STATE_COMPLETING:r.complete(this);break;case a.RENDERER_STATE_COMPLETED:r.complete(this),r.notifyCompleted(this);break;case a.RENDERER_STATE_FAILED:if(t.getSlot()._clearScheduledAdInstance(),i||(i={}),a.warn(\"FAIL\",\", FW ErrorModule:\",i[a.INFO_KEY_ERROR_MODULE],\", FW ErrorCode:\",i[a.INFO_KEY_ERROR_CODE],\", FW ErrorInfo:\",i[a.INFO_KEY_ERROR_INFO],\", VAST ErrorCode:\",i[a.INFO_KEY_VAST_ERROR_CODE]),(e=t.processEvent(a.EVENT_ERROR,a.EVENT_TYPE_ERROR,i))||a.debug(\"No EVENT_ERROR callback found\"),i)switch(i[a.INFO_KEY_ERROR_CODE]){case a.ERROR_NO_AD_AVAILABLE:case a.ERROR_PARSE:(e=t.processEvent(a.EVENT_RESELLER_NO_AD,a.EVENT_TYPE_IMPRESSION))||a.debug(\"No EVENT_RESELLER_NO_AD callback found.\")}r.fail(this);break;default:a.debug(\"Unknown event received\",e)}},setCapability(e,i){t.setMetr(e,i)},getVersion:()=>e._adManager.getVersion(),getParameter(i){if(!i)return null;if(e._overrideLevelParameterDictionary.hasOwnProperty(i))return e._overrideLevelParameterDictionary[i];if(t.getActiveCreativeRendition()&&void 0!==t.getActiveCreativeRendition().getParameter(i))return t.getActiveCreativeRendition().getParameter(i);const n=t._creative;return n&&void 0!==n.getParameter(i)?n.getParameter(i):void 0!==t.getSlot().getParameter(i)?t.getSlot().getParameter(i):e._adResponse._profileParameters.hasOwnProperty(i)?e._adResponse._profileParameters[i]:e._globalLevelParameterDictionary.hasOwnProperty(i)?e._globalLevelParameterDictionary[i]:s&&s.hasOwnProperty(i)?s[i]:null},getCompanionSlots(){for(var e=[],i=t._companionAdInstances,n=0;n<i.length;n++)i[n].isPlaceholder()&&e.push(i[n].getSlot());return e},createNullDrivingAdInstance(){const e=t.getSlot().scheduleAdInstance();return e.addCreativeRendition().setContentType(\"null/null\"),e},scheduleAdInstances(e){let i,n=[],s=null;if(0===(e=e||[]).length)return n;for(i=0;i<e.length;i++)e[i].getCustomId()===t.getSlot().getCustomId()&&(s=t.getSlot().scheduleAdInstance());if(!s)if(this.isTranslator())s=this.createNullDrivingAdInstance();else{if(!this.isRenderer())return n;s=t}for(let a=0;a<e.length;a++){if(e[a].getCustomId()===t.getSlot().getCustomId())s!==t&&n.push(s);else for(let r=0,d=s._companionAdInstances;r<d.length;r++)if(i=d[r],e[a]===i.getSlot()){if(this.isTranslator())n.push(i);else if(this.isRenderer()&&i.isPlaceholder()){const e=i.cloneForTranslation();s===t&&(o[e]=i),d[r]=e,n.push(e),l.push(e)}break}n.length<=a&&n.push(null)}return n},commitAdInstance(){if(this.isRenderer()&&t.isStarted()){for(let e=0;e<l.length;e++){const t=l[e];t&&t.getSlot().playCompanionAds(t)}l=[]}else a.warn(\"Skipping RendererController.commitAdInstance when called with driving ad not started or completed.\")},isRenderer:()=>i&&a.MODULE_TYPE_RENDERER===i.info()[a.INFO_KEY_MODULE_TYPE],isTranslator:()=>i&&a.MODULE_TYPE_TRANSLATOR===i.info()[a.INFO_KEY_MODULE_TYPE],playable:()=>r===a.RendererInitState.instance,reset(){r=a.RendererInitState.instance},play(){for(var e=t.getRenderableCreativeRenditions()||[],i=null,n=0;n<e.length;n++){const s=e[n];if(i=this._matchRendererClassName(s)){t.setActiveCreativeRendition(s);break}}0===d&&this._actualPlay(i)},_actualPlay(e){(n=a.Util.getObject(e)||a.Util.getObject(`${w}.${e}`))&&(i=new n),i?r.start(this):this.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:`Renderer class <${e}> not found`})},dispatchEvent(t,i){e.dispatchEvent(t,i)},requestContentStateChange(i){i?e._requestContentVideoToPauseBySlot(t.getSlot()):e._requestContentVideoToResumeBySlot(t.getSlot())},getRenderer:()=>i,setRenderer(e){i=e},setRendererState(e){r=e},getContentVideoElement:()=>e.getContentVideoElement(),_restorePlaceholdersForHybrid(){if(o&&this.isRenderer()){for(var e=[],i=0;i<t._companionAdInstances.length;i++){let n=t._companionAdInstances[i],s=o[n];s?e.push(s):e.push(n)}t._companionAdInstances=e}l.length>0&&this.isRenderer()&&(l=[])},rendererMatch(e){return!n||n===a.Util.getObject(this._matchRendererClassName(e))},_matchRendererClassName(i){function n(e,t,i){if(a.debug(`matching ${e} within ${t}`),!t)return!0;if((t=t.split(\",\"))[t.length-1]||t.pop(),i){for(e=e.toLowerCase(),i=0;i<t.length;i++)if(e===t[i].toLowerCase())return!0;return a.debug(\"not match\"),!1}return(t=t.indexOf(e)>=0)||a.debug(\"not match\"),t}let r=i.getPrimaryCreativeRenditionAsset().getContentType(),o=i.getContentType(),l=i.getWrapperType(),h=i.getCreativeApi(),_=i.getBaseUnit(),c=t.getSoAdUnit(),u=t.getSlot(),p=u.getType();if(u=u.getTimePositionClass(),a.debug(`match renderer for creativeRendition:${i.getId()}`),a.debug(`slot type:${p}`),a.Util.isBlank(o)&&a.Util.isBlank(l))return a.warn(\"renderer not match due to both contentType and wrapperType are empty\"),null;let E=e._rendererManifest[\"*\"];if(E||(E=e._rendererManifest[l]),E||(E=e._rendererManifest[o]),!E){p=e._overriddenAdRenderers.concat(e._adResponse._adRenderers);for(let e=0;e<p.length;e++){var g=p[e],T=!g.contentType;if(T||(l?T=n(l,g.contentType,!0):(r&&(T=n(r,g.contentType,!0)),T||(T=n(o,g.contentType,!0)))),T)if((T=!g.creativeApi)||(T=n(h,g.creativeApi)),T)if(g.baseUnit&&!n(_,g.baseUnit))a.debug(`can't match renderer ${g.url} due to baseUnit not match for creativeRendition:${i.getId()}`);else if(g.soAdUnit&&!n(c,g.soAdUnit))a.debug(`can't match renderer ${g.url} due to soAdUnit not match for creativeRendition:${i.getId()}`);else if(g.slotType&&!n(u.toUpperCase(),g.slotType.toUpperCase()))a.debug(`can't match renderer ${g.url} due to slotType not match for creativeRendition:${i.getId()}`);else{if(a.debug(`renderer ${g.url} matched for creativeRendition:${i.getId()}`),g.url){-1!==(i=(E=g.url).indexOf(\"?\"))&&(E=E.substring(0,i)),-1!==(i=E.lastIndexOf(\"/\"))&&(E=E.substring(i+1)),-1!==(i=E.lastIndexOf(\".js\"))&&(E=E.substring(0,i));var A={};if(g.parameter)for(i=[].concat(g.parameter),r=0;r<i.length;r++)if(i[r].hasOwnProperty(\"name\"))A[i[r].name]=i[r].value;else for(var m in i[r])i[r].hasOwnProperty(m)&&(A[m]=i[r][m]);if(a.Util.getObject(`${w}.${E}`)&&(E=`${w}.${E}`),a.Util.getObject(E))s=A,d=0;else{if(d>0)break;var f=this;m=1*this.getContext().getParameter(\"moduleLoadTimeout\")||6e4,d=window.setTimeout(function(){d=-1,f.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:`Load renderer timeout, URL:${g.url}`})},m),a.Util.lazyJavaScriptLoad(g.url,function(){a.log(`async load renderer successful, URL:${g.url}`),-1===d?a.debug(\"renderer loaded after timeout. WILL NOT PLAY.\"):(window.clearTimeout(d),d=0,s=A,f._actualPlay(E))})}break}a.debug(`can't match renderer ${g.url} due to creative api not match for creativeRendition:${i.getId()}`)}else a.debug(`can't match renderer ${g.url} due to contentType not match for creativeRendition:${i.getId()}`)}}return E||(a.Util.isBlank(l)&&\"null/null\"===o?`${w}.NullRenderer`:null)},_inferEventType:e=>e===a.EVENT_ERROR?a.EVENT_TYPE_ERROR:e===a.EVENT_AD_CLICK?a.EVENT_TYPE_CLICK:e===a.EVENT_AD_IMPRESSION||e===a.EVENT_AD_FIRST_QUARTILE||e===a.EVENT_AD_MIDPOINT||e===a.EVENT_AD_THIRD_QUARTILE||e===a.EVENT_AD_COMPLETE||e===a.EVENT_RESELLER_NO_AD?a.EVENT_TYPE_IMPRESSION:e===a.EVENT_AD_PAUSE||e===a.EVENT_AD_RESUME||e===a.EVENT_AD_REWIND||e===a.EVENT_AD_MUTE||e===a.EVENT_AD_UNMUTE||e===a.EVENT_AD_COLLAPSE||e===a.EVENT_AD_EXPAND||e===a.EVENT_AD_MINIMIZE||e===a.EVENT_AD_CLOSE||e===a.EVENT_AD_ACCEPT_INVITATION?a.EVENT_TYPE_STANDARD:e===a.EVENT_AD_MEASUREMENT||e===a.EVENT_AD_VOLUME_CHANGE||e===a.EVENT_AD_BUFFERING_START||e===a.EVENT_AD_BUFFERING_END||a.EVENT_AD_INITIATED||a.EVENT_AD_AUTO_PLAY_BLOCKED?a.EVENT_TYPE_GENERIC:null,pause(){a.log(\"RendererController.pause\"),i&&\"function\"==typeof i.pause?i.pause():a.log(\"Renderer.pause() is not implemented.\")},resume(){a.log(\"RendererController.resume\"),i&&\"function\"==typeof i.resume?i.resume():a.log(\"Renderer.resume() is not implemented.\")},stop(){a.log(\"RendererController.stop\"),d>0&&(d=-1),r.stop(this)}}},a.RenditionSelector=function(e,t,i,n){this._targetByterate=e,this._arWeight=t,this._pxWeight=i,this._conversionFactor=n},a.RenditionSelector.prototype={getBestFitRendition(e,t,i){const n=this;if(e.reverse(),!(e=e.filter(function(e){return e&&e.getPrimaryCreativeRenditionAsset()&&(e.getPrimaryCreativeRenditionAsset().getUrl()||e.getPrimaryCreativeRenditionAsset().getContent())&&a.Util.canPlayVideoType(e.getPrimaryCreativeRenditionAsset().getMimeType())}).sort(function(e,t){return n.getBitrate(e)-n.getBitrate(t)})).length)return null;let s=Number.MAX_VALUE,r=e.filter(function(e){return e=n.getBitrate(e),s=e<s?e:s,e<=n._targetByterate});return r.length||(r=e.filter(function(e){return n.getBitrate(e)<=s})),r.sort(function(e,s){return n.compareVisualMetrics(e,s,t,i)}).pop()},compareVisualMetrics(e,t,i,n){let s=this.calculateVisualRatios(e.getWidth(),e.getHeight(),i,n);return n=this.calculateVisualRatios(t.getWidth(),t.getHeight(),i,n),!s&&n?-1:s&&!n?1:s&&n&&(i=this._conversionFactor*this._arWeight*Math.log(n.arRatio),n=this._pxWeight*Math.log(n.pixelation),s=this.findDistance(this._conversionFactor*this._arWeight*Math.log(s.arRatio),this._pxWeight*Math.log(s.pixelation),0,0),(i=this.findDistance(i,n,0,0))!==s)?i-s:e.getPreference()-t.getPreference()},calculateVisualRatios(e,t,i,n){if(e>0&&t>0&&i>0&&n>0){let s=e/t,a=i/n;return s>a?n=i/s:i=n*s,{arRatio:s/a,pixelation:e*t/(i*n)}}return null},findDistance:(e,t,i,n)=>isNaN(e)||isNaN(i)||isNaN(t)||isNaN(n)?NaN:Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),getBitrate(e){const t=e.getDuration();return(e=e.getPrimaryCreativeRenditionAsset().getBytes())&&t&&!isNaN(e)&&!isNaN(t)&&e>0&&t>0?8*e/1e3/t:-1}},a.RenditionSelector.prototype.constructor=a.RenditionSelector,a.Slot=function(e){let t,i,n,s,r,o,l,d,h=\"\",_=null,c=null,u=null,p=null,E=[],g=[],T={},A=null,m=a.MediaInitState.instance,f=0,S=null,R=0,I=0,v=[],C=!1,N=!1,O=!0,P=[],y=!1;return{setAutoPlayBlocked(e){y=e},getSlotProfile:()=>c,setSlotProfile(e){c=e},setMediaState(e){m=e},setParameter(e,t){null==t?delete T[e]:T[e]=t},getParameter(e){if(e&&T.hasOwnProperty(e))return T[e]},getAdCount:()=>E.length,setCustomId(e){h=e},getCustomId:()=>h,setAdUnit(e){r=e},getAdUnit:()=>r,setType(e){_=e},getType:()=>_,setTimePosition(e){i=e},getTimePosition:()=>i,setTimePositionClass(e){S=e&&e.toUpperCase()},getTimePositionClass:()=>S,setWidth(e){n=e},getWidth:()=>S!==a.TIME_POSITION_CLASS_DISPLAY?n||e.getVideoDisplaySize().width:n,setHeight(e){s=1*e},getHeight:()=>S!==a.TIME_POSITION_CLASS_DISPLAY?s||e.getVideoDisplaySize().height:s,setBase(e){t=e},getBase:()=>t,setCuepointSequence(e){o=1*e?1*e:0},getCuepointSequence:()=>o,getVideoDisplaySize:()=>e.getVideoDisplaySize(),setMaxDuration(e){R=1*e?1*e:0},getMaxDuration:()=>R,setMinDuration(e){I=1*e?1*e:0},getMinDuration:()=>I,setAcceptContentType(e){if(e&&e.trim()){e=e.split(\",\");for(let t=0;t<e.length;t++)v.push(e[t].trim())}},getAcceptContentType:()=>v.join(\",\"),parse(t){if(t){h=t.customId,i=1*t.timePosition,S=t.timePositionClass&&t.timePositionClass.toUpperCase()||S,r=t.adUnit;for(var n,s=0,o=t.eventCallbacks||[];s<o.length;s++){n=o[s];var l=a.EventCallback.newEventCallback(e,n.name,n.type);l&&(l._slot=this,l.parse(n),g.push(l))}for(s=0,o=t.selectedAds||[];s<o.length;s++)n=o[s],t=[],l=new a.AdInstance(e),t.push(l),l._slot=this,l._slotCustomId=h,l._parentAdInstancesGroup=t,l.parse(n),E.push(t)}},getCurrentAdInstance:()=>u,isPauseSlot:()=>S===a.TIME_POSITION_CLASS_PAUSE_MIDROLL,play(t){if(y)a.log(\"Resuming previously blocked video ad now.\"),y=!1,e.getContentVideoElement()&&e.getContentVideoElement().play();else{for(let e=this.getAdInstances(),t=0;t<e.length;t++)e[t]._isSkipped=!1;S!==a.TIME_POSITION_CLASS_DISPLAY||O?(a.log(\"Slot.play\",S),C=!1,S===a.TIME_POSITION_CLASS_DISPLAY&&E.length>1&&E.splice(0,E.length-1),this._play(t)):(a.log(\"Slot is invisible. Push the play operation to the queue.\"),P.push({operation:this.play,argument:t}))}},stop(){a.log(\"Slot.stop\",S),S===a.TIME_POSITION_CLASS_DISPLAY&&(P=[]),m===a.MediaInitState.instance||m===a.MediaEndState.instance?a.log(\"Slot.stop, not start or already end, ignore\"):(C=!0,u?u.stop():a.warn(\"Slot.stop, no _currentAdInstance, ignore\"))},pause(){a.log(\"Slot.pause\"),S!==a.TIME_POSITION_CLASS_DISPLAY?u&&u.pause():a.log(\"Not a temporal slot. Ignore.\")},resume(){a.log(\"Slot.resume\"),S!==a.TIME_POSITION_CLASS_DISPLAY?u&&u.resume():a.log(\"Not a temporal slot. Ignore.\")},skipCurrentAd(){a.log(\"Slot.skipCurrentAd \",u),u?u.skip():a.log(\"Slot.skipCurrentAd, no _currentAdInstance, ignore\")},setVisible(e){if(S!==a.TIME_POSITION_CLASS_DISPLAY)a.log(\"Slot.setVisible is only for display ads.\");else if(a.log(\"Slot.setVisible\",e),O!==e&&(O=e))for(;P.length>0;)(e=P.pop()).operation&&e.operation.call(this,e.argument)},_play(e){A=A||e,m.play(this)},onStartPlaying(){this._onStartPlaying()},onStartReplaying(){this._onStartPlaying()},onCompletePlaying(){this._onCompletePlaying()},onCompleteReplaying(){this._onCompletePlaying()},playNextAdInstance(){a.log(\"Slot.playNextAdInstance \",S),this._playNextAdInstance()||m.complete(this)},scheduleAdInstance:()=>p=u.cloneForTranslation(),_clearScheduledAdInstance(){p=null},_onStartPlaying(){S===a.TIME_POSITION_CLASS_MIDROLL&&E.length>0&&e._requestContentVideoToPauseBySlot(this);const t=a.EventCallback.getEventCallback(g,a.EVENT_SLOT_IMPRESSION,a.EVENT_TYPE_IMPRESSION);t&&t.process(),this.dispatchSlotEvent(a.EVENT_SLOT_STARTED),this.playNextAdInstance()},dispatchSlotEvent(t){N||e.dispatchEvent(t,{slot:this})},_onCompletePlaying(){A&&A(),A=null,P=[];const t=a.EventCallback.getEventCallback(g,a.EVENT_SLOT_END,a.EVENT_TYPE_IMPRESSION);t&&t.process(),u=null,this.dispatchSlotEvent(a.EVENT_SLOT_ENDED),S===a.TIME_POSITION_CLASS_MIDROLL&&E.length>0&&e._requestContentVideoToResumeBySlot(this)},_playNextAdInstance(){return!(C||m!==a.MediaPlayingState.instance&&m!==a.MediaReplayingState.instance)&&(this._commitScheduledAdInstance(),!!(u=this._nextPlayableAdInstance())&&(u.reset(),u._isInitiatedSent||(u.getRendererController().processEvent({name:a.EVENT_AD_INITIATED}),u._isInitiatedSent=!0),u.getRendererController().play(),!0))},_commitScheduledAdInstance(){if(p){const e=u._parentAdInstancesGroup.indexOf(u);e>=0&&(p._parentAdInstancesGroup=u._parentAdInstancesGroup,u._parentAdInstancesGroup.splice(e,1,p),p=null)}},_nextPlayableAdInstance(){if(u){var e=u._parentAdInstancesGroup,t=e.indexOf(u),i=E.indexOf(e);i>=0&&t>=0&&(u._isImpressionSent||u._isSkipped||t===e.length-1)&&i++}else i=0;if(i<0||i>=E.length)return null;let n;if(m===a.MediaPlayingState.instance){for(e=E[i],n=0;n<e.length;n++)if((t=e[n]).getRendererController().playable())return t}else if(m===a.MediaReplayingState.instance)for(;i<E.length;i++){for(e=E[i],n=0;n<e.length;n++)if((t=e[n])._isImpressionSent)return t;for(n=0;n<e.length;n++)if((t=e[n]).getRendererController().getRendererState()!==a.RendererFailedState.instance&&!t._translated)return t}return null},toString:()=>`[Slot ${h}]`,getAdInstances(){for(var e=[],t=0;t<E.length;++t)for(let i=E[t],n=0;n<i.length;++n){const t=i[n];if(t.isPlayable()){e.push(t);break}}return e},getPlayheadTime(){for(var e=0,t=this.getAdInstances(),i=0;i<t.length;++i){if(t[i]===u){(t=u.getPlayheadTime())>-1&&(e+=t);break}{const n=t[i].getDuration();n>-1&&(e+=n)}}return f&&e>f&&(e=f),e},getTotalDuration(){if(_!==a.SLOT_TYPE_TEMPORAL)return-1;for(var e=0,t=this.getAdInstances(),i=0;i<t.length;++i){const n=t[i].getDuration();n>-1&&(e+=n)}return f=e},playCompanionAds(e){a.log(\"Slot.playCompanionAds\");const t=[];e._parentAdInstancesGroup=t,t.push(e),E.push(t),N=!0,u&&this.stop(),this.play()},getState:()=>m,setAcceptCompanion(e){l=e},getAcceptCompanion:()=>l,setInitialAdOption(e){d=e},getInitialAdOption:()=>d}},a.SurveyExtension=function(){this._surveyPingedIds=[]},a.SurveyExtension.prototype={init(e){this._context=e,a.log(`SurveyExtension.init(${Array.prototype.slice.call(arguments).join(\",\")})`),this._onAdStarted=a.Util.bind(this,function(e){if(this._parameters=this._getParameters(),this._parameters.enabled){a.log(\"SurveyExtension.onAdStarted()\");const t=e.adInstance;if(this._surveyPingedIds.indexOf(t.getAdId())>-1)a.log(\"won't pingback survey since it has been pinged back\");else{const i=t._creative.getParameter(\"_fw_survey_url\");if(i)try{a.log(`append${i} to head`);let n=document.getElementsByTagName(\"head\")[0],s=document.createElement(\"script\");s.setAttribute(\"type\",\"text/javascript\"),s.setAttribute(\"src\",i),n.appendChild(s),this._surveyPingedIds.push(t.getAdId())}catch(t){a.warn(\"Append survey to head\",e.type,t)}}}}),this._context.addEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted)},dispose(){a.log(\"SurveyExtension.dispose()\"),this._context.removeEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted),this._parameters=this._onAdStarted=null},_getParameters(){const e={};return e.enabled=\"false\"!==this._context.getParameter(a.PARAMETER_EXTENSION_SURVEY_ENABLED),a.log(e),e}},a.SurveyExtension.prototype.constructor=a.SurveyExtension,a.Timer=function(e,t){this._lastTickDate=new Date,this._duration=e||-1,this._playheadTime=-1,this._callback=t,this._state=-1},a.Timer.prototype={},a.Timer.prototype.constructor=a.Timer,a.Util.mixin(a.Timer.prototype,{tick(){let e=new Date,t=Math.round((e.getTime()-this._lastTickDate.getTime())/1e3);return this._lastTickDate=e,t},start(){if(0!==this._state){2!==this._state&&-1!==this._playheadTime||(this._playheadTime=0),this._state=0,this._timeStamp=new Date,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null);let e=this,t=1e3*(this._duration-this._playheadTime);t<0||(this._timeouter=window.setTimeout(function(){e.stop(),e._playheadTime=e._duration,e._callback&&e._callback()},t))}},pause(){0===this._state&&(this._state=1,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime)},stop(){this._state=2,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime},getPlayheadTime(){return 0===this._state?(new Date-this._timeStamp)/1e3+this._playheadTime:this._playheadTime},getCTValue(){return(new Date-this._timeStamp)/1e3},getDuration(){return this._duration}}),a.VastTranslator=function(){this._rendererController=this._request=null},a.VastTranslator.prototype={start(e){function t(e){a.log(`VastTranslator\\t${e}`)}function i(e){a.warn(`VastTranslator\\t${e}`)}function n(e,t){!function(e,t){if(e)if(e.length&&\"string\"!=typeof e)for(let i=0;i<e.length;i++)t(e[i].value);else e.value&&t(e.value)}(t,function(t){t&&e.push(t)})}function s(e){if(!e)return!1;for(let t=0;t<S.length;t++)if(a.Util.trim(S[t]).toLowerCase()===a.Util.trim(e).toLowerCase())return!0;return!1}function r(e){return e?(\"string\"!=typeof e&&(e=e.toString()),(e=a.Util.trim(e)).indexOf(\"://\")>-1?e:null):null}function o(e){this.code=this.url=null,this.height=this.width=NaN,this.resourceType=this.creativeType=null,this.bitrate=NaN,this.creativeApi=null,this.ad=e,this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null}function l(e){this._impressions=[],this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null,this.sequence=-1,this.universalAdId=null,this.vastRenditions=[],this.duration=NaN,this.adp=e,this.isDrivingAd=!1}function d(e){l.call(this,e)}function h(e){l.call(this,e)}function _(e){l.call(this,e)}function c(){}function u(e,i,n,s){if(e&&s&&s.length>0){t(`augmentCallbacks(${i}, ${n}, ${s})`);for(let a=e.getEventCallbackUrls(i,n),r=0;r<a.length;r++)s.indexOf(a[r])>-1&&(t(`augmentCallbacks() url = ${a[r]}`),s.unshift(a[r]));e.addEventCallbackUrls(i,n,s)}else t(`augmentCallbacks(${i}, ${n}, ${s}), empty callbacks`)}function p(e,i){t(\"initErrorTrackings()\"),e&&i&&u(e,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,i.errorTrackings)}function E(e,i){t(\"initTrackingEvents()\"),i&&e&&(u(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,i.creativeView),u(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,i.start),u(e,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,i.firstQuartile),u(e,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,i.midpoint),u(e,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,i.thirdQuartile),u(e,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,i.complete),u(e,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,i.mute),u(e,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,i.unmute),u(e,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,i.pause),u(e,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,i.resume),u(e,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,i.rewind),u(e,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,i.fullscreen),u(e,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,i.collapse),u(e,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,i.expand),u(e,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,i.stop),u(e,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,i.acceptInvitation))}function g(e,i,n,s,r){if(t(\"initClickAndImpressionEvents\"),e){if(i&&e.setClickThroughUrl(a.EVENT_AD_CLICK,i),n&&n.length>0&&u(e,a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK_TRACKING,n),s&&s.length>0)for(i=0;i<s.length;i++)s[i].url&&u(e,s[i].id,a.EVENT_TYPE_CLICK_TRACKING,[s[i].url]);r&&u(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,r)}}function T(e,n){if(t(\"initTemporalAdInstance\"),e||i(\"initTemporalAdInstance: Invalid adInstance\"),n.selectedDrivingAd){n.surveyUrl&&e._creative.setParameter(\"_fw_survey_url\",n.surveyUrl);let i=n.selectedDrivingAd,c=n.selectedDrivingRenditions;t(`vastRenditions:${c}`);for(var a=4===N,r=0;r<c.length;r++){var o=e.addCreativeRendition(),l=o.addCreativeRenditionAsset(\"VAST_CRA\",!0);let n=c[r];e:{var d=n.creativeType;switch(d){case\"video/mp4\":d=\"video/mp4-h264\";break e;case\"video/3gp\":d=\"video/3gpp\"}}if(t(`initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  ${[n.creativeApi,i.duration,n.width,n.height,n.url,d,n.creativeType]}`),o.setCreativeApi(n.creativeApi),isNaN(i.duration)||o.setDuration(i.duration),n.width&&!isNaN(n.width)&&o.setWidth(n.width),n.height&&!isNaN(n.height)&&o.setHeight(n.height),i.universalAdId&&o.setUniversalAdId(i.universalAdId),n.url&&l.setUrl(n.url),n.code&&l.setContent(n.code),l.setMimeType(n.creativeType),\"static\"===n.resourceType&&\"text/html\"===n.creativeType?l.setContentType(\"text/html_doc_ref\"):\"application/x-javascript\"===n.creativeType||\"application/javascript\"===n.creativeType?l.setContentType(\"text/js_ref\"):\"iframe\"===n.resourceType?l.setContentType(\"text/html_doc_ref\"):\"text/html\"===n.creativeType||\"text/html_doc_ref\"===n.creativeType?l.setContentType(\"text/html_doc_ref\"):\"text/html_doc_lit_mobile\"===n.creativeType?l.setContentType(\"text/html_doc_lit_mobile\"):a||s(d)?(l.setContentType(\"text/html_doc_lit_mobile\"),l.setUrl(null),l.setContent(A(e,C.getCustomId(),i,n,\"text/html_doc_lit_mobile\"))):l.setContentType(d),i.creativeData&&0!==i.creativeData.length&&(t(`initTemporalAdInstance(), set asset parameter creativeData:${i.creativeData}`),o.setParameter(\"creativeData\",i.creativeData)),a||s(d)||(n=n.bitrate,!isNaN(n)&&n>0&&l.setBytes(1e3*n*i.duration/8)),d=P,l=y,n=!1,o.getContentType()&&d){var h=o.getContentType().toLowerCase(),_=d.toLowerCase();h===_?n=!0:(0===h.indexOf(\"video/mp4\")&&0===_.indexOf(\"video/mp4\")||\"application/javascript\"===_&&\"text/js_ref\"===h)&&(o.setContentType(d),n=!0)}d=!1,o.getCreativeApi()&&l&&((h=o.getCreativeApi().toLowerCase())===(_=l.toLowerCase())?d=!0:0===h.indexOf(\"mraid\")&&0===_.indexOf(\"mraid\")&&(d=!0,o.setCreativeApi(l))),n&&d?o.setPreference(10):d?o.setPreference(6):n?o.setPreference(5):o.setPreference(0),t(`adjustMatchedRendition ${o.getId()}, contentType ${o.getContentType()}, creativeAPI ${o.getCreativeApi()}, preference ${o.getPreference()}`)}E(e,i.trackingEvents),p(e,n),g(e,a?c[0].clickThrough:i.clickThrough,i.clickTrackings,i.customClicks,i.impressions)}else(o=e.addCreativeRendition()).setContentType(\"null/null\"),(l=o.addCreativeRenditionAsset(\"VAST_CRA\",!0)).setContentType(\"null/null\")}function A(e,i,n,s,r){return t(`getCoadHTML, ad id = ${e.getAdId()}`),s.url&&s.url.length>0?((n=s.clickThrough)&&n.length>0&&e.setClickThroughUrl(a.EVENT_AD_CLICK,n),e=e.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],a.HTMLAdGenerator.generateAd(s.url,e,i,s.width,s.height,s.creativeType,r)):s.code&&s.code.length>0?\"script\"===s.resourceType||\"text/javascript\"===s.resourceType||\"text/js_ref\"===s.resourceType||\"application/x-javascript\"===s.resourceType?a.HTMLAdGenerator.wrapJSCode(s.code,i,s.width,s.height):a.HTMLAdGenerator.wrapUnsafeHTML(s.code,i,s.width,s.height):null}function m(e,i,n,s){t(`initPageAdInstance ad:${i.getAdId()}`);const r=n.vastRenditions[0];if(r.url||r.code){let t=i.addCreativeRendition(),s=t.addCreativeRenditionAsset(\"VAST_CRA\",!0);t.setCreativeApi(r.creativeApi),t.setWidth(r.width),t.setHeight(r.height),\"static\"===r.resourceType&&\"text/html\"===r.creativeType||\"iframe\"===r.resourceType?(s.setContentType(\"text/html_doc_ref\"),s.setUrl(r.url)):\"HTML\"===r.resourceType?(s.setContentType(\"text/html_doc_lit_mobile\"),s.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(r.code,e.getCustomId(),r.width,r.height))):(s.setContentType(\"text/html_doc_lit_mobile\"),s.setContent(A(i,e.getCustomId(),n,r,\"text/html_doc_lit_mobile\"))),s.setMimeType(\"text/html\")}else t(\"initPageAdInstance will add a tracking only companion ad\");E(i,n.trackingEvents),p(i,s),g(i,r.clickThrough,r.clickTrackings,r.customClicks,n.impressions)}function f(e){if(200===e.status)if(e.responseXML){let l=(new c).parseAdData(e.responseXML);if(l){if(t(\"scheduleVastAds\"),l&&0!==l.length)if(e=l[0].selectedPackage,l=l[0].redirectPackage,e||l)if(!e&&l){t(\"scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server\"),t(\"scheduleRedirect\");var i=[];(e=[]).push(C),i.push({});for(var n=O,s=l.selectedCompanionAds,r=0;r<n.length;r++){var o=n[r];s&&s[o.getCustomId()]&&(e.push(o),i.push(s[o.getCustomId()]))}for((n=v._rendererController.scheduleAdInstances(e))&&n.length>0&&((r=(s=n[0]).addCreativeRendition()).setWrapperUrl(a.Util.transformUrlToProxy(l.tagUrl)),r.setWrapperType(L),r.setContentType(P),r.setCreativeApi(y),E(s,l.getTrackingEventsOfWrapper()),p(s,l),g(s,l.getClickThroughOfWrapper(),l.getClickTrackingsOfWrapper(),l.getCustomClicksOfWrapper(),l.getImpressionOfWrapper())),t(`scheduleRedirect, schedule companion for redirect ad ${l}`),r=1;r<n.length;r++)(s=n[r])&&((o=i[r])instanceof _&&m(e[r],s,o,l))}else if(e){for(t(\"scheduleVastAds(), ads returned from vast response, going to schedule them\"),e.selectedDrivingAd?(t(\"scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad\"),e.selectedDrivingAd.isDrivingAd=!0):t(\"scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad\"),t(\"scheduleAdPackage()\"),i=[],(l=[]).push(C),e.selectedDrivingAd&&i.push(e.selectedDrivingAd),n=O,s=e.selectedCompanionAds,r=0;r<n.length;r++)o=n[r],s&&s[o.getCustomId()]&&(l.push(o),i.push(s[o.getCustomId()]));if((s=v._rendererController.scheduleAdInstances(l)).length>0){for(t(`scheduleAdPackage, scheduled ${s.length} ads${e.selectedDrivingAd}`?\"\":\", 1 of it is nullAd for pure companion ad schedule\"),e.selectedDrivingAd||t(\"Driving ad is not selected, will create a dummy null ad.\"),e.selectedDrivingAd||(l.shift(),T(s.shift(),e)),r=0;r<s.length;r++)if(o=s[r]){const t=i[r];t instanceof _?m(l[r],o,t,e):T(o,e)}!e.selectedDrivingAd&&n.length>0&&e.companionAds.length>0&&0===i.length&&(t(\"found empty companion slots and companion ads in package, but none of them matches slot size\"),v.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else t(\"scheduleAdPackage, no ad scheduled.\")}else t(\"no ads for scheduleVastAds\");else t(\"scheduleVastAds(), no ads from vast response!!!\"),R?4!==N?v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,\"Expecting linear ad but returned non-linear ad\",a.ERROR_VAST_LINEARITY_NOT_MATCH):v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,\"Expecting non-linear ad but returned linear ad\",a.ERROR_VAST_LINEARITY_NOT_MATCH):v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,`wrapperUrl=${b}`);v._request=null,v._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED),v._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else v.onTranslatorFailed(a.ERROR_PARSE,`wrapperUrl=${b}`,a.ERROR_VAST_XML_PARSING);else e.status>=400&&v.onTranslatorFailed(a.ERROR_IO,`wrapperUrl=${b}`)}this._rendererController=e;var S=\"image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript\".split(\" \"),R=!1,I=this._rendererController.getAdInstance(),v=this,C=I.getSlot(),N=function(){if(!C)return 1;switch(C.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return 2;case a.TIME_POSITION_CLASS_OVERLAY:return 4;case a.TIME_POSITION_CLASS_DISPLAY:return C&&!C.getBase()?8:1;default:return 1}}(),O=this._rendererController.getCompanionSlots().filter(function(e){if(!e)return!1;switch(e.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return!1;default:return!0}});t(`Checking CompanionSlots, length = ${O.length}, this._rendererController.getCompanionSlots().length = ${this._rendererController.getCompanionSlots().length}, AdInstance.getCompanionSlots.length = ${I.getCompanionSlots().length}`);var P=I.getActiveCreativeRendition().getContentType(),y=I.getActiveCreativeRendition().getCreativeApi()||\"None\";this.log(`ExpectedDrivingContentType:${P}, ExpectedDrivingAPI:${y}`);var L=I.getActiveCreativeRendition().getWrapperType();o.prototype={init(e,t,i,n,s,a,r,o){let l;if(this.log(`init(${[].slice.call(arguments,0).join(\",\")})`),this.url=e,this.width=1*t,this.height=1*i,this.creativeType=n,this.resourceType=s,this.bitrate=a,(l=r)&&0!==l.length)switch(l.toLowerCase()){case\"flashvar\":case\"flashvars\":l=\"clickTag\";break;case\"vpaid\":l=\"VPAID\";break;case\"mraid\":l=\"MRAID-1.0\"}else l=\"None\";this.creativeApi=l,this.code=o||null},log(e){a.log(`VastTranslator.VastRendition\\t${e}`)},toString(){let e,t=[];for(e in this)this.hasOwnProperty(e)&&\"function\"!=typeof this[e]&&\"ad\"!==e&&t.push(`${e}:${this[e]}`);return t.join(\",\")}},o.prototype.constructor=o,l.prototype={parse(e){if(this.log(\"parse()\"),e.Duration)if(e.Duration.value){const t=/(\\d+):(\\d+):(\\d+)/.exec(e.Duration.value);t?this.duration=3600*t[1]+60*t[2]+1*t[3]:this.warn(`Failed to parse duration value for creative ${e}`)}else this.warn(`No duration value set for creative ${e}`);e.VideoClicks&&(e.VideoClicks=[].concat(e.VideoClicks),a.Util.forEachOnArray(e.VideoClicks,function(e){let t;if(e.ClickThrough&&e.ClickThrough.value&&(this.clickThrough=r(e.ClickThrough.value)),e.ClickTracking){e.ClickTracking=[].concat(e.ClickTracking);for(var i=0;i<e.ClickTracking.length;i++)(t=r(e.ClickTracking[i].value))&&this.clickTrackings.push(t)}if(e.CustomClick)for(e.CustomClick=[].concat(e.CustomClick),i=0;i<e.CustomClick.length;i++){let n=null;e.CustomClick[i][\"@attributes\"]&&(n=e.CustomClick[i][\"@attributes\"].id),(t=r(e.CustomClick[i].value))&&this.customClicks.push({id:n,url:t})}},this)),e.MediaFiles&&e.MediaFiles.MediaFile&&(e.MediaFiles.MediaFile=[].concat(e.MediaFiles.MediaFile),a.Util.forEachOnArray(e.MediaFiles.MediaFile,function(e){let t=r(e.value),i=NaN,n=NaN,s=null,a=\"None\",l=NaN;e[\"@attributes\"]&&(i=e[\"@attributes\"].width||NaN,n=e[\"@attributes\"].height||NaN,s=e[\"@attributes\"].type,a=e[\"@attributes\"].apiFramework||\"None\",l=e[\"@attributes\"].bitrate||NaN),t&&-1!==t.indexOf(\":\")?((e=new o(this)).init(t,i,n,s,\"\",l,a,null),e.clickThrough=this.clickThrough,this.vastRenditions.push(e),(isNaN(i)||isNaN(n))&&this.log(`continue with missing [width,height]${[i,n]}`)):this.warn(`will ignore this mediaFile because some required field is missing [url,width,height]:${[t,i,n]}`)},this)),e.TrackingEvents&&this.parseTrackingEvents(e.TrackingEvents,this.setTrackingEvents()),e.AdParameters&&(this.log(`parse() got AdParameters:${e.AdParameters.value}`),this.creativeData=e.AdParameters.value),e.Companion&&(e.Companion=[].concat(e.Companion),a.Util.forEachOnArray(e.Companion,function(e){let t=null,i=null,n=\"\",l=\"\",d=null,h=null,c=!1;e.CompanionClickThrough&&(l=r(e.CompanionClickThrough.value)),e.StaticResource&&(t=r(e.StaticResource.value),e.StaticResource[\"@attributes\"]&&(i=e.StaticResource[\"@attributes\"].creativeType),n=\"static\"),e.IFrameResource&&(t=r(e.IFrameResource.value))&&(i=\"text/html_doc_ref\",n=\"iframe\"),e.HTMLResource&&(d=e.HTMLResource[\"#cdata-section\"]||\"\",d=a.Util.trim(d))&&(i=\"text/html_doc_lit_mobile\",n=\"HTML\"),e.TrackingEvents&&(h=e.TrackingEvents);const u=new _(this.adp);if(u.sequence=this.sequence,u.clickThrough=l,h&&u.parseTrackingEvents(h,u.setTrackingEvents()),e[\"@attributes\"]){h=e[\"@attributes\"].width||NaN;const a=e[\"@attributes\"].height||NaN;if(e=e[\"@attributes\"].apiFramework||\"None\",(t&&-1!==t.indexOf(\":\")||d)&&!isNaN(h)&&!isNaN(a)&&s(i)||this.adp.isWrapper){const s=new o(u);s.init(t,h,a,i,n,NaN,e,d),s.clickThrough=l,u.vastRenditions.push(s)}else c=!0,this.warn(`will ignore this rendition because some required fields is missing or incompatible [creativeType,url,code,width,height]:${[i,t,d,h,a]}`)}else this.adp.isWrapper||(c=!0,this.warn(`for InLine ad package, No attributes found for the Companion ads:${e}`));c?this.adp.isWrapper&&this.adp.companionAds.push(u):this.adp.companionAds.push(u)},this)),e.NonLinear&&(e.NonLinear=[].concat(e.NonLinear),a.Util.forEachOnArray(e.NonLinear,function(e){let t=null,i=null,n=\"\",l=\"\",d=\"\",_=null,c=!1;e.AdParameters&&(d=e.AdParameters.value),e.NonLinearClickThrough&&(l=r(e.NonLinearClickThrough.value)),e.StaticResource&&(t=r(e.StaticResource.value),e.StaticResource[\"@attributes\"]&&(i=e.StaticResource[\"@attributes\"].creativeType),n=\"static\"),e.IFrameResource&&(t=r(e.IFrameResource.value),i=\"text/html_doc_ref\",n=\"iframe\"),e.HTMLResource&&(_=e.HTMLResource[\"#cdata-section\"]||\"\",_=a.Util.trim(_),i=\"text/html_doc_lit_mobile\",n=\"HTML\");const u=new h(this.adp);if(u.sequence=this.sequence,u.clickThrough=l,u._trackingEvents=this._trackingEvents,d&&(u.creativeData=d),e[\"@attributes\"]){d=e[\"@attributes\"].width||NaN;const a=e[\"@attributes\"].height||NaN;if(e=e[\"@attributes\"].apiFramework||\"None\",!t&&!_||isNaN(d)||isNaN(a)||!s(i))c=!0,this.warn(`will ignore this rendition because some required fields is missing or incompatible:[creativeType,url,code,width,height]:${[i,t,_,d,a]}`);else{const s=new o(u);s.init(t,d,a,i,n,NaN,e,_),s.clickThrough=l,u.vastRenditions.push(s)}}else this.adp.isWrapper||(c=!0,this.warn(`for InLine ad package, No attributes found for the NonLinear ads:${e}`));this.adp.nonLinearAds.push(u),c?this.adp.isWrapper&&this.adp.nonLinearAds.push(u):this.adp.nonLinearAds.push(u)},this))},parseLinears(e){2!==N?(this.log(\"TargetAdType != TARGET_LINEAR, skipping parse\"),R=!0):this.parse(e)},parseNonLinears(e){4!==N?(this.log(\"TargetAdType != TARGET_NONLINEAR, skipping parse\"),R=!0):this.parse(e)},parseCompanionAds(e){this.parse(e)},setTrackingEvents(){return this._trackingEvents||(this._trackingEvents=new function(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.replay=[],this.fullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitation=[],this.stop=[]}),this._trackingEvents},parseTrackingEvents(e,t){this.log(\"parseTrackingEvents\"),e.Tracking&&(e.Tracking=[].concat(e.Tracking),a.Util.forEachOnArray(e.Tracking,function(e){const i=e[\"@attributes\"].event;if(e=r(e.value))switch(i){case\"creativeView\":case\"start\":case\"firstQuartile\":case\"midpoint\":case\"thirdQuartile\":case\"complete\":case\"mute\":case\"unmute\":case\"pause\":case\"resume\":case\"rewind\":case\"replay\":case\"fullscreen\":case\"expand\":case\"collapse\":case\"acceptInvitation\":case\"stop\":t[i].push(e);break;case\"close\":t.stop.push(e)}},this))},toString(){return`${this.constructor.name}, renditions:${this.vastRenditions}`},log(e){a.log(`VastTranslator.${this.constructor.name}\\t${e}`)},warn(e){a.warn(`VastTranslator.${this.constructor.name}\\t${e}`)}},(e=Object.defineProperty||function(e,t,i){i.get&&e.__defineGetter__(t,i.get),i.set&&e.__defineSetter__(t,i.set)})(l.prototype,\"trackingEvents\",{get(){return this.log(\"get trackingEvents()\"),this._trackingEvents?this._trackingEvents:this.isDrivingAd?this.adp.trackingEvents:null}}),e(l.prototype,\"impressions\",{set(e){this._impressions=e},get(){return this.isDrivingAd?this._impressions.concat(this.adp.impressions):this._impressions}}),l.prototype.constructor=l,d.prototype=new l,d.prototype.constructor=d,h.prototype=new l,h.prototype.constructor=h,_.prototype=new l,_.prototype.getPrimaryRendition=function(){return this.vastRenditions[0]||null},e(_.prototype,\"impressions\",{get(){return 8===N?this._impressions.concat(this.adp.impressions):this._impressions}}),_.prototype.constructor=_;const D=function(){this.impressions=[],this.errorTrackings=[],this.linearAds=[],this.nonLinearAds=[],this.companionAds=[],this.extensions=[],this.tagUrl=\"\",this.isWrapper=!1,this.surveyUrl=null,this.selectedDrivingRenditions=[],this.selectedDrivingAd=null,this.selectedCompanionAds={}};(D.prototype={parse(e){if(this.log(`parse(${e})`),e)if(this.isWrapper||e.Creatives&&e.Creatives.Creative){e.Creatives=e.Creatives||[],n(this.impressions,e.Impression),n(this.extensions,e.Extensions),n(this.errorTrackings,e.Error),this.isWrapper&&e.VASTAdTagURI&&(this.tagUrl=e.VASTAdTagURI.value||\"\"),e.Survey&&e.Survey.value&&e.Survey.value.length>0&&(this.surveyUrl=e.Survey.value),e.Creatives.Creative=e.Creatives.Creative?[].concat(e.Creatives.Creative):[];for(let i=0;i<e.Creatives.Creative.length;i++){let n=e.Creatives.Creative[i],s=-1;if(n[\"@attributes\"]&&(s=n[\"@attributes\"].sequence||-1,s*=1),n.Linear){var t=new d(this);t.sequence=s,t.parseLinears(n.Linear),this.linearAds.push(t)}else n.NonLinearAds?((t=new h(this)).sequence=s,t.parseNonLinears(n.NonLinearAds)):n.CompanionAds&&((t=new _(this)).sequence=s,t.parseCompanionAds(n.CompanionAds));t&&n.UniversalAdId?(t.universalAdId={idRegistry:n.UniversalAdId[\"@attributes\"].idRegistry,idValue:n.UniversalAdId[\"@attributes\"].idValue},this.log(`Universal Ad ID with idRegistry ${t.universalAdId.idRegistry} and idValue ${t.universalAdId.idValue}`)):this.log(\"No Universal Ad ID is present in the VAST response.\")}}else this.warn(\"parse(): no creative found!\");else this.warn(\"parse(): empty adpackage\")},testAndUpdatePackageForTemporalSlot(e){if(this.log(`testAndUpdatePackageForTemporalSlot(${e})`),(e=e?this.linearAds:this.nonLinearAds).length<1)return!1;this.log(`testAndUpdatePackageForTemporalSlot(), ads.length = ${e.length}`);let t=!1;if(!t)for(let i=0;i<e.length;i++){const n=this.findRenditionGroupByContentType(e[i]);if(n.length>0){this.log(`testAndUpdatePackageForTemporalSlot() : found driving ad and renditions group: ${n}`),this.selectedDrivingRenditions=n,this.selectedDrivingAd=e[i],t=!0;break}}return t},testAndUpdatePackageForPageSlots(e){let t=!1,i=this.companionAds,n=O.slice(0);if(this.log(`testAndUpdatePackageForPageSlots(${e}), ads are ${i.join(\",\")}, slots are ${n.join(\",\")}`),e){if((e=this.matchAdsToSlots(i,n)).length>0)for(t=!0,i=0;i<e.length;i++){const t=(n=e[i]).ad;this.selectedCompanionAds[n.slot.getCustomId()]=t}}else 1===(e=this.matchAdsToSlots(i,[C])).length?(t=!0,this.selectedDrivingAd=e[0].ad):this.selectedDrivingAd=null;return t},renditionFitsInSlot:(e,t)=>!!e&&(e.width<=t.getWidth()&&e.height<=t.getHeight()),calcDeadSpaceRatio(e,t){return(e=e.getPrimaryRendition())?(this.log(`ad w,h  slot w,h${[e.width,e.height,t.getWidth(),t.getHeight()]}`),this.renditionFitsInSlot(e,t)?1-e.width*e.height/t.getWidth()*t.getHeight():1):0},matchAdsToSlots(e,t){this.log(`matchAdsToSlots(ads=${e.join(\",\")}, slots=${t.join(\",\")})`);for(var i=[],n=null,s=null,a=1,r=0;r<e.length;r++)for(let i=e[r],o=0;o<t.length;o++){let e=t[o],r=this.calcDeadSpaceRatio(i,e);r<a&&(n=i,s=e,a=r)}return null!=n&&(i.push({ad:n,slot:s}),e.splice(e.indexOf(n),1),t.splice(t.indexOf(s),1),i=i.concat(this.matchAdsToSlots(e,t))),this.log(`matchAdsToSlots: winningAd:${n} winningSlot:${s} ratio:${a}`),i},getAllRenditions:e=>e.vastRenditions,findRenditionGroupByContentType(e){this.log(`findRenditionGroupByContentType:${e}`);const t=[];if(e instanceof d&&isNaN(e.duration))return this.warn(\"findRenditionGroupByContentType(), duration of linear ad is NaN, will not used for scheduling\"),t;for(let i=this.getAllRenditions(e),n=0;n<i.length;n++){const r=i[n];if(e instanceof d){if(null==r.creativeType||\"\"===a.Util.trim(r.creativeType)){this.warn(`findRenditionGroupByContentType, the contentType ${r.creativeType} not supported for linearAd`);continue}}else if(!s(r.creativeType)){this.warn(`findRenditionGroupByContentType, the contentType ${r.creativeType} not supported for non-linearAd`);continue}t.push(r)}return t},formalizeString:e=>e?a.Util.trim(e).toLowerCase():\"\",getAdsByTargetType(){this.log(\"getAdsByTargetType\");let e=[];switch(N){case 8:e=this.companionAds;break;case 2:e=this.linearAds;break;case 4:e=this.nonLinearAds}for(let t=0;t<e.length;t++)e[t].isDrivingAd=!0;return e},getImpressionOfWrapper(){this.log(\"getImpressionOfWrapper\");for(var e=this.getAdsByTargetType(),t=null,i=0;i<e.length;i++){const n=e[i];if(n&&n._impressions&&n._impressions.length>0){t=n._impressions;break}}return t||(t=this.impressions),t},getTrackingEventsOfWrapper(){this.log(\"getTrackingEventsOfWrapper\");for(var e=this.getAdsByTargetType(),t=null,i=0;i<e.length;i++){const n=e[i];if(n&&n._trackingEvents){t=n._trackingEvents;break}}return t},getClickThroughOfWrapper(){this.log(\"getClickThroughOfWrapper\");for(var e=this.getAdsByTargetType(),t=null,i=0;i<e.length;i++){let n=e[i];if(n){n.clickThrough&&(t=n.clickThrough),n=n.vastRenditions;for(let e=0;e<n.length;e++){const i=n[e];if(i.clickThrough){t=i.clickThrough;break}}if(t)break}}return t},getClickTrackingsOfWrapper(){this.log(\"getClickTrackingsOfWrapper\");for(var e=this.getAdsByTargetType(),t=null,i=0;i<e.length;i++){let n=e[i];if(n){n.clickTrackings&&n.clickTrackings.length>0&&(t=n.clickTrackings),n=n.vastRenditions;for(let e=0;e<n.length;e++){const i=n[e];if(i.clickTrackings&&i.clickTrackings.length>0){t=i.clickTrackings;break}}if(t)break}}return t},getCustomClicksOfWrapper(){this.log(\"getCustomClicksOfWrapper\");for(var e=this.getAdsByTargetType(),t=null,i=0;i<e.length;i++){let n=e[i];if(n){n.customClicks&&n.customClicks.length>0&&(t=n.customClicks),n=n.vastRenditions;for(let e=0;e<n.length;e++){const i=n[e];if(i.customClicks&&i.customClicks.length>0){t=i.customClicks;break}}if(t)break}}return t},testWrapperForRedirect(){return this.log(\"testAndUpdateWrapperForRedirect()\"),this.tagUrl&&this.tagUrl.length>0},log(e){a.log(`VastTranslator.VastAdPackage\\t${e}`)},warn(e){a.warn(`VastTranslator.VastAdPackage\\t${e}`)}}).constructor=D,c.prototype={getVastVersion(e){return this.log(`getVastVersion(${e})`),e&&0!==e.indexOf(\".\")?e.indexOf(\".\")>0?parseInt(e.substring(0,e.indexOf(\".\"))):parseInt(e):-1},parseAdData(e){this.log(\"parseAdData()\");let t,i={};i.selectedPackage=null,i.redirectPackage=null;let n=a.Util.xmlToJson(e);if(n)if(n.VAST&&n.VAST[\"@attributes\"])if(this.getVastVersion(n.VAST[\"@attributes\"].version)<a.MINIMUM_VAST_VERSION_SUPPORTED||this.getVastVersion(n.VAST[\"@attributes\"].version)>a.MAXIMUM_VAST_VERSION_SUPPORTED)v.onTranslatorFailed(a.ERROR_PARSE,`wrapperUrl=${b}`,a.ERROR_VAST_VERSION_NOT_SUPPORTED);else{if(n.VAST.Ad){n.VAST.Ad=[].concat(n.VAST.Ad);let r=[];for(e=[],t=0;t<n.VAST.Ad.length;t++){var s=new D;s.isWrapper=!!n.VAST.Ad[t].Wrapper,s.isWrapper?(s.parse(n.VAST.Ad[t].Wrapper),e.push(s)):(s.parse(n.VAST.Ad[t].InLine),r.push(s))}if(n=!1,0===r.length&&0===e.length)return this.log(\"parseAdData(): no ads from vast response!!!\"),[i];for(this.log(`parseAdData(): ${r.length}inline ads, ${e.length} wrapper ads.`),s=null,t=0;t<r.length;t++)if(this.selectUsableAdsForDrivingSlot(r[t])){this.log(\"parseAdData(): package for driving slot is found!!!\"),s=r[t];break}if(t=O.length>0&&I.getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY,s)t&&this.selectUsableAdsCompanionSlots(s)&&this.log(\"parseAdData(): companion ads are found for companion slots, with driving slot\"),i.selectedPackage=s;else if(t){t=!1;for(let e=0;e<r.length;e++)s=r[e],this.selectUsableAdsCompanionSlots(s)&&(this.log(\"parseAdData(): companion ads are found for companion slots,without driving slot\"),i.selectedPackage=s,t=!0);t||(this.log(\"parseAdData(): companion ads are not found for companion slots,without driving slot\"),n=!0)}else this.log(\"parseAdData(): no usable ads found in vast response!!!\"),n=!0;if(n&&e.length>0)for(r=0;r<e.length;r++)if(this.testWrapperForRedirect(e[r])){i.redirectPackage=e[r],I.incrementWrapperCount(),this.selectUsableAdsCompanionSlots(e[r])&&this.log(\"parseAdData(): companion ads are found for wrapper ad\");break}return[i]}n.VAST.Error&&u(I,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,n.VAST.Error.value),v.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,`wrapperUrl=${b}`,a.ERROR_VAST_NO_AD)}else v.onTranslatorFailed(a.ERROR_PARSE,`wrapperUrl=${b}`,a.ERROR_VAST_SCHEMA_VALIDATION);else v.onTranslatorFailed(a.ERROR_PARSE,`wrapperUrl=${b}`,a.ERROR_VAST_XML_PARSING)},selectUsableAdsForDrivingSlot(e){switch(this.log(\"selectUsableAdsForDrivingSlot()\"),N){case 2:e=this.testAndUpdatePackageForTemporalSlot(e,!0);break;case 4:e=this.testAndUpdatePackageForTemporalSlot(e,!1);break;case 8:e=this.testAndUpdatePackageForPageSlots(e,!1);break;default:e=!1}return e},selectUsableAdsCompanionSlots(e){return this.log(\"selectUsableAdsCompanionSlots(pk)\"),this.testAndUpdatePackageForPageSlots(e,!0)},testAndUpdatePackageForTemporalSlot(e,t){return this.log(`testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = ${t}`),e.testAndUpdatePackageForTemporalSlot(t)},testAndUpdatePackageForPageSlots(e,t){return this.log(`testAndUpdatePackageForPageSlots(pk,isCompanion) isCompanion = ${t}`),e.testAndUpdatePackageForPageSlots(t)},testWrapperForRedirect(e){return this.log(\"testWrapperForRedirect(pk)\"),e.testWrapperForRedirect()},log(e){a.log(`VastTranslator.VastParser\\t${e}`)},warn(e){a.warn(`VastTranslator.VastParser\\t${e}`)}};var b=I.getActiveCreativeRendition().getWrapperUrl();if(e=I.getActiveCreativeRendition().getWrapperType(),t(`AdInstance.getActiveCreativeRendition().getWrapperUrl()=${b}, getWrapperType()=${e}`),0!==e.indexOf(\"external/vast-\"))v.onTranslatorFailed(a.ERROR_NO_RENDERER,`wrapperType=${e};wrapperUrl=${b}`,a.ERROR_VAST_TRACKING_ERROR);else if(b&&0!==b.length){let n=a.VAST_DEFAULT_MAX_WRAPPER_COUNT;if((e=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&Number(e)>0&&(n=Number(e)),I.getWrapperCount()>=n)v.onTranslatorFailed(a.ERROR_IO,`maximum wrapper limit is reached ${I.getWrapperCount()}`,a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{n=this._rendererController.getParameter(\"translator.vast.asyncLoad\"),t(`will load vast xml, asyncAjax:${n=!0===a.Util.str2bool(n)}`);let s=this._rendererController.getParameter(\"translator.vast.loadWithCookie\");s=!0===a.Util.str2bool(s);let r=null,o=5e3;(e=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&Number(e)>0&&(o=Number(e));try{window.XDomainRequest?(r=new XDomainRequest,n=!0):(r=new XMLHttpRequest).withCredentials=s,v._request=r,n?(r.open(\"GET\",b),window.XDomainRequest?r.onload=function(){const e=new ActiveXObject(\"Microsoft.XMLDOM\");e.async=!1,e.loadXML(r.responseText),r.responseXML=e,r.status=200,f(r)}:(r.timeout=o,r.onreadystatechange=function(){4===r.readyState&&f(r)}),r.ontimeout=function(){v.onTranslatorFailed(a.ERROR_TIMEOUT,`wrapperUrl=${b} timed out.`,a.ERROR_VAST_URI_TIMEOUT)},r.onerror=function(){window.XDomainRequest&&(r.status=0),0===r.status?(i(\"CORS error\"),v.onTranslatorFailed(a.ERROR_SECURITY,`wrapperUrl=${b}`)):(i(`exception:${r.statusText}`),v.onTranslatorFailed(a.ERROR_UNKNOWN,`wrapperUrl=${b};exception=${r.statusText}`))},r.send()):(r.open(\"GET\",b,!1),r.send(),f(r))}catch(t){if(e=!1,window.XMLHttpRequestException){if(t instanceof XMLHttpRequestException)switch(t.code){case XMLHttpRequestException.NETWORK_ERR:e=!0}}else t.code===DOMException.NETWORK_ERR&&(i(\"CORS in IE10\"),e=!0);e?(i(`CORS error:${t}`),v.onTranslatorFailed(a.ERROR_SECURITY,`wrapperUrl=${b}`)):(i(`exception:${t}`),v.onTranslatorFailed(a.ERROR_UNKNOWN,`wrapperUrl=${b};exception=${t}`))}}}else v.onTranslatorFailed(a.ERROR_NULL_ASSET,`wrapperUrl=${b}`,a.ERROR_VAST_TRACKING_ERROR)},info:()=>({moduleType:a.MODULE_TYPE_TRANSLATOR}),log(e){a.log(`VastTranslator\\t${e}`)},warn(e){a.warn(`VastTranslator\\t${e}`)},getPlayheadTime:()=>-1,getDuration:()=>-1,stop(){a.debug(\"VastTranslator stop\"),this._request&&(this._request.abort(),a.log(\"VastTranslator Stop: request aborted\")),this._request=null,this._rendererController&&this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)},onTranslatorFailed(e,t,i){this._request&&(this._request=null);const n={};n[a.INFO_KEY_ERROR_MODULE]=\"VastTranslator\",n[a.INFO_KEY_ERROR_CODE]=e,n[a.INFO_KEY_VAST_ERROR_CODE]=i,t&&(n[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_FAILED,n)}},a.VastTranslator.prototype.constructor=a.VastTranslator,a.VideoAsset=function(e){this._defaultTimeouts=[5,10,15,30,60,120,180,300],this._context=e,this._internalState=a.MediaInitState.instance,this._eventCallback=this._state=\"\",this._callbackTimer=null,this._requestedVideoViewUrl=this._videoPlayPending=!1,this._dummyInstanceId=\"\",this._delay=0,this._location=this._networkId=this._duration=this._customId=this._id=\"\",this._autoPlayType=null,this._fallbackId=\"\",this._viewRandom=0,this._durationType=null,this._currentTpos=0},a.VideoAsset.prototype={setVideoAsset(e,t,i,n,s,r,o,l,d){if(e){switch(o){case a.ID_TYPE_FW:o=this._id!==e,this._id=e;break;case a.ID_TYPE_GROUP:o=this._id!==`g${e}`,this._id=`g${e}`;break;default:o=this._customId!==e,this._customId=e}o&&(this._eventCallback=\"\"),\"number\"==typeof t&&(this._duration=Math.round(10*t)/10),1*i>0&&(this._networkId=1*i),\"string\"==typeof n&&(this._location=n),\"number\"==typeof s&&(this._autoPlayType=s),1*r>0&&(this._viewRandom=1*r),\"number\"==typeof l&&l>0?this._fallbackId=`${l}`:\"string\"==typeof l&&(this._fallbackId=l.trim()),d!==a.VIDEO_ASSET_DURATION_TYPE_EXACT&&d!==a.VIDEO_ASSET_DURATION_TYPE_VARIABLE||(this._durationType=d),this._videoPlayPending&&this.play()}else a.warn(\"AdRequest.setVideoAsset\",\"id is required.\")},setVideoAssetCurrentTimePosition(e){!e||e<0?a.warn(\"AdRequest.setVideoAssetCurrentTimePosition\",\"valid timePosition is required\"):this._currentTpos=e},setVideoState(e){e===a.VIDEO_STATE_PLAYING?(this._state===a.VIDEO_STATE_PAUSED&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUMED),this.play()):e===a.VIDEO_STATE_PAUSED||e===a.VIDEO_STATE_STOPPED?(this.pause(),e===a.VIDEO_STATE_PAUSED&&this._state===a.VIDEO_STATE_PLAYING&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSED)):e===a.VIDEO_STATE_COMPLETED&&this.complete(),this._state=e},callback(e){this._eventCallback?this._eventCallback.process():e=!0,e||((e=this._defaultTimeouts.shift())||(e=300),this._callbackTimer=new a.Timer(e,a.Util.bind(this,this.callback)),this._callbackTimer.start())},getPlayheadTime(){let e=this._delay;return this._delay=0,e+=this._callbackTimer?this._callbackTimer.getCTValue():0,Math.floor(e)},play(){this._context._adManager._serverURL&&this._context._adManager._networkId&&(this._id||this._customId)?this._eventCallback?(this._videoPlayPending=!1,this._internalState.play(this)):this._requestedVideoViewUrl||(this._requestedVideoViewUrl=!0,this.requestForVideoViewCallback(),this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick())):(a.warn(\"Server URL or Network ID or Video Asset id/customId is not set, delay video asset state change until these are provided.\"),this._videoPlayPending=!0,this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick()))},pause(){this._internalState.pause(this)},complete(){this._internalState.complete(this)},onStartPlaying(){this.callback()},onStartReplaying(){this.callback()},onPausePlaying(){this.callback(!0),this._callbackTimer.pause()},onResumePlaying(){this._callbackTimer.start()},onCompletePlaying(){this.callback(!0),this._callbackTimer.stop(),this._callbackTimer=null,this._eventCallback=\"\",this._requestedVideoViewUrl=!1},onCompleteReplaying(){this.onCompletePlaying()},setMediaState(e){this._internalState=e},requestPauseBySlot(e){a.debug(\"requestPauseBySlot\"),this._internalState===a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:e}):a.debug(\"Not sending content pause request because content video state is\",JSON.stringify(this._internalState))},requestResumeBySlot(e){a.debug(\"requestResumeBySlot\"),this._internalState===a.MediaPausedState.instance||this._internalState===a.MediaReplayPausedState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,{slot:e}):a.debug(\"Not sending content resume request because content video state is \",JSON.stringify(this._internalState))},requestForVideoViewCallback(){let e=new a.Context(this._context._adManager);e._videoAsset=this,this._dummyInstanceId=e._instanceId,e=this._context._adRequest.generateVideoViewRequestUrlWithDummyContextInstanceId(e._instanceId);const t=this;a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug(\"Context.submitRequest:\",\"use json2\"),a.Util.pingURLWithForm(e,this._dummyInstanceId,!0),t._onMessagePosted=function(e){\"object\"==typeof e.data&&e.data.hasOwnProperty(\"cbfn\")&&e.data.cbfn.indexOf(`['Context_${this._dummyInstanceId}']`)>-1&&t.requestComplete(e.data.response)},window.addEventListener(\"message\",t._onMessagePosted,!1)):a.Util.pingURLWithScript(e)},requestComplete(e){if(this._delay=this._callbackTimer.tick(),this._callbackTimer=null,a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener(\"message\",this._onMessagePosted,!1);const e=document.getElementById(`_fw_request_iframe_${this._dummyInstanceId}`);document.body.removeChild(e)}null!=e?(a._instanceQueue[`Context_${this._dummyInstanceId}`]=null,this.parse(a.Util.getObject(\"siteSection.videoPlayer.videoAsset\",e)||{}),this.play()):a.warn(\"Failed to get video view callback url.\")},parse(e){if(e){this._customId=e.customId,this._networkId=parseInt(e.networkId);for(let t=0,i=e.eventCallbacks||[];t<i.length;t++){e=i[t];const n=a.EventCallback.newEventCallback(this._context,e.name,e.type);if(n&&e.name===a.EVENT_VIDEO_VIEW){n.parse(e),this._eventCallback=n,a.debug(`Parsed video view url: ${this._eventCallback._url}`);break}}}}},a.VideoRenderer=function(){this._adVideo=null,this._duration=this._playheadTime=-1,this._dragging=this._stopInvoked=this._isEnded=!1,this._volume=1,this._rendererController=null,this._isBuffering=!1},a.VideoRenderer.prototype={pause(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this._adVideo&&!this._adVideo.paused&&this._adVideo.pause()},resume(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this._adVideo&&this._adVideo.paused&&this._adVideo.play()},start(e){this._rendererController=e;let t=(e=this._rendererController.getAdInstance()).getSlot(),i=this,n=!1,s=!1,r=!1;if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,t.getTimePositionClass());else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&t.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,\"midroll\");else{a.log(\"VideoRenderer.start\",t.getTimePositionClass(),e);let h=this._rendererController.getContentVideoElement(),_=t.getVideoDisplaySize().width,c=t.getVideoDisplaySize().height,u=e.getRenderableCreativeRenditions(),p=(_=new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1e3,this._rendererController.getParameter(\"arWeight\")||1,this._rendererController.getParameter(\"pxWeight\")||1,.2).getBestFitRendition(u,_,c))?_.getPrimaryCreativeRenditionAsset():null;if(p&&u.length)if(p.getUrl()){e.setActiveCreativeRendition(_),a.log(\"VideoRenderer.start selected rendition is:\",p.getUrl()),this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);const c=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;c||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);let u=a.PLATFORM_EVENT_CLICK,E=a.MOBILE_EVENT_DRAG;a.debug(\"VideoRenderer\",\"use content video element\"),h.controls=!1,this._adVideo=h;let g=null,T=null,A=null;this._volume=this._rendererController.getContext().getAdVolume(),this._adVideo.volume=this._volume,this._adVideo.muted=0===this._volume;let m=function(e){a.debug(\"VideoRenderer.checkTimeUpdate timeout\"),l(e)},f=function(){T&&(clearTimeout(T),T=null)},S=a.Util.bind(this,function(e){a.debug(`onAdVideoBufferEmpty(): Ad video event ${e.type}`),null!==(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED))&&void 0!==e&&!1!==a.Util.str2bool(e)&&(a.debug(\"play the ad immediately after the stalled event\"),h&&h._fw_videoAdPlaying&&h.play())}),R=function(e){i._isBuffering||(i._isBuffering=!0,i._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_START}),a.debug(`onAdVideoBufferingStarted(): Ad video event ${e.type}`))},I=function(e){i._isBuffering&&(i._isBuffering=!1,i._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_END}),a.debug(`onAdVideoBufferingEnded(): Ad video event ${e.type}`))},v=null;(e=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT))&&(v=document.getElementById(e)),v||(v=h);let C,N=a.Util.bind(this,function(e){if(h.paused&&a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED)h.play();else{let t=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);null==t&&(t=\"true\"),!1!==a.Util.str2bool(t)&&(s?(a.debug(`Ad video event ${e.type}`),this._dragging?this._dragging=!1:this._rendererController.processEvent({name:a.EVENT_AD_CLICK})):a.debug(\"Ad not started, ignore click.\"))}}),O=a.Util.bind(this,function(e){a.debug(`Ad video event ${e.type}`),this._dragging=!0}),P=function(e){if(a.debug(`Ad video event ${e.type} ended: ${h.ended} playing:${h._fw_videoAdPlaying}`),h.ended&&Math.abs(h.duration-h.currentTime)<.2||!h._fw_videoAdPlaying)C=setTimeout(function(){a.warn(\"Force ad video end bc ad paused with ended = true\"),e.type=\"ended\",o(e)},200);else{let e=i._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE);null==e&&(e=\"true\"),!1===a.Util.str2bool(e)?a.debug(\"Pause controls disabled\"):h.controls=!0,f()}},y=function(e){a.debug(`Ad video event ${e.type}`),h.controls=!1},L=0,D=function(e){a.debug(`Ad video event ${e.type}`),h.currentTime<=0?a.debug(\"VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0\"):(f(),h.paused||(e=i._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8e3,T=setTimeout(m,e,`${e}ms timeout when playing`)),s||(s=!0,i._playheadTime=h.currentTime,i._playheadTime<0&&(i._playheadTime=0),g&&(clearTimeout(g),g=null),i._quartileTimerId=setInterval(function(){let e=h.currentTime,t=h.duration;e>0&&(i._playheadTime=e),t>0&&(i._duration=t),\"number\"!=typeof e||\"number\"!=typeof t||A||(e>=.25*t&&L<1&&(i._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),L=1),e>=.5*t&&L<2&&(i._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),L=2),e>=.75*t&&L<3&&(clearInterval(i._quartileTimerId),i._quartileTimerId=null,i._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),L=3))},1e3),i._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,function(){o()});var o=function e(t){let s=A;t&&t.type&&(a.debug(`Ad video event ${t.type}`),\"error\"===t.type&&(a.warn(t.target.src),a.warn(t.target.currentSrc),I(t))),f(),g&&(clearTimeout(g),g=null),c&&(v.removeEventListener(u,N,!1),v.removeEventListener(E,O,!1)),C&&(clearTimeout(C),C=null),d&&(document.removeEventListener(\"visibilitychange\",d,!1),d=null),h.removeEventListener(\"ended\",e,!1),h.removeEventListener(\"error\",e,!0),h.removeEventListener(\"pause\",P,!1),h.removeEventListener(\"playing\",y,!1),h.removeEventListener(\"timeupdate\",D,!1),h.removeEventListener(\"stalled\",S,!1),h.removeEventListener(\"waiting\",R,!1),h.removeEventListener(\"canplay\",I,!1),h.paused||(a.debug(\"try pausing video before complete\"),h.pause()),t&&\"error\"===t.type&&(s=\"video error\",(t=h.error||t.target.error)&&(s=`error:${t},code:${t.code}`)),s||(i._isEnded=!0),a.log(\"VideoRenderer.complete\"),n||(n=!0,delete h._fw_videoAdPlaying,i._adVideo=null,i._quartileTimerId&&(clearInterval(i._quartileTimerId),i._quartileTimerId=null),s?i._onRendererFailed(null,s):(i._stopInvoked||(h.currentTime>=.25*h.duration&&L<1&&(i._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),L=1),h.currentTime>=.5*h.duration&&L<2&&(i._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),L=2),h.currentTime>=.75*h.duration&&L<3&&(i._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),L=3),h.currentTime>=h.duration-.5&&L<4&&(i._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),L=4)),i._stopInvoked=!1,i._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED))),i._rendererController=null},l=function(e){A=e,a.warn(A),a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT||o()},d=function(e){a.log(`onVisibilityChange:${document.hidden?\"invisible\":\"visible\"}`),document.hidden?h&&!h.paused&&(h.pause(),r=!0,i._rendererController&&i._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),g&&(clearTimeout(g),g=null)):h&&h.paused&&r&&(h.play(),r=!1,i._rendererController&&i._rendererController.processEvent({name:a.EVENT_AD_RESUME}),s||!h._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||(e=i._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3,g=setTimeout(l,e,`${e}ms timeout before playing`)))};h._fw_videoAdPlaying=!0;let b=!1,w=function(){if(!b){if(b=!0,c&&(v.addEventListener(u,N,!1),v.addEventListener(E,O,!1)),h.addEventListener(\"ended\",o,!1),h.addEventListener(\"error\",o,!0),h.addEventListener(\"pause\",P,!1),h.addEventListener(\"playing\",y,!1),h.addEventListener(\"timeupdate\",D,!1),h.addEventListener(\"stalled\",S,!1),h.addEventListener(\"waiting\",R,!1),h.addEventListener(\"canplay\",I,!1),h.src=p.getUrl(),a.log(`VideoRenderer play video ad ${h.src}`),h.load(),h._fw_fromVideoPool||a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT){var e=i._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3;g=setTimeout(l,e,`${e}ms timeout before playing`)}a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE&&i._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),e=100,a.PLATFORM_ANDROID_VERSION>0&&(e=i._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY)||100),setTimeout(function(){const e=h.play();e&&a.PLATFORM_BLOCKS_AUTOPLAY&&e.catch(function(e){(e&&\"AbortError\"===e.name||\"NotAllowedError\"===e.name)&&(a.warn(\"Blocked by browser, need player to display a start button. Details: %o\",e),g&&(clearTimeout(g),g=null),t.setAutoPlayBlocked(!0),i._rendererController.processEvent({name:a.EVENT_AD_AUTO_PLAY_BLOCKED,info:{apiOnly:!0}}))}),document.hidden&&h&&(a.log(\"VideoRenderer pause ad when tab is invisible.\"),h&&!h.paused&&(h.pause(),r=!0,i._rendererController&&i._rendererController.processEvent({name:a.EVENT_AD_PAUSE})),g&&(clearTimeout(g),g=null))},e),document.addEventListener(\"visibilitychange\",d,!1)}};a.VideoRenderer._fw_playedDummyVideo||t.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\\.webm$/.test(p.getUrl())?w():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug(\"play dummy video for iOS 3.2-4.1\"),h.src=\"http://127.0.0.1:1/404.mp4\",h.load(),h.play(),h._fw_videoAdPlaying=!0,h.addEventListener(\"error\",function(){event.target.removeEventListener(\"error\",h,!0),w()},!0),setTimeout(w,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5e3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,\"no compatible asset\")}},stop(){a.debug(\"VideoRenderer stop\"),this._stopInvoked=!0,this._adVideo&&(this._adVideo._fw_videoAdPlaying=!1,this._adVideo.pause(),this.dispose()),this._rendererController=null},info:()=>({moduleType:a.MODULE_TYPE_RENDERER}),getPlayheadTime(){if(this._isEnded&&this._duration>0)return this._duration;if(this._adVideo){const e=this._adVideo.currentTime;if(e>0)return e}return this._playheadTime},getDuration(){return this._duration},setVolume(e){a.debug(`VideoRenderer setVolume(${e})`),this._adVideo?(this._adVideo.volume=e,this._adVideo.muted=0===e,this._volume!==e&&this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}),0===this._volume&&0!==e?this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE}):0!==this._volume&&0===e&&this._rendererController.processEvent({name:a.EVENT_AD_MUTE}),this._volume=e):a.debug(\"VideoRenderer ad video is null, ignore.\")},_onRendererFailed(e,t,i){const n={};n[a.INFO_KEY_ERROR_MODULE]=\"VideoRenderer\",n[a.INFO_KEY_ERROR_CODE]=e,i||(i=a.ERROR_VAST_GENERAL_LINEAR_ERROR),n[a.INFO_KEY_VAST_ERROR_CODE]=i,t&&(n[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,n)}},a.VideoRenderer.prototype.constructor=a.VideoRenderer,a.VideoStateExtension=function(){},a.VideoStateExtension.prototype={_enabled(){if(null==this._context)return!1;let e=this._context.getParameter(a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED);return null==e&&(e=\"false\"),!0===a.Util.str2bool(e)},init(e){this._context=e,this._enabled()?this._context.setVideoState(a.VIDEO_STATE_PLAYING):a.log(\"VideoStateExtension is disabled.\")},dispose(){this._context=null}},a.VideoStateExtension.prototype.constructor=a.VideoStateExtension,a.VPAIDWrapper=function(){this._creative=null,this._timeoutInMs=0,this._eventHandlers={},this._loadIntervalTimer=this._timeoutTimer=null,this._timeoutOperation=\"\",this.timeoutReached=!1,this._visibilityChangeListener=null,this._creativePausedByTabSwitch=!1},a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable(e){return!!this._creative&&((e=this._creative[e])&&\"function\"==typeof e)},checkVPAIDInterface(e){for(var t={passed:!0,missingInterfaces:\"\"},i=e.length-1;i>=0;i--)this._isCreativeFunctionInvokable(e[i])||(t.passed=!1,t.missingInterfaces+=`${e[i]} `);return t},loadCreativeAsset(e){a.log(`loadCreativeAsset(${e})`);let t=document.getElementById(\"vpaidFrame\"),i=document.createElement(\"iframe\");i.id=\"vpaidFrame\",null==t?document.body.appendChild(i):document.body.replaceChild(i,t),i.width=0,i.height=0,i.style.display=\"none\",i.contentWindow.document.open(),i.contentWindow.document.write(`<script type=\"text/javascript\" src=\"${e}\"> <\\/script>`),i.contentWindow.document.close(),this._timeoutOperation=\"loadCreativeAsset\",this._waitForTimeout();const n=this;this._loadIntervalTimer=setInterval(function(){let e=document.getElementById(\"vpaidFrame\").contentWindow.getVPAIDAd;e&&\"function\"==typeof e&&(clearInterval(n._loadIntervalTimer),void 0===(e=e())?a.debug(\"getVPAIDAd() returns undefined value\"):null==e?a.debug(\"getVPAIDAd() returns null\"):(n._creative=e,n._eventHandlers.CreativeAssetLoaded()))},200)},setCallbacksForCreative(e,t){for(const i in e)e.hasOwnProperty(i)&&this._creative.subscribe(e[i],i,t)},removeCallbacksForCreative(e){for(const t in e)e.hasOwnProperty(t)&&this._creative.unsubscribe(e[t],t)},handshakeVersion(e){return a.log(`VPAID Creative: handshakeVersion(${e})`),this._creative.handshakeVersion(e)},initAd(e,t,i,n,s,r){a.log(\"VPAID Creative: initAd()\"),this._timeoutOperation=\"initAd\",this._waitForTimeout(),this._creative.initAd(e,t,i,n,s,r)},startAd(){a.log(\"VPAID Creative: startAd()\"),this._timeoutOperation=\"startAd\",this._waitForTimeout(),this._creative.startAd(),document.hidden&&(a.log(\"VPAIDRenderer pause ad when tab is invisible\"),this._creative.pauseAd(),this._creativePausedByTabSwitch=!0)},stopAd(){a.log(\"VPAID Creative: stopAd()\"),\"startAd\"===this._timeoutOperation?(clearTimeout(this._timeoutTimer),this._timeoutOperation=\"startAd and stopAd\"):this._timeoutOperation+=\"stopAd\",this._creative&&(this._waitForTimeout(),this._creative.stopAd())},canPauseAd(){return this._isCreativeFunctionInvokable(\"pauseAd\")},canResumeAd(){return this._isCreativeFunctionInvokable(\"resumeAd\")},canResizeAd(){return this._isCreativeFunctionInvokable(\"resizeAd\")},pauseAd(){this.canPauseAd()&&(a.log(\"VPAID Creative: pauseAd()\"),this._creative.pauseAd())},resumeAd(){this.canResumeAd()&&(a.log(\"VPAID Creative: resumeAd()\"),this._creative.resumeAd())},resizeAd(e,t,i){this.canResizeAd()?(a.log(\"VPAID Creative: resizeAd()\"),this._creative.resizeAd(e,t,i)):a.log(\"The creative is not able to resize\")},getAdVolume(){return this._isCreativeFunctionInvokable(\"getAdVolume\")?this._creative.getAdVolume():-1},setAdVolume(e){this._isCreativeFunctionInvokable(\"setAdVolume\")&&this._creative.setAdVolume(e)},getAdExpanded(){return!!this._isCreativeFunctionInvokable(\"getAdExpanded\")&&this._creative.getAdExpanded()},getAdRemainingTime(){return this._isCreativeFunctionInvokable(\"getAdRemainingTime\")?this._creative.getAdRemainingTime():-1},getAdDuration(){return this._isCreativeFunctionInvokable(\"getAdDuration\")?this._creative.getAdDuration():-1},getAdLinear(){return this._creative.getAdLinear()},getAdCompanions(){return this._isCreativeFunctionInvokable(\"getAdCompanions\")?this._creative.getAdCompanions():\"\"},setTimeoutValueInMs(e){this._timeoutInMs=e},cancelTimeoutEvent(){const e=\"startAd and stopAd\"!==this._timeoutOperation;if(clearTimeout(this._timeoutTimer),!e){this._timeoutOperation=\"startAd\";const e=this;setTimeout(function(){e._eventHandlers&&e._eventHandlers.timeout&&e._eventHandlers.timeout.call()},500)}},addEventListener(e,t){this._eventHandlers[e]=t},removeEventListener(e){this._eventHandlers[e]=null},_waitForTimeout(){if(a.log(`Wait for ${this._timeoutOperation} for ${this._timeoutInMs}ms`),this._eventHandlers.timeout){const e=this;this._timeoutTimer=setTimeout(function(){e.timeoutReached||(e.timeoutReached=!0),\"startAd\"===e._timeoutOperation?e.stopAd():(\"loadCreativeAsset\"===e._timeoutOperation&&clearInterval(e._loadIntervalTimer),e._eventHandlers&&e._eventHandlers.timeout&&e._eventHandlers.timeout.call())},this._timeoutInMs)}},getTimeoutOperation(){return this._timeoutOperation}},a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper,a.VPAIDRenderer=function(){this.vpaidCreative=this._rendererController=null,this.vpaidVolume=this.vpaidDuration=-1,this.creativeEventCallbacks={},this.isMuted=!1,this.adPlaybackState=\"\",this.creativeTimeoutDelayInMs=1e4,this.vpaidDesiredBitrate=268,this.vpaidViewmode=\"normal\",this.playheadTime=0,this.videoBase=document.createElement(\"div\"),this.videoParent=null,this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=this.PLAYER_VPAID_VERSION=2},a.VPAIDRenderer.prototype={},a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer,a.VPAIDRenderer.VastCompanion=function(e,t,i,n){this._width=e,this._height=t,this._apiFramework=i,this._xmlNode=n},a.VPAIDRenderer.VastCompanion.prototype={getWidth(){return this._width},getHeight(){return this._height},_isValidResource:(e,t)=>\"StaticResource\"===e&&t[\"@attributes\"].creativeType||\"IFrameResource\"===e&&t.value||\"HTMLResource\"===e&&t.value,hasValidRendtions(){for(const e in this._xmlNode)if(this._xmlNode.hasOwnProperty(e)&&(\"StaticResource\"===e||\"IFrameResource\"===e||\"HTMLResource\"===e))for(let t=[].concat(this._xmlNode[e]),i=t.length-1;i>=0;i--)if(this._isValidResource(e,t[i]))return!0;return!1},translateToAdInstance(e){let t;if(this._xmlNode.CompanionClickThrough&&e.setClickThroughUrl(a.EVENT_AD_CLICK,this._xmlNode.CompanionClickThrough.value),this._xmlNode.TrackingEvents){var i=this._xmlNode.TrackingEvents;if(i.Tracking){var n=[];for(t=(i=[].concat(i.Tracking)).length-1;t>=0;t--)\"creativeView\"===i[t][\"@attributes\"].event&&n.push(i[t].value);n.length>0&&e.addEventCallbackUrls(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,n)}}for(const r in this._xmlNode)if(this._xmlNode.hasOwnProperty(r)&&(\"StaticResource\"===r||\"IFrameResource\"===r||\"HTMLResource\"===r))for(t=(i=[].concat(this._xmlNode[r])).length-1;t>=0;t--)if(this._isValidResource(r,i[t])){n=i[t];const o=e.addCreativeRendition();o.setWidth(this._width),o.setHeight(this._height),o.setCreativeApi(\"None\");const l=o.addCreativeRenditionAsset(`VPAIDAsset${t}`,!0);l.setContentType(\"text/html_doc_lit_mobile\"),l.setMimeType(\"text/html\");let d=e.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],h=r;var s;if(\"HTMLResource\"===h)l.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(n.value,e.getSlot().getCustomId(),this._width,this._height));else\"IFrameResource\"===h?s=\"iframe\":\"StaticResource\"===h&&(s=this._xmlNode.creativeType),l.setContent(a.HTMLAdGenerator.generateAd(n.value,d,e.getSlot().getCustomId(),this._width,this._height,s,l.getContentType()));a.debug(`rendtion width: ${o.getWidth()} height:${o.getHeight()} asset content:${l.getContent()}`)}}},a.VPAIDRenderer.VastCompanion.prototype.constructor=a.VPAIDRenderer.VastCompanion,a.VPAIDRenderer.VastAdSelect=function(){},a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio(e,t){const i=e.getWidth();e=e.getHeight();const n=t.getWidth();t=t.getHeight();let s=1;return i<=n&&e<=t&&(s=1-i*e/(n*t)),a.debug(`computing dead space ratio (${s}) for slot ${n}x${t} and ad ${i}x${e}`),s},matchAdsWithSlots(e,t){let i;for(a.log(\"VPAIDRenderer: Matching ads with slots\"),i=0;i<t.length;++i)t[i].matched=!1;let n=[],s=[];for(i=0;i<e.length;i++)for(var r=0;r<t.length;r++)s.push({ratio:this._getDeadSpaceRatio(e[i],t[r]),adIndex:i,slotIndex:r});for(s.sort(function(e,t){return e.ratio-t.ratio}),i=0;i<s.length&&1!==s[i].ratio;i++){let o=e[(r=s[i]).adIndex],l=t[r.slotIndex];o.matched||l.matched||(a.log(`Winning ratio:${r.ratio} Winning ad:${o.getWidth()}x${o.getHeight()} for slot:${l.getWidth()}x${l.getHeight()}`),n.push({ad:o,slot:l}),o.matched=!0,l.matched=!0)}return n}},a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect,a.Util.mixin(a.VPAIDRenderer.prototype,{_failWithError(e,t,i){const n={};n[a.INFO_KEY_ERROR_MODULE]=\"VPAIDRenderer\",n[a.INFO_KEY_ERROR_CODE]=e,i||(i=a.ERROR_VAST_GENERAL_VPAID_ERROR),n[a.INFO_KEY_VAST_ERROR_CODE]=i,t&&(n[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,n),this.dispose()},onCreativeTimeout(){a.log(\"VPAIDRenderer: onCreativeTimeout()\");const e=this.vpaidCreative.getTimeoutOperation();this._failWithError(a.ERROR_TIMEOUT,\"loadCreativeAsset\"!==e?`Creative function ${e} timeout`:\"load creative asset timeout\")},setVolume(e){a.log(`VPAIDRenderer: setVolume(${e})`),this.vpaidCreative&&this.vpaidCreative.setAdVolume(e)},onAdVolumeChange(){a.log(\"VPAIDRenderer: onAdVolumeChange()\");const e=this.vpaidCreative.getAdVolume();e<0||e>1?a.log(\"Invalid ad volume value\"):(this.isMuted&&100*e>2?(this.isMuted=!1,this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE})):!this.isMuted&&100*e<2&&(this.isMuted=!0,this._rendererController.processEvent({name:a.EVENT_AD_MUTE})),this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}))},onAdExpandedChange(){a.log(\"VPAIDRenderer: onAdExpandedChange()\"),this.vpaidCreative.getAdExpanded()?this._rendererController.processEvent({name:a.EVENT_AD_EXPAND}):this._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})},onAdDurationChange(){a.log(`VPAIDRenderer: onAdDurationChange(): duration changed to ${this.vpaidCreative.getAdDuration()}`)},onAdClickThru(e,t,i){a.log(`VPAIDRenderer: onAdClickThru() with url:${e} id:${t} playerHandles:${i}`),(t={name:a.EVENT_AD_CLICK,info:{}}).info[a.INFO_KEY_SHOW_BROWSER]=!0===i,!0===i?e?(a.log(\"onAdClickThru(): open window with overrided url\"),t.info[a.INFO_KEY_URL]=e):a.log(\"onAdClickThru(): open window with url booked in MRM UI or VAST clickthru url\"):a.log(\"onAdClickThru(): send click tracking\"),this._rendererController.processEvent(t)},onCreativeAssetLoaded(){a.log(\"VPAIDRenderer: onCreativeAssetLoaded()\"),this.vpaidCreative.cancelTimeoutEvent();let e=this,t=function(){const t=e.vpaidCreative.handshakeVersion(e.PLAYER_VPAID_VERSION.toFixed(1));return t?!(parseFloat(t)<e.SUPPORTED_CREATIVE_VPAID_VERSION_MIN)||(e._failWithError(a.ERROR_INVALID_VALUE,`Only support creatives with VPAID version >= ${e.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)}`),!1):(e._failWithError(a.ERROR_3P_COMPONENT,\"Cannot get VPAID version from the creative\"),!1)};if(function(){const t=e.vpaidCreative.checkVPAIDInterface(\"handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear\".split(\" \"));return t.passed||e._failWithError(a.ERROR_3P_COMPONENT,`Missing interfaces in the VPAID creative: ${t.missingInterfaces}`),t.passed}()&&t()){!function(){let t=e._rendererController.getParameter(a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY);t&&Number(t)>0&&(e.creativeTimeoutDelayInMs=Number(t)),a.log(`initParams(), creative timeout delay in miliseconds:${e.creativeTimeoutDelayInMs}`),t=parseFloat(e._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)),e.vpaidDesiredBitrate=t>0?t:e.vpaidDesiredBitrate,a.log(`initParams(), desired bitrate: ${e.vpaidDesiredBitrate}`)}(),e.creativeEventCallbacks={AdStarted:e.onAdStarted,AdStopped:e.onAdStopped,AdSkipped:e.onAdSkipped,AdLoaded:e.onAdLoaded,AdLinearChange:e.onAdLinearChange,AdSizeChange:e.onAdSizeChange,AdExpandedChange:e.onAdExpandedChange,AdDurationChange:e.onAdDurationChange,AdVolumeChange:e.onAdVolumeChange,AdImpression:e.onAdImpression,AdClickThru:e.onAdClickThru,AdVideoFirstQuartile:e.onAdVideoFirstQuartile,AdVideoMidpoint:e.onAdVideoMidpoint,AdVideoThirdQuartile:e.onAdVideoThirdQuartile,AdVideoComplete:e.onAdVideoComplete,AdUserAcceptInvitation:e.onAdUserAcceptInvitation,AdUserMinimize:e.onAdUserMinimize,AdUserClose:e.onAdUserClose,AdPaused:e.onAdPaused,AdPlaying:e.onAdResumed,AdError:e.onAdError,AdLog:e.onAdLog},e.vpaidCreative.setCallbacksForCreative(e.creativeEventCallbacks,e),this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),(t=this.rendition?this.rendition.getParameter(\"creativeData\"):null)||(t=this.rendition?this.rendition.getParameter(\"VPAID_creativeData\"):null),t&&(t=a.Util.trim(t)),t={AdParameters:t};let i=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width=\"0px\",this.videoBase.style.height=\"0px\",this.videoBase.style.zIndex=\"100000\",this.videoBase.style.position=\"absolute\",this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left,this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top,this.videoBase.className=\"fw_vpaid_slot\",this.videoParent=i.getBase();let n=this._rendererController.getContentVideoElement();if(\"nodeType\"in n&&n.nodeType>0)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(e){this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);n={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};let s=i.getWidth();i=i.getHeight(),s&&i||!this.rendition||(s=this.rendition.getWidth(),i=this.rendition.getHeight()),this.vpaidCreative.initAd(s,i,this.vpaidViewmode,this.vpaidDesiredBitrate,t,n)}},onAdLoaded(){a.log(\"VPAIDRenderer: onAdLoaded()\"),this.vpaidCreative.cancelTimeoutEvent(),a.log(`Ad duration:${this.getDuration()}`);let e=this,t=function(t,i){let n=i;if(a.debug(`${n.length} companion slots to fill.`),0!==n.length&&0!==t.length){const s=(new a.VPAIDRenderer.VastAdSelect).matchAdsWithSlots(t,n);if(0!==s.length){for(t=[],n=[],i=s.length-1;i>=0;i--)t.push(s[i].ad),n.push(s[i].slot);for(i=(n=e._rendererController.scheduleAdInstances(n)).length-1;i>=0;i--)t[i].translateToAdInstance(n[i])}}},i=function(e){if(!e)return a.log(\"The adCompanions property is empty.\"),null;if(a.log(`parsing adCompanions: ${e}`),window.DOMParser)var t=(new DOMParser).parseFromString(e,\"text/xml\");else(t=new ActiveXObject(\"Microsoft.XMLDOM\")).async=!1,t.loadXML(e);if(!(e=a.Util.xmlToJson(t))||!e.CompanionAds||!e.CompanionAds.Companion)return a.log(\"No companion ads found in parsed xml\"),[];t=[];for(let i=(e=[].concat(e.CompanionAds.Companion)).length-1;i>=0;i--){let n=e[i];if(n[\"@attributes\"]){let e=n[\"@attributes\"].width,i=n[\"@attributes\"].height;if(!e||!i||e<0||i<0)a.log(\"Missing width/height for companion.\");else{const s=n[\"@attributes\"].apiFramework||\"\";a.debug(`Companion ${e}x${i} api:${s}`),(n=new a.VPAIDRenderer.VastCompanion(e,i,s,n)).hasValidRendtions()&&t.push(n)}}}return t}(e.vpaidCreative.getAdCompanions());i&&i.length>0?t(i,this._rendererController.getCompanionSlots()):a.log(\"VPAIDAdRenderer: No companions from VPAID creative.\"),t=this._rendererController.getAdInstance()._context.getAdVolume(),!this.isMuted&&100*t<2&&(this.isMuted=!0),this.setVolume(t),this.vpaidCreative.startAd()},onVisibilityChange(){a.log(`onVisibilityChange:${document.hidden?\"invisible\":\"visible\"}`),a.log(`Current playback state:${this.adPlaybackState}`),document.hidden&&\"playing\"===this.adPlaybackState?(a.log(\"Pause the VPAID creative\"),this.vpaidCreative.pauseAd(),this.vpaidCreative._creativePausedByTabSwitch=!0):!document.hidden&&\"paused\"===this.adPlaybackState&&this.vpaidCreative._creativePausedByTabSwitch&&(a.log(\"Resume the VPAID creative\"),this.vpaidCreative.resumeAd(),this.vpaidCreative._creativePausedByTabSwitch=!1)},onAdStarted(){a.log(\"VPAIDRenderer: onAdStarted()\"),this.vpaidCreative.timeoutReached?a.log(\"VPAID ad has already failed due to timeout. The AdStarted event will not be handled.\"):(this.vpaidCreative.cancelTimeoutEvent(),this._visibilityChangeListener=this.onVisibilityChange.bind(this),document.addEventListener(\"visibilitychange\",this._visibilityChangeListener,!1))},onAdStopped(){a.log(\"VPAIDRenderer: onAdStopped()\"),this.vpaidCreative?(this.vpaidCreative.cancelTimeoutEvent(),this.timePositionClass===a.TIME_POSITION_CLASS_OVERLAY&&this.vpaidCreative.getAdLinear()&&this._rendererController.requestContentStateChange(!1),this.vpaidCreative&&!this.vpaidCreative.timeoutReached&&(this.adPlaybackState?(this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED),this.dispose()):(a.warn(\"Expecting AdStarted and AdImpression events but got AdStopped event instead. Fail.\"),this._failWithError(a.ERROR_3P_COMPONENT,\"Expecting AdStarted and AdImpression events from the VPAID creative but got AdStopped event instead\")))):a.log(\"The VPAID creative has been disposed. Return.\")},onAdImpression(){if(a.log(\"VPAIDRenderer: onAdImpression()\"),this.vpaidCreative.timeoutReached)a.log(\"VPAID ad has already failed due to timeout. The AdImpression event will not be handled.\");else{const e=this.vpaidCreative.getAdVolume();this.isMuted=e>0&&100*e<=2,this.adPlaybackState=\"playing\",this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)}},onAdLinearChange(){a.log(\"VPAIDRenderer: onAdLinearChange()\");const e=this.vpaidCreative.getAdLinear();e?a.log(\"onAdLinearChange(): non-linear click to linear -> request content video to pause\"):a.log(\"onAdLinearChange(): linear back to non-linear -> request content video to resume\"),this._rendererController.requestContentStateChange(e)},onAdSizeChange(){a.log(\"VPAIDRenderer: onAdSizeChange()\")},onAdPaused(){a.log(\"VPAIDRenderer: onAdPaused()\"),\"playing\"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.adPlaybackState=\"paused\"},onAdResumed(){a.log(\"VPAIDRenderer: onAdResumed()\"),\"paused\"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.adPlaybackState=\"playing\"},onAdSkipped(){a.log(\"VPAIDRenderer: onAdSkipped()\"),this.dispose(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},onAdVideoFirstQuartile(){a.log(\"VPAIDRenderer: onAdVideoFirstQuartile()\"),this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint(){a.log(\"VPAIDRenderer: onAdVideoMidpoint()\"),this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile(){a.log(\"VPAIDRenderer: onAdVideoThirdQuartile()\"),this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},onAdVideoComplete(){a.log(\"VPAIDRenderer: onAdVideoComplete\"),this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation(){a.log(\"VPAIDRenderer: onAdUserAcceptInvitation()\"),this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose(){a.log(\"VPAIDRenderer: onAdUserClose()\"),this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize(){a.log(\"VPAIDRenderer: onAdUserMinimize()\"),this._rendererController.processEvent({name:a.EVENT_AD_MINIMIZE})},onAdLog(e){a.log(`VPAIDRenderer: onAdLog: ${e}`)},onAdError(e){a.log(`VPAIDRenderer: onAdError(): ${e}`),this._failWithError(a.ERROR_3P_COMPONENT,`AdError event:${e}`)},start(e){if(a.log(\"VPAIDRenderer start()\"),this._rendererController=e,this.timePositionClass=this._rendererController.getAdInstance().getSlot().getTimePositionClass(),e=(e=(this.rendition=this._rendererController.getAdInstance().getActiveCreativeRendition())?this.rendition.getPrimaryCreativeRenditionAsset():null)?e.getUrl():null){this.vpaidCreative=new a.VPAIDWrapper,this.vpaidCreative.setTimeoutValueInMs(this.creativeTimeoutDelayInMs),this.vpaidCreative.addEventListener(\"timeout\",this.onCreativeTimeout.bind(this)),this.vpaidCreative.addEventListener(\"CreativeAssetLoaded\",this.onCreativeAssetLoaded.bind(this));try{this.vpaidCreative.loadCreativeAsset(e)}catch(e){this._failWithError(a.ERROR_IO,e)}}else this._failWithError(a.ERROR_NULL_ASSET,\"Creative asset url cannot be null\")},stop(){a.log(\"VPAIDRenderer stop()\"),this.vpaidCreative.stopAd()},info:()=>({moduleType:a.MODULE_TYPE_RENDERER}),getPlayheadTime(){let e=this.vpaidCreative.getAdDuration(),t=this.vpaidCreative.getAdRemainingTime();return e>=0&&t>=0&&(this.playheadTime=e-t),this.playheadTime<0&&(this.playheadTime=-1),this.playheadTime},getDuration(){const e=this.vpaidCreative.getAdDuration();return e>=0?e:-1},pause(){a.log(\"VPAIDRenderer pause()\"),this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.vpaidCreative.canPauseAd()?\"playing\"===this.adPlaybackState&&(this.adPlaybackState=\"pausing\",this.vpaidCreative.pauseAd()):a.log(\"The creative is not able to pause\")},resume(){a.log(\"VPAIDRenderer resume()\"),this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.vpaidCreative.canResumeAd()?\"paused\"===this.adPlaybackState&&(this.adPlaybackState=\"resuming\",this.vpaidCreative.resumeAd()):a.log(\"The creative is not able to resume\")},dispose(){a.log(\"VPAIDRenderer dispose()\"),this.vpaidCreative&&(this.videoParent&&(this.videoParent.removeChild(this.videoBase),this.videoParent=null),this._visibilityChangeListener&&(a.log(\"remove visibilitychange listener\"),document.removeEventListener(\"visibilitychange\",this._visibilityChangeListener,!1)),this.vpaidCreative.removeCallbacksForCreative(this.creativeEventCallbacks),this.vpaidCreative.removeEventListener(\"timeout\"),this.vpaidCreative=null)},resize(){a.log(\"VPAIDAdRenderer resize()\");let e=this._rendererController.getAdInstance().getSlot(),t=e.getWidth();e=e.getHeight(),a.log(`VPAIDRenderer new size width:${t} height:${e}`),this.vpaidCreative.resizeAd(t,e,this.vpaidViewmode)}}),a},w.tv.freewheel.SDK||(w.tv.freewheel.SDK=w.tv.freewheel[U](\"tv.freewheel.SDK\"))}()},BSqE:function(e){e.exports={name:\"freewheel\",type:\"adapter\",tech:\"js\",author:\"Jesus Lopez\",version:\"6.4.1\",built:\"2018-12-20\",repo:\"https://bitbucket.org/npaw/freewheel-adapter-js\",libVersion:\"^6.4.9\",features:{buffer:\"monitor\",seek:\"monitor\",getters:[\"getPlayhead\",\"getDuration\",\"getTitle\",\"getResource\",\"getPosition\"]},ads:[]}},BaCU:function(e,t,i){var n=s,s={noConflict:function(){return s=n,this}};s.VERSION=i(\"/8Pf\"),s.polyfills=i(\"Yj3O\"),s.Object=i(\"841u\"),s.Emitter=i(\"2aCO\"),s.Log=i(\"YXkS\"),s.Log.loadLevelFromUrl(),s.Util=i(\"YWDr\"),s.HybridNetwork=i(\"bHAv\"),s.Chrono=i(\"be/F\"),s.Timer=i(\"XHki\"),s.Constants=i(\"RVfe\"),s.Request=i(\"UbSY\"),s.Communication=i(\"Jt0h\"),s.Transform=i(\"CrDl\"),s.ViewTransform=i(\"dZ6b\"),s.ResourceTransform=i(\"xTCX\"),s.CdnParser=i(\"KbJE\"),s.HlsParser=i(\"hi9x\"),s.OfflineParser=i(\"aqLn\"),s.LocationheaderParser=i(\"dD1v\"),s.Options=i(\"Qygl\"),s.Plugin=i(\"RpSF\"),s.Storage=i(\"ENfY\"),s.RequestBuilder=i(\"cZg5\"),s.PlayheadMonitor=i(\"9/T3\"),s.Adapter=i(\"Qbk1\"),s.StandardAdapter=i(\"rVUg\"),s.adapters={},s.Infinity=i(\"xUQT\"),s.BackgroundDetector=i(\"Gr0D\"),s.DeviceDetector=i(\"4S5m\"),s.Fingerprint=i(\"WmHI\"),s.registerAdapter=function(e,t){this.adapters[e]=t}.bind(s),s.unregisterAdapter=function(e){this.adapters[e]=null}.bind(s),e.exports=s},CrDl:function(e,t,i){var n=i(\"2aCO\").extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName=\"Transform\"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(n.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:\"done\"}});e.exports=n},DIcC:function(e,t){var i={getContext:function(){return this.storage.getSession(\"context\")},getSessionId:function(){return this.storage.getSession(\"session\")||this.storage.getLocal(\"session\")},getStoredData:function(){return this.storage.getSession(\"data\")||this.storage.getLocal(\"data\")},getDataTime:function(){return this.storage.getSession(\"dataTime\")||this.storage.getLocal(\"dataTime\")},getLastActive:function(){return this.storage.getSession(\"lastactive\")||this.storage.getLocal(\"lastactive\")},setStoredData:function(e){this.storage.setLocal(\"data\",e),this.storage.setSession(\"data\",e)},setSessionId:function(e){this.storage.setLocal(\"session\",e),this.storage.setSession(\"session\",e)},setDataTime:function(e){this.storage.setLocal(\"dataTime\",e),this.storage.setSession(\"dataTime\",e)},setLastActive:function(e){this.storage.setLocal(\"lastactive\",e),this.storage.setSession(\"lastactive\",e)},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var e=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<e-this.sessionExpire},getIsDataExpired:function(){var e=(new Date).getTime();return!this.getStoredData()||this.infinity.getFirstActive()<e-this.sessionExpire}};e.exports=i},ENfY:function(e,t,i){var n=i(\"841u\"),s=i(\"YXkS\"),a=n.extend({constructor:function(e,t){this.prefix=e||\"youbora\",this.forceCookies=t||!1},setLocal:function(e,t){try{return this.forceCookies||\"undefined\"==typeof localStorage||!localStorage?this._setCookie(this.prefix+\".\"+e,t):localStorage.setItem(this.prefix+\".\"+e,t)}catch(e){s.error(\"Youbora Infinity needs localStorage or cookies, not supported by your browser.\")}return null},getLocal:function(e){try{return this.forceCookies||\"undefined\"==typeof localStorage||!localStorage?this._getCookie(this.prefix+\".\"+e):localStorage.getItem(this.prefix+\".\"+e)}catch(e){s.error(\"Youbora Infinity needs localStorage or cookies, not supported by your browser.\")}return null},removeLocal:function(e){try{return this.forceCookies||\"undefined\"==typeof localStorage||!localStorage?this._removeCookie(this.prefix+\".\"+e):localStorage.removeItem(this.prefix+\".\"+e)}catch(e){s.error(\"Youbora Infinity needs localStorage or cookies, not supported by your browser.\")}return null},setSession:function(e,t){try{return this.forceCookies||\"undefined\"==typeof sessionStorage||!sessionStorage?this._setCookie(this.prefix+\".session.\"+e,t):sessionStorage.setItem(this.prefix+\".\"+e,t)}catch(e){s.error(\"Youbora Infinity needs sessionStorage or cookies, not supported by your browser.\")}return null},getSession:function(e){try{return this.forceCookies||\"undefined\"==typeof sessionStorage||!sessionStorage?this._getCookie(this.prefix+\".session.\"+e):sessionStorage.getItem(this.prefix+\".\"+e)}catch(e){s.error(\"Youbora Infinity needs sessionStorage or cookies, not supported by your browser.\")}return null},removeSession:function(e){try{return this.forceCookies||\"undefined\"==typeof sessionStorage||!sessionStorage?this._removeCookie(this.prefix+\".session.\"+e):sessionStorage.removeItem(this.prefix+\".\"+e)}catch(e){s.error(\"Youbora Infinity needs sessionStorage or cookies, not supported by your browser.\")}return null},_setCookie:function(e,t){document.cookie=e+\"=\"+t+\";\"},_getCookie:function(e){for(var t=e+\"=\",i=decodeURIComponent(document.cookie).split(\";\"),n=0;n<i.length;n++){for(var s=i[n];\" \"==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null},_removeCookie:function(e){document.cookie=e+\"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;\"}});e.exports=a},\"GF/T\":function(e,t,i){\"use strict\";i.d(t,\"e\",function(){return n}),i.d(t,\"c\",function(){return s}),i.d(t,\"b\",function(){return a}),i.d(t,\"d\",function(){return r}),i.d(t,\"a\",function(){return o}),i.d(t,\"f\",function(){return l});const n=\"preroll\",s=\"midroll\",a=\"display\",r=\"overlay\",o=\"dai\",l=\"sponsor\"},Gr0D:function(e,t,i){var n=i(\"841u\").extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(e){this.isBackgroundDetectorStarted?e!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(e)):(e&&(this.windowObject=e),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener(\"visibilitychange\",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener(\"visibilitychange\",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject=\"undefined\"!=typeof window?window:void 0},_visibilityListener:function(e){if(\"hidden\"===this.windowObject.document.visibilityState){if(this.isInBackground=!0,\"string\"==typeof(i=this._getSettings())){switch(i){case\"stop\":this._fireStop();break;case\"pause\":this._firePause()}if(null!=this.plugin.storage.getLocal(\"infinityStarted\")&&!this.plugin.storage.getLocal(\"infinityStopped\")){this.lastBeatTime=(new Date).getTime();var t=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(t),this.plugin._beat.stop()}}}else if(\"visible\"===this.windowObject.document.visibilityState){var i;if(this.isInBackground=!1,\"string\"==typeof(i=this._getSettings())&&i&&null!=this.plugin.storage.getLocal(\"infinityStarted\")&&!this.plugin.storage.getLocal(\"infinityStopped\")){var n=(new Date).getTime();n-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(n-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return\"string\"==typeof this.plugin.options[\"background.settings\"]&&this.plugin.options[\"background.settings\"]?this.plugin.options[\"background.settings\"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options[\"background.settings.tv\"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options[\"background.settings.desktop\"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options[\"background.settings.android\"]:this.plugin.deviceDetector.isIphone()?this.plugin.options[\"background.settings.iphone\"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options[\"background.enabled\"]&&this.plugin.backgroundDetector._getSettings()}});e.exports=n},HstH:function(e,t){e.exports={cdnName:\"HIGHNEGR\",parsers:[{element:\"host+type\",headerName:\"X-HW\",regex:/.+,[0-9]+\\.(.+)\\.(.+)/}],parseType:function(e){switch(e){case\"c\":case\"x\":return 1;default:return 2}}}},Jt0h:function(e,t,i){var n=i(\"841u\"),s=i(\"YXkS\"),a=i(\"UbSY\"),r=i(\"CrDl\"),o=n.extend({constructor:function(e){this.transforms=[],this.pluginRef=e,this._requests=[]},sendRequest:function(e,t,i){e&&(\"function\"==typeof t&&e.on(a.Event.SUCCESS,t,i),this._registerRequest(e))},buildRequest:function(e,t,i,n){var s=new a(e,t,i=i||{});\"function\"==typeof n&&s.on(a.Event.SUCCESS,n),this._registerRequest(s)},addTransform:function(e){e.parse&&e.isBlocking?(this.transforms.push(e),e.on(r.Event.DONE,this._processRequests.bind(this))):s.warn(e+\" is not a valid RequestTransform.\")},removeTransform:function(e){var t=this.transforms.indexOf(e);-1!==t?this.transforms.splice(t,1):s.warn(\"Trying to remove unexisting Transform '\"+e+\"'.\")},_registerRequest:function(e){this._requests.push(e),this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];for(var t=[];e.length;){var i=e.shift(),n=this._transform(i);n===r.STATE_NO_BLOCKED?(this.pluginRef&&(i.host=this.pluginRef.getHost()),i.send()):n===r.STATE_BLOCKED&&t.push(i)}for(;t.length;)this._requests.push(t.shift())},_transform:function(e){var t=r.STATE_NO_BLOCKED;return this.transforms.forEach(function(i){i.isBlocking(e)?t=r.STATE_BLOCKED:(i.parse(e),i.getState()!==r.STATE_OFFLINE||(t=r.STATE_OFFLINE))}),t}});e.exports=o},KbJE:function(e,t,i){var n=i(\"2aCO\"),s=i(\"YXkS\"),a=i(\"YWDr\"),r=i(\"UbSY\"),o=n.extend({constructor:function(e){this._options=a.assign({cdnName:null,parsers:[],requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),i=new r(e,null,null,{method:\"HEAD\",maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(r.Event.SUCCESS,function(e){this._responses[t]=e.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[t])}.bind(this)),i.on(r.Event.ERROR,function(e){this.done()}.bind(this)),i.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){e.split(\"\\n\").forEach(function(e){var i=e.indexOf(\":\");-1!==i&&(e.slice(0,i)===t.headerName&&this._executeParser(t,e.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(e,t){try{var i=e.regex.exec(t.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case o.ElementType.HOST:this._cdnNodeHost=i[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case o.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(e){s.warn(\"CDN parsing for \"+this._options.cdnName+\" could not parse header value \"+t)}}},{Event:{DONE:\"done\"},ElementType:{HOST:\"host\",TYPE:\"type\",HOST_AND_TYPE:\"host+type\",TYPE_AND_HOST:\"type+host\",NAME:\"name\"},_cdnConfigs:{},setBalancerHeaderName:function(e){o._cdnConfigs.Balancer.parsers[0].headerName=e},create:function(e){if(o._cdnConfigs[e])return new o(o._cdnConfigs[e]);s.warn(\"Tried to create an unexisting CdnParser named \"+e)},add:function(e,t){o._cdnConfigs[e]=t}});o.add(\"Level3\",i(\"fl1Y\")),o.add(\"Cloudfront\",i(\"yVQy\")),o.add(\"Akamai\",i(\"569I\")),o.add(\"Highwinds\",i(\"HstH\")),o.add(\"Fastly\",i(\"tbpS\")),o.add(\"Balancer\",i(\"RdG8\")),e.exports=o},LOY9:function(e,t,i){\"use strict\";i.r(t);var n=i(\"yuIl\"),s=i(\"6UxA\"),a=i(\"Myzn\"),r=i(\"bOQk\"),o=i(\"r6MD\"),l=i(\"XVuB\"),d=i.n(l),h=(i(\"B97I\"),i(\"+khe\")),_=i(\"DQ/S\"),c=i(\"xIVu\"),u=i(\"s9ns\"),p=i(\"SrXj\"),E=i(\"JF4u\"),g=i(\"ZAXx\"),T=i(\"5s7G\"),A=i(\"h0tQ\"),m=i(\"xNNX\");const f=e=>{e.style.position=\"absolute\",e.style.width=\"100%\",e.style.height=\"100%\"},S=e=>{if(e.removeAttribute(\"width\"),e.removeAttribute(\"height\"),E.IS_IE){e.style.display=\"none\";const t=e.parentElement;f(t),t.style.display=\"inline-block\",t.style[\"background-size\"]=\"cover\",t.style[\"background-position\"]=\"center center\",t.style[\"background-image\"]=`url('${e.src}')`}else f(e),e.style[\"object-fit\"]=\"cover\",e.style.left=\"50%\",e.style.top=\"50%\",e.style.transform=\"translate(-50%, -50%)\"};var R=i(\"GF/T\"),I=i(\"mkvH\");function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);\"function\"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){C(e,t,i[t])})}return e}function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class extends h.a{constructor(...e){super(...e),this.onAdEvent=(e=>{const t=e.subType,i=e.slot,n=tv.freewheel.SDK,s=n.EVENT_TYPE_CLICK,a=n.EVENT_AD_INITIATED,r=n.EVENT_ERROR,o=n.EVENT_AD_SKIPPED,l=n.EVENT_AD_PAUSE,d=n.EVENT_AD_IMPRESSION,h=n.EVENT_AD_FIRST_QUARTILE,_=n.EVENT_AD_MIDPOINT,c=n.EVENT_AD_THIRD_QUARTILE,u=n.EVENT_AD_IMPRESSION_END,p=n.EVENT_AD_RESUME,E=n.EVENT_AD_CLICK,g=n.SLOT_TYPE_TEMPORAL;if(i.getType()!==g)return;const A=this.isSlotLinear(i);switch(t){case r:this.onAdError(e);break;case a:{const e=i.getCurrentAdInstance(),t=e.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset(),n=this.getBaseAdData(e);A&&(T.a.setOptions({\"ad.campaign\":n.placementId}),T.a.setOptions({\"ad.title\":e._creativeId})),this.eventsHandlers.onStarted(v({},n,{linear:A,duration:e.getDuration(),type:this.getAdType(i,e),clickThroughUrl:e.getEventCallbackUrls(E,s)[0],mimeType:t.getMimeType(),hasCompanions:!!e.getCompanionAdInstances().length}))}}if(A)switch(t){case l:this.eventsHandlers.onPaused();break;case d:this.eventsHandlers.onPlaying(),this.resize();break;case h:this.eventsHandlers.onFirstQuartile();break;case _:this.eventsHandlers.onMidPoint();break;case c:this.eventsHandlers.onThirdQuartile();break;case u:{this.eventsHandlers.onEnded();const e=tv.freewheel.SDK.HTMLRenderer;i.getCurrentAdInstance().getCompanionAdInstances().forEach(t=>{const i=t.getRendererController().getRenderer();i instanceof e&&i.hide()})}Object(m.q)(this.videoRef);break;case p:this.eventsHandlers.onPlaying();break;case E:this.eventsHandlers.onClicked(null,null,!this.isRequestModeLive())}if(!A)switch(t){case o:case u:{const e=i.getCurrentAdInstance();this.eventsHandlers.onSkipped({type:this.getAdType(i,e)})}break;case E:this.eventsHandlers.onClicked()}}),this.onRequestComplete=(e=>{if(this.cuePoints=[],Object(o.a)(e,\"response.errors.errors\",[]).length&&this.onAdError(e),e.success){const e=tv.freewheel.SDK,t=e.TIME_POSITION_CLASS_PREROLL,i=e.TIME_POSITION_CLASS_MIDROLL,n=e.TIME_POSITION_CLASS_DISPLAY,s=e.TIME_POSITION_CLASS_OVERLAY;[t,i,n,s].reduce((e,t)=>[...e,...this.currentAdContext.getSlotsByTimePositionClass(t)],[]).forEach(e=>{const i=parseInt(e.getTimePosition(),10),n=e.getTimePositionClass();A.a.debug(\"freewheel.bridge\",\"onRequestComplete\",`Fetched slot ${n}.${i} has a duration of ${e.getTotalDuration()}`),n&&(Object(r.a)(this.slots,`${n}.${i}`,e),n!==t&&i&&this.cuePoints.push(i))}),this.shouldAutoPlay&&(this.eventsHandlers.onProviderLoaded(),this.startBreak(t,0),this.startNonLinearBreaks(0))}else this.eventsHandlers.onProviderLoaded(),this.onAdError(e,_.a),this.shouldAutoPlay&&this.contentHandlers.playerPlay()}),this.onRequestCompleteChromecast=(e=>{if(e.success){const e=[],t=[],i=tv.freewheel.SDK,n=i.EVENT_AD_CLICK,s=i.EVENT_AD_IMPRESSION,a=i.EVENT_AD_IMPRESSION_END,r=i.EVENT_AD_PAUSE,o=i.EVENT_AD_RESUME,l=i.EVENT_AD_FIRST_QUARTILE,d=i.EVENT_AD_MIDPOINT,h=i.EVENT_AD_THIRD_QUARTILE,_=i.EVENT_AD_COMPLETE,c=i.EVENT_TYPE_CLICK,u=i.EVENT_TYPE_STANDARD,p=i.EVENT_TYPE_IMPRESSION,E=i.EVENT_SLOT_IMPRESSION,g=i.EVENT_SLOT_END;this.currentAdContext.getTemporalSlots().forEach(i=>{const T=parseInt(i.getTimePosition(),10),A={id:`${i.getTimePositionClass()}-${T}`,breakClipIds:[],position:T,duration:i.getTotalDuration(),customData:{tracking:{impression:i.getEventCallbackUrls(E,p),impressionEnd:i.getEventCallbackUrls(g,p)}}};i.getAdInstances().forEach(e=>{const E=e._creativeId;if(t.find(({id:e})=>e===E))A.breakClipIds.push(E);else{const g=e.getRenderableCreativeRenditions().map(e=>(e.fillSpaceRatio=e.getWidth()*e.getHeight()/(window.innerWidth*window.innerHeight),e));g.sort((e,t)=>e.fillSpaceRatio<=t.fillSpaceRatio);const T=g.find(e=>{const t=e.getPrimaryCreativeRenditionAsset();return!t.getMimeType().includes(\"javascript\")&&t.getUrl()});if(T){const g=T.getPrimaryCreativeRenditionAsset();t.push({id:E,contentId:g.getUrl(),contentType:g.getMimeType(),duration:T.getDuration(),customData:v({},this.getBaseAdData(e),{duration:e.getDuration(),type:e.isBillBoard()?\"sponsor\":i.getTimePositionClass().toLowerCase(),clickThroughUrl:e.getEventCallbackUrls(n,c)[0],mimeType:g.getMimeType(),tracking:{impression:e.getEventCallbackUrls(s,p),impressionEnd:e.getEventCallbackUrls(a,p),firstQuartile:e.getEventCallbackUrls(l,p),midpoint:e.getEventCallbackUrls(d,p),thirdQuartile:e.getEventCallbackUrls(h,p),complete:e.getEventCallbackUrls(_,p),pause:e.getEventCallbackUrls(r,u),resume:e.getEventCallbackUrls(o,u)}})}),A.breakClipIds.push(E)}}}),e.push(A)}),this.eventsHandlers.onProviderLoaded({breaks:e,breakClips:t})}else this.eventsHandlers.onProviderLoaded({}),this.onAdError(e,_.a)}),this.onSlotEnded=(({slot:e})=>{e&&this.isSlotLinear(e)&&this.endBreak()}),this.isRequestModeLive=(()=>this.currentAdContext._adRequest._requestMode===tv.freewheel.SDK.REQUEST_MODE_LIVE),this.getSlotType=(e=>this.isRequestModeLive()?R.a:e.getTimePositionClass().toLowerCase()),this.getAdType=((e,t)=>this.isRequestModeLive()?R.a:t.isBillBoard()?R.f:this.getSlotType(e)),this.getAdCreativeId=(({_creativeId:e})=>e),this.slots={},this.errorsAsWarning=[tv.freewheel.SDK.ERROR_NO_AD_AVAILABLE]}init(){return super.init().then(()=>{this.slots={},this.overrideFreeWheelSDK(),tv.freewheel.SDK.setLogLevel(this.config.options.debug?tv.freewheel.SDK.LOG_LEVEL_INFO:tv.freewheel.SDK.LOG_LEVEL_QUIET),this.adManager||(this.adManager=new tv.freewheel.SDK.AdManager),this.adManager.setNetwork(this.config.networkId),this.adManager.setServer(this.config.host),this.requestAds()})}release(){this.reload(this.config)}reload(e){super.reload(e),this.currentAdSlot&&this.currentAdSlot.stop(),this.currentAdContext&&(this.currentAdContext.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.onRequestComplete),this.currentAdContext.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.onSlotEnded),this.currentAdContext.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.onAdEvent),this.currentAdContext.dispose()),this.currentAdContext=null,this.currentAdSlot=null}getCreativeParameter(e,t,i){const n=this.currentAdContext._adResponse.getCreative(e,t);return n?n.getParameter(i):null}getBaseAdData(e){const t=this.getCreativeParameter(e.getAdId(),e._creativeId,\"ias_parameters\");return{id:e.getAdId(),placementId:Object(g.a)(t,\"placementId\"),campaignId:Object(g.a)(t,\"campaignId\"),creativeId:e._creativeId,publisherId:this.getCreativeParameter(e.getAdId(),e._creativeId,\"advertVideoId\"),chanId:this.currentAdContext._adResponse.getSiteSectionCustomId()}}async onAdError(e,t=_.b){if(-1===this.errorsAsWarning.indexOf(e.errorCode)){const i=new u.a(c.a,t,!1,e.errorModule,e.errorCode);if(e.slot){const t=e.slot.getCurrentAdInstance(),n=t.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset();i.content={subType:e.subType,ad:v({},this.getBaseAdData(t),{mediaFile:{url:n.getUrl(),mimeType:n.getMimeType()}})}}i.adRequestUrl=Object(o.a)(this.currentAdContext,\"_adManager._serverURL\"),i.adRequest=Object(o.a)(e,\"response.errors.errors\",[]),this.eventsHandlers.onError(i)}}isSlotLinear(e){const t=tv.freewheel.SDK;return[t.TIME_POSITION_CLASS_PREROLL,t.TIME_POSITION_CLASS_MIDROLL,t.TIME_POSITION_CLASS_POSTROLL].includes(e.getTimePositionClass())}getSlot(e,t){return Object(o.a)(this.slots,`${e}.${t}`)}isBlackListed(e){return!!this.config.blacklist.find(t=>{let i=Object.keys(t).length;return Object(a.a)(t,(t,n)=>{t===e[n]&&i--}),0===i})}overrideFreeWheelSDK(){if(tv.freewheel.SDK.Slot.overrided)return void tv.freewheel.SDK.HTMLRenderer.setFullBrowser(this.config.fullBrowser);tv.freewheel.SDK.HTMLRenderer=function(e=!1){const t=tv.freewheel.SDK,i=t.TIME_POSITION_CLASS_DISPLAY,n=t.HTMLRenderer;class s extends n{constructor(...e){super(...e),this.isDisplaySlot=(()=>this._rendererController.getAdInstance().getSlot().getTimePositionClass()===i)}static setFullBrowser(e=!1){s.fullBrowser=e}presentInline(...e){if(super.presentInline(...e),!s.fullBrowser||!this.isDisplaySlot())return;const t=this.defaultAdElement,i=t.style,n=t.contentDocument;i.display=\"block\",i.position=\"absolute\",i.top=\"0\",i.left=\"0\",i.width=\"100%\",i.height=\"100%\";const a=n.querySelector(\"img\");a&&S(a)}hide(){s.fullBrowser&&this.isDisplaySlot()&&(this.defaultAdElement.style.display=\"none\")}}return s.setFullBrowser(e),s}(this.config.fullBrowser);const e=this.config.adUnitBillboard;tv.freewheel.SDK.AdInstance.prototype.isBillBoard=function(){return e.includes(Number(this.getSoAdUnit()))};const t=this,i=tv.freewheel.SDK.Slot;tv.freewheel.SDK.Slot=function(...e){const n=new i(...e);return n.__tp_playNextAdInstance=n.playNextAdInstance,n.playNextAdInstance=((...e)=>{const i=n.getCurrentAdInstance();if(i&&(i._isInitiatedSent&&!i._isImpressionSent||!i._isInitiatedSent))return n.__tp_playNextAdInstance(...e);const s=n._nextPlayableAdInstance();return s&&s.isBillBoard()&&!t.jingles.sponsorDisplayed?(t.jingles.sponsorDisplayed=!0,t.contentHandlers.jingleDisplay(\"sponsor\").then(n.__tp_playNextAdInstance.bind(n,...e))):n.__tp_playNextAdInstance(...e)}),n.__tp_parse=n.parse,n.parse=(e=>{try{n.eventCallbacks=e.eventCallbacks||[],n.getEventCallbackUrls||(n.getEventCallbackUrls=((e,t)=>n.eventCallbacks.filter(({name:i,type:n})=>e===i&&t===n).map(({url:e})=>e))),e.selectedAds=e.selectedAds.filter(({adId:i,creativeId:n})=>{const s=t.getCreativeParameter(i,n,\"ias_parameters\"),a={id:i,placementId:Object(g.a)(s,\"placementId\"),campaignId:Object(g.a)(s,\"campaignId\"),creativeId:n,slot:e.timePositionClass&&e.timePositionClass.toLowerCase(),siteSection:t.config.siteSection,videoAsset:t.config.videoAsset};return!t.isBlackListed(a)||(t.eventsHandlers.onBlackListed(a),!1)})}catch(e){A.a.error(\"freewheel.bridge\",\"slot.parse\",e)}return n.__tp_parse(e)}),n},tv.freewheel.SDK.Slot.overrided=!0}populateKeyValues({siteSection:e,cpc:t,thirdParties:i,gdpr:n}){const s=Object(p.d)(\"kuid\");if(this.currentAdContext.addKeyValue(\"kuid\",Object(p.d)(\"user\")),this.currentAdContext.addKeyValue(\"kruxuserid\",s),this.currentAdContext.addKeyValue(\"sitesection\",e),t.user){const e=t.user.UID;this.currentAdContext.setVisitor(e),this.currentAdContext.addKeyValue(\"guid\",e),this.currentAdContext.addKeyValue(\"_fw_vcid2\",e)}else this.currentAdContext.setVisitor(s),this.currentAdContext.addKeyValue(\"_fw_vcid2\",s);const r=i.heartbeat,l=i.realTimeSegments,d=i.nuggad;r&&r.enabled&&this.currentAdContext.addKeyValue(\"heartbeat-sessionid\",Object(o.a)(r,\"view.sessionId\")),l&&l.active&&l.tags.forEach(e=>{this.currentAdContext.addKeyValue(e,\"1\")}),d&&d.active&&d.tags.forEach(e=>{const t=e.split(\":\");this.currentAdContext.addKeyValue(t[0],t[1])}),Object(a.a)(this.config.keyValues,(e,t)=>{this.currentAdContext.addKeyValue(t,e)}),n&&n.adTargeting.consent&&this.currentAdContext.addKeyValue(\"gdpr_consented_providers\",Array.from(I.n.keys()).join(\",\"))}requestAds(e={},{duration:t,start:i}={}){const n=Object(s.a)({},this.config,e),a=n.profile,r=n.volume,o=n.videoAsset,l=n.fallbackId,h=n.siteSection;this.currentAdContext=this.adManager.newContext(),this.currentAdContext.setProfile(a),this.currentAdContext.setRequestMode(t?tv.freewheel.SDK.REQUEST_MODE_LIVE:tv.freewheel.SDK.REQUEST_MODE_ON_DEMAND),this.currentAdContext.setAdVolume(r),this.currentAdContext.setVideoAsset(o,null,null,null,this.shouldAutoPlay?tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED,null,null,l,t?tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_VARIABLE:tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_EXACT),this.currentAdContext.setSiteSection(h),this.populateKeyValues(n),this.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,E.IS_CHROMECAST?this.onRequestCompleteChromecast:this.onRequestComplete),this.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.onSlotEnded),this.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_AD,this.onAdEvent),E.IS_CHROMECAST||this.currentAdContext.registerVideoDisplayBase(this.containerRef.id),this.currentAdContext.setCapability(\"scpv\",tv.freewheel.SDK.CAPABILITY_STATUS_ON),this.currentAdContext.setCapability(tv.freewheel.SDK.CAPABILITY_SLOT_TEMPLATE,tv.freewheel.SDK.CAPABILITY_STATUS_ON),this.currentAdContext.setCapability(tv.freewheel.SDK.CAPABILITY_SLOT_CALLBACK,tv.freewheel.SDK.CAPABILITY_STATUS_ON),this.currentAdContext.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_OVERRIDE),this.currentAdContext.setParameter(tv.freewheel.SDK.PARAMETER_DESIRED_BITRATE,this.desiredBitrate,tv.freewheel.SDK.PARAMETER_LEVEL_OVERRIDE),t&&(this.currentAdContext.setRequestDuration(t),this.currentAdContext.addTemporalSlot(`DAI_${Math.round(i)}`,tv.freewheel.SDK.ADUNIT_MIDROLL,i,null,null,t,t)),T.a.setAdsAdapter(d.a,this),this.currentAdContext.submitRequest()}startBreak(e,t){const i=this.getSlot(e,t);if(i){let s=Promise.resolve();if(i.getAdInstances().length){const t=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,a=this.isRequestModeLive();a||(s=this.contentHandlers.jingleDisplay(\"ads\"),e===t&&this.contentHandlers.playerPause()),s=s.then(()=>{const t=i.getAdInstances(),s=t.filter(e=>e.isBillBoard()).map(this.getAdCreativeId),r=Object(n.a)(t.map(this.getAdCreativeId),s);this.eventsHandlers.onBreakStarted({type:a?\"dai\":e.toLowerCase(),creativeIds:r,sponsorIds:s})})}return s.then(()=>this.playNextSlot(e,t))}return this.contentHandlers.playerPlay()}startNonLinearBreaks(e){const t=tv.freewheel.SDK;[t.TIME_POSITION_CLASS_DISPLAY,t.TIME_POSITION_CLASS_OVERLAY].forEach(t=>{const i=this.getSlot(t,e);i&&i.play()})}playNextSlot(e,t){const i=this.getSlot(e,t);this.resize(),i&&(this.currentAdSlot=i,this.currentAdSlot.play())}endBreak(){const e=this.currentAdSlot.getAdInstances(),t=this.currentAdSlot.getTimePositionClass().toLowerCase(),i=this.config,n=i.siteSection,s=i.videoAsset,a=[];e.filter(t=>e.find(e=>e!==t&&e._creativeId===t._creativeId)).forEach(e=>{a.find(({_creativeId:t})=>t===e._creativeId)||a.push(e)}),this.eventsHandlers.onBreakEnded(a.map(e=>{const i=e.getActiveCreativeRendition(),a=i.getPrimaryCreativeRenditionAsset();return{siteSection:n,videoAsset:s,slot:t,creativeId:e._creativeId,wrapperUrl:i.getWrapperUrl(),assetUrl:a&&a.getUrl()}})),this.currentAdSlot=null,this.contentHandlers.playerPlay()}play(e){this.currentAdSlot?this.isEnded()?this.currentAdSlot.skipCurrentAd():this.currentAdSlot.resume():this.currentAdContext&&0===e&&(1===this.currentAdContext._requestState?this.shouldAutoPlay=!0:this.getSlot(tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,0)?(this.eventsHandlers.onProviderLoaded(),this.startBreak(tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,0),this.startNonLinearBreaks(0)):(this.eventsHandlers.onProviderLoaded(),this.contentHandlers.playerPlay()))}isEnded(){if(this.currentAdSlot){const e=this.currentAdSlot.getCurrentAdInstance();if(e)return e.getPlayheadTime()>=e.getDuration()}return!1}isPaused(){const e=tv.freewheel.SDK.VPAIDRenderer;if(this.currentAdSlot){const t=this.currentAdSlot.getCurrentAdInstance();if(t){const i=t.getRendererController().getRenderer();return i instanceof e?\"pausing\"===i.adPlaybackState||\"paused\"===i.adPlaybackState:this.videoRef.paused}}return!0}pause(){this.currentAdSlot&&this.currentAdSlot.pause()}stop(){if(this.currentAdSlot){try{this.currentAdSlot.stop()}catch(e){A.a.error(\"freewheel.bridge\",\"stop\",e)}this.currentAdSlot=null}}setVolume(e){super.setVolume(e),this.currentAdContext&&this.currentAdContext.setAdVolume(e)}resize(){this.currentAdContext&&this.containerRef&&this.currentAdContext.resize(this.containerRef.offsetWidth,this.containerRef.offsetHeight)}contentHasProgressed(e){if(this.currentAdContext){this.currentAdContext.setVideoAssetCurrentTimePosition(e);const t=this.cuePoints.indexOf(Math.round(e));if(-1!==t){const e=this.cuePoints.splice(t,1)[0];this.startBreak(tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,e),this.startNonLinearBreaks(e)}}}contentHasEnded(){this.currentAdContext&&this.currentAdContext.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)}contentHasPaused(){this.currentAdContext&&this.currentAdContext.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PAUSED)}contentHasStarted(){this.currentAdContext&&this.currentAdContext.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING)}}},MFRf:function(e,t,i){var n=i(\"CrDl\"),s=i(\"RVfe\"),a=n.extend({_services:[s.Service.INIT,s.Service.START,s.Service.OFFLINE_EVENTS],isBlocking:function(e){if(this._isBusy&&null!=e)if(-1!==this._services.indexOf(e.service))this.done();else if(e.service===s.Service.ERROR)return!1;return n.prototype.isBlocking.apply(this,arguments)}});e.exports=a},Pi2y:function(e,t,i){var n=i(\"YXkS\"),s=i(\"RVfe\"),a={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(t=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(t,[\"pauseDuration\"]):this.requestBuilder.fetchParams(t,[\"bitrate\",\"throughput\",\"fps\"]),this._adapter.flags.isJoined&&(t=this.requestBuilder.fetchParams(t,[\"playhead\"])),this._adapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,[\"bufferDuration\"])),this._adapter.flags.isSeeking&&(t=this.requestBuilder.fetchParams(t,[\"seekDuration\"])),this._adsAdapter&&!this.options[\"ad.ignore\"]&&(this._adsAdapter.flags.isStarted&&(t=this.requestBuilder.fetchParams(t,[\"adPlayhead\"]),t=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(t,[\"adPauseDuration\"]):this.requestBuilder.fetchParams(t,[\"adBitrate\"])),this._adsAdapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,[\"adBufferDuration\"])))),this._send(s.WillSendEvent.WILL_SEND_PING,s.Service.PING,t),n.verbose(s.Service.PING)}};e.exports=a},Qbk1:function(e,t,i){var n=i(\"2aCO\"),s=i(\"YXkS\"),a=i(\"YWDr\"),r=i(\"bHAv\"),o=i(\"/8Pf\"),l=i(\"yMnN\"),d=i(\"mevm\"),h=i(\"9/T3\"),_=n.extend({constructor:function(e){this.flags=new d,this.chronos=new l,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(e),this.tag=this.player,s.notice(\"Adapter \"+this.getVersion()+\" with Lib \"+o+\" is ready.\")},setPlayer:function(e){this.player&&this.unregisterListeners(),this.player=\"string\"==typeof e?document.getElementById(e):e,this.player&&(this.initializeAdapter(),this.registerListeners())},initializeAdapter:function(){},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(e,t,i){var n=0;e&&(n|=h.Type.BUFFER),t&&(n|=h.Type.SEEK),this.monitor=new h(this,n,i)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return o+\"-generic-js\"},getPosition:function(){return null},getCdnTraffic:function(){return r.getCdnTraffic()},getP2PTraffic:function(){return r.getP2PTraffic()},getUploadTraffic:function(){return r.getUploadTraffic()},getIsP2PEnabled:function(){return r.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},fireInit:function(e){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(_.Event.INIT,{params:e}),this.flags.isInited=!0)},fireStart:function(e){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(_.Event.START,{params:e}),this.flags.isInited=!1)},fireJoin:function(e){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(_.Event.JOIN,{params:e}))},firePause:function(e){this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(_.Event.PAUSE,{params:e}))},fireResume:function(e){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(_.Event.RESUME,{params:e}))},fireBufferBegin:function(e,t){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;s.notice(\"Converting current buffer to seek\"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(_.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(_.Event.BUFFER_END,{params:e}))},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(e,t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options[\"content.isLive.noSeek\"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;s.notice(\"Converting current buffer to seek\"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(_.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options[\"content.isLive.noSeek\"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(_.Event.SEEK_END,{params:e}))},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(e){(this.flags.isStarted||this.flags.isInited)&&(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(_.Event.STOP,{params:e}),this.plugin&&this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options[\"ad.afterStop\"]?this.plugin.fireStop():this.plugin.options[\"ad.afterStop\"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset())},fireCasted:function(e){e||(e={}),e.casted=!0,this.fireStop(e)},fireError:function(e,t,i,n){var s=a.buildErrorParams(e,t,i,n);this.emit(_.Event.ERROR,{params:s})},fireNoServedAd:function(e,t,i,n){var s=a.buildErrorParams(e,t,i,n);s.errorSeverity=\"AdsNotServed\",this.emit(_.Event.ERROR,{params:s})},fireFatalError:function(e,t,i,n){this.monitor&&this.monitor.stop(),this.fireError(e,t,i,n),this.fireStop()},fireClick:function(e){\"string\"==typeof e&&(e={url:e}),this.emit(_.Event.CLICK,{params:e})},fireBlocked:function(e){this.emit(_.Event.BLOCKED,{params:e})},fireSkip:function(e){e.skipped=!0,this.fireStop(e)}},{Event:{START:\"start\",JOIN:\"join\",PAUSE:\"pause\",RESUME:\"resume\",SEEK_BEGIN:\"seek-begin\",SEEK_END:\"seek-end\",BUFFER_BEGIN:\"buffer-begin\",BUFFER_END:\"buffer-end\",ERROR:\"error\",STOP:\"stop\",CLICK:\"click\",BLOCKED:\"blocked\"},AdPosition:{PREROLL:\"pre\",MIDROLL:\"mid\",POSTROLL:\"post\"}});e.exports=_},Qygl:function(e,t,i){var n=i(\"841u\").extend({constructor:function(e){this.enabled=!0,this.httpSecure=null,this.host=\"nqs.nice264.com\",this.accountCode=\"nicetest\",this.username=null,this.anonymousUser=null,this.obfuscateIp=!1,this.userType=null,this.offline=!1,this.referer=null,this.experiments=[],this[\"parse.hls\"]=!1,this[\"parse.cdnNameHeader\"]=\"x-cdn-forward\",this[\"parse.cdnNode\"]=!1,this[\"parse.cdnNode.list\"]=[\"Akamai\",\"Cloudfront\",\"Level3\",\"Fastly\",\"Highwinds\"],this[\"parse.locationHeader\"]=!1,this[\"network.ip\"]=null,this[\"network.isp\"]=null,this[\"network.connectionType\"]=null,this[\"device.code\"]=null,this[\"content.transactionCode\"]=null,this[\"content.resource\"]=null,this[\"content.isLive\"]=null,this[\"content.isLive.noSeek\"]=!1,this[\"content.title\"]=null,this[\"content.title2\"]=null,this[\"content.duration\"]=null,this[\"content.fps\"]=null,this[\"content.bitrate\"]=null,this[\"content.throughput\"]=null,this[\"content.rendition\"]=null,this[\"content.cdn\"]=null,this[\"content.cdnNode\"]=null,this[\"content.cdnType\"]=null,this[\"content.metadata\"]={},this[\"content.streamingProtocol\"]=null,this[\"ad.metadata\"]={},this[\"ad.campaign\"]=null,this[\"ad.resource\"]=null,this[\"ad.title\"]=null,this[\"ad.ignore\"]=!1,this[\"ad.afterStop\"]=0,this[\"background.enabled\"]=!0,this[\"background.settings\"]=null,this[\"background.settings.android\"]=\"stop\",this[\"background.settings.iphone\"]=\"stop\",this[\"background.settings.desktop\"]=null,this[\"background.settings.tv\"]=\"stop\",this[\"smartswitch.configCode\"]=null,this[\"smartswitch.groupCode\"]=null,this[\"smartswitch.contractCode\"]=null,this[\"extraparam.1\"]=null,this[\"extraparam.2\"]=null,this[\"extraparam.3\"]=null,this[\"extraparam.4\"]=null,this[\"extraparam.5\"]=null,this[\"extraparam.6\"]=null,this[\"extraparam.7\"]=null,this[\"extraparam.8\"]=null,this[\"extraparam.9\"]=null,this[\"extraparam.10\"]=null,this[\"extraparam.11\"]=null,this[\"extraparam.12\"]=null,this[\"extraparam.13\"]=null,this[\"extraparam.14\"]=null,this[\"extraparam.15\"]=null,this[\"extraparam.16\"]=null,this[\"extraparam.17\"]=null,this[\"extraparam.18\"]=null,this[\"extraparam.19\"]=null,this[\"extraparam.20\"]=null,this[\"ad.extraparam.1\"]=null,this[\"ad.extraparam.2\"]=null,this[\"ad.extraparam.3\"]=null,this[\"ad.extraparam.4\"]=null,this[\"ad.extraparam.5\"]=null,this[\"ad.extraparam.6\"]=null,this[\"ad.extraparam.7\"]=null,this[\"ad.extraparam.8\"]=null,this[\"ad.extraparam.9\"]=null,this[\"ad.extraparam.10\"]=null,this.isInfinity=null,this.forceInit=!1,this.setOptions(e)},setOptions:function(e,t){if(t=t||this,void 0!==e)for(var i in e)\"object\"==typeof t[i]&&null!==t[i]?this.setOptions(e[i],t[i]):t[i]=e[i]}});e.exports=n},RCEg:function(e,t,i){var n=i(\"YXkS\"),s=i(\"YWDr\"),a=i(\"RVfe\"),r=(i(\"cZg5\"),i(\"CrDl\")),o={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(e){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},this._send(a.WillSendEvent.WILL_SEND_INIT,a.Service.INIT,e),this._adSavedError(),n.notice(a.Service.INIT+\" \"+(e.title||e.mediaResource)))},fireError:function(e,t,i,r){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var o=s.buildErrorParams(e,t,i,r);this._send(a.WillSendEvent.WILL_SEND_ERROR,a.Service.ERROR,o),this._adSavedError(),n.notice(a.Service.ERROR+\" \"+o.errorLevel+\" \"+o.errorCode),\"fatal\"===o.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(e,t,i){this.options[\"ad.afterStop\"]=0,this.fireError(e,t,i,\"fatal\"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(e){e&&void 0!==e.end&&e.end&&(e.end=void 0,this.options[\"ad.afterStop\"]=0),this._adsAdapter||(this.options[\"ad.afterStop\"]=0),0===this.options[\"ad.afterStop\"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),e=e||{},this._send(a.WillSendEvent.WILL_SEND_STOP,a.Service.STOP,e),n.notice(a.Service.STOP+\" at \"+e.playhead+\"s\"),this._reset())},fireOfflineEvents:function(e){this.options&&!this.options.offline?this._adapter&&(this._adapter.flags.isStarted||this._adapter.flags.isInited)||this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?n.error(\"Adapters have to be stopped\"):(this._offlineParams=e,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(r.Event.DONE,this.offlineReference))):n.error(\"To send offline events, offline option must be disabled\")},_generateAndSendOffline:function(){var e=this._offlineParams;for(this._initComm();;){var t=this.requestBuilder.buildBody(a.Service.OFFLINE_EVENTS).viewJson;if(null===t[0])break;var i=this.viewTransform.nextView(),n=t[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,\"sessionId\":\"SESSION_PLACEHOLDER\"/g,\"\").replace(/,\"sessionRoot\":\"ROOT_PLACEHOLDER\"/g,\"\").replace(/,\"parentId\":\"PARENT_PLACEHOLDER\"/g,\"\");this._send(a.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,a.Service.OFFLINE_EVENTS,e,n,\"POST\",function(e,t){this.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.offlineStorage.sent(),this._offlineParams=null}};e.exports=o},RR7P:function(e,t,i){var n=i(\"YXkS\"),s=i(\"RVfe\"),a=i(\"Qbk1\"),r={setAdapter:function(e){e.plugin?n.warn(\"Adapters can only be added to a single plugin\"):(this.removeAdapter(),this._adapter=e,e.plugin=this,e.on(a.Event.INIT,this._initListener.bind(this)),e.on(a.Event.START,this._startListener.bind(this)),e.on(a.Event.JOIN,this._joinListener.bind(this)),e.on(a.Event.PAUSE,this._pauseListener.bind(this)),e.on(a.Event.RESUME,this._resumeListener.bind(this)),e.on(a.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),e.on(a.Event.SEEK_END,this._seekEndListener.bind(this)),e.on(a.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),e.on(a.Event.BUFFER_END,this._bufferEndListener.bind(this)),e.on(a.Event.ERROR,this._errorListener.bind(this)),e.on(a.Event.STOP,this._stopListener.bind(this)),e.on(a.Event.CLICK,this._clickListener.bind(this)),e.on(a.Event.BLOCKED,this._blockedListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(a.Event.INIT,this._initListener),this._adapter.off(a.Event.START,this._startListener),this._adapter.off(a.Event.JOIN,this._joinListener),this._adapter.off(a.Event.PAUSE,this._pauseListener),this._adapter.off(a.Event.RESUME,this._resumeListener),this._adapter.off(a.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(a.Event.SEEK_END,this._seekEndListener),this._adapter.off(a.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(a.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(a.Event.ERROR,this._errorListener),this._adapter.off(a.Event.STOP,this._stopListener),this._adapter=null)},_initListener:function(e){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==s.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(s.WillSendEvent.WILL_SEND_INIT,s.Service.INIT,t),n.notice(s.Service.INIT+\" \"+(t.title||t.mediaResource)),this._adSavedError()}},_startListener:function(e){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{},i=this.getResource()&&\"boolean\"==typeof this.getIsLive()&&(this.getIsLive()||\"number\"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();this.options.forceInit&&(i=!1),!i||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(s.WillSendEvent.WILL_SEND_START,s.Service.INIT,t),this._adSavedError(),n.notice(s.Service.INIT+\" \"+(t.title||t.mediaResource))):(this._send(s.WillSendEvent.WILL_SEND_START,s.Service.START,t),this._adSavedError(),n.notice(s.Service.START+\" \"+(t.title||t.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_joinListener:function(e){var t=e.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&(0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime,this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+this._adsAdapter.chronos.total.getDeltaTime(),(new Date).getTime()))),this._send(s.WillSendEvent.WILL_SEND_START,s.Service.START,t),this._adSavedError(),n.notice(s.Service.START+\" \"+(t.title||t.mediaResource)),this.isStarted=!0),t=e.data.params||{},this._send(s.WillSendEvent.WILL_SEND_JOIN,s.Service.JOIN,t),n.notice(s.Service.JOIN+\" \"+t.joinDuration+\"ms\"))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};this._send(s.WillSendEvent.WILL_SEND_PAUSE,s.Service.PAUSE,t),n.notice(s.Service.PAUSE+\" at \"+t.playhead+\"s\")},_resumeListener:function(e){var t=e.data.params||{};this._send(s.WillSendEvent.WILL_SEND_RESUME,s.Service.RESUME,t),n.notice(s.Service.RESUME+\" \"+t.pauseDuration+\"ms\"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice(\"Seek Begin\")},_seekEndListener:function(e){var t=e.data.params||{};this._send(s.WillSendEvent.WILL_SEND_SEEK,s.Service.SEEK,t),n.notice(s.Service.SEEK+\" to \"+t.playhead+\" in \"+t.seekDuration+\"ms\")},_bufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice(\"Buffer Begin\")},_bufferEndListener:function(e){var t=e.data.params||{};this._send(s.WillSendEvent.WILL_SEND_BUFFER,s.Service.BUFFER,t),n.notice(s.Service.BUFFER+\" to \"+t.playhead+\" in \"+t.bufferDuration+\"ms\")},_errorListener:function(e){this._blockError(e.data.params)||(this.fireError(e.data.params||{}),this._adSavedError())},_blockError:function(e){var t=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg)&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){this.fireStop(e.data.params||{})},_clickListener:function(e){n.warn(\"You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.\")},_blockedListener:function(e){n.warn(\"You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.\")}};e.exports=r},RVfe:function(e,t){e.exports={Service:{DATA:\"/data\",INIT:\"/init\",START:\"/start\",JOIN:\"/joinTime\",PAUSE:\"/pause\",RESUME:\"/resume\",SEEK:\"/seek\",BUFFER:\"/bufferUnderrun\",ERROR:\"/error\",STOP:\"/stop\",PING:\"/ping\",AD_INIT:\"/adInit\",AD_START:\"/adStart\",AD_JOIN:\"/adJoin\",AD_PAUSE:\"/adPause\",AD_RESUME:\"/adResume\",AD_BUFFER:\"/adBufferUnderrun\",AD_STOP:\"/adStop\",AD_CLICK:\"/adClick\",AD_ERROR:\"/adError\",AD_BLOCKED:\"/adBlocked\",EVENT:\"/infinity/event\",SESSION_START:\"/infinity/session/start\",SESSION_STOP:\"/infinity/session/stop\",NAV:\"/infinity/session/nav\",BEAT:\"/infinity/session/beat\",OFFLINE_EVENTS:\"/offlineEvents\"},WillSendEvent:{WILL_SEND_INIT:\"will-send-init\",WILL_SEND_START:\"will-send-start\",WILL_SEND_JOIN:\"will-send-join\",WILL_SEND_PAUSE:\"will-send-pause\",WILL_SEND_RESUME:\"will-send-resume\",WILL_SEND_SEEK:\"will-send-seek\",WILL_SEND_BUFFER:\"will-send-buffer\",WILL_SEND_ERROR:\"will-send-error\",WILL_SEND_FATAL_ERROR:\"will-send-fatal-error\",WILL_SEND_STOP:\"will-send-stop\",WILL_SEND_PING:\"will-send-ping\",WILL_SEND_AD_START:\"will-send-ad-start\",WILL_SEND_AD_JOIN:\"will-send-ad-join\",WILL_SEND_AD_PAUSE:\"will-send-ad-pause\",WILL_SEND_AD_RESUME:\"will-send-ad-resume\",WILL_SEND_AD_BUFFER:\"will-send-ad-buffer\",WILL_SEND_AD_STOP:\"will-send-ad-stop\",WILL_SEND_AD_CLICK:\"will-send-ad-click\",WILL_SEND_AD_ERROR:\"will-send-ad-error\",WILL_SEND_AD_BLOCKED:\"will-send-ad-blocked\",WILL_SEND_SESSION_START:\"will-send-session-start\",WILL_SEND_SESSION_STOP:\"will-send-session-stop\",WILL_SEND_NAV:\"will-send-nav\",WILL_SEND_BEAT:\"will-send-beat\",WILL_SEND_EVENT:\"will-send-event\",WILL_SEND_OFFLINE_EVENTS:\"will-send-offline-events\"}}},RdG8:function(e,t){e.exports={parsers:[{element:\"name\",headerName:null,regex:/(.+)/}]}},RpSF:function(e,t,i){var n=i(\"2aCO\"),s=i(\"XHki\"),a=i(\"be/F\"),r=i(\"RVfe\"),o=i(\"YWDr\"),l=i(\"UbSY\"),d=i(\"Jt0h\"),h=i(\"MFRf\"),_=i(\"dZ6b\"),c=i(\"xTCX\"),u=i(\"aqLn\"),p=i(\"Qygl\"),E=i(\"ENfY\"),g=i(\"xFsT\"),T=i(\"cZg5\"),A=i(\"xUQT\"),m=i(\"Gr0D\"),f=i(\"4S5m\"),S=i(\"WmHI\"),R=n.extend({constructor:function(e,t){this.infinity=new A(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new a,this.initChrono=new a,this.storage=new E,this.offlineStorage=new g,this.options=new p(e),this._adapter=null,this._adsAdapter=null,this._ping=new s(this._sendPing.bind(this),5e3),this._beat=new s(this._sendBeat.bind(this),3e4),this.sessionExpire=1e3*Number(this.storage.getLocal(\"sessionExpire\"))||3e5,this.requestBuilder=new T(this),this.resourceTransform=new c(this),this.lastEventTime=null,t&&this.setAdapter(t),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new f,this.backgroundDetector=new m(this),this.fingerprint=new S(this),this.options[\"background.enabled\"]&&this.backgroundDetector.startDetection()},restartViewTransform:function(){this.viewTransform=new _(this),this.viewTransform.on(_.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()||this.storage.getLocal(\"accCode\")!==this.options.accountCode&&this.storage.getSession(\"accCode\")!==this.options.accountCode?(this.storage.removeLocal(\"data\"),this.storage.removeLocal(\"session\"),this.storage.removeSession(\"data\"),this.storage.removeSession(\"session\"),this.storage.removeLocal(\"infinityStarted\"),this.storage.removeLocal(\"infinityStopped\"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(e){this._ping.interval=1e3*e.target.response.pingTime,this._beat.interval=1e3*e.target.response.beatTime,this.sessionExpire=1e3*e.target.response.sessionExpire,this.storage.setLocal(\"data\",e.target.response.msg),this.storage.setLocal(\"dataTime\",(new Date).getTime()),this.storage.setSession(\"data\",e.target.response.msg),this.storage.setSession(\"dataTime\",(new Date).getTime()),this.storage.setLocal(\"accCode\",this.options.accountCode),this.storage.setSession(\"accCode\",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setLocal(\"session\",this.viewTransform.response.code),this.storage.setSession(\"session\",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new c(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(e,t,i,n,s,a,o){var d=(new Date).getTime();this.lastEventTime&&d>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=t===r.Service.STOP?null:d,i=this.requestBuilder.buildParams(i,t),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var h={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,h),this._comm&&(null!==i||void 0!==s)&&this.options.enabled){this.lastServeiceSent=t;var _={};void 0!==s&&\"GET\"!=s&&(_.method=s);var c=new l(null,t,i,_);n&&c.setBody(n),this._comm.sendRequest(c,a,o)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new d,this._comm.addTransform(new h),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new u(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(e){e&&(this.options.setOptions(e),\"boolean\"==typeof e[\"background.enabled\"]&&(e[\"background.enabled\"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:r.WillSendEvent});o.assign(R.prototype,i(\"RR7P\")),o.assign(R.prototype,i(\"d4fl\")),o.assign(R.prototype,i(\"fDdK\")),o.assign(R.prototype,i(\"u60H\")),o.assign(R.prototype,i(\"wvST\")),o.assign(R.prototype,i(\"Pi2y\")),o.assign(R.prototype,i(\"RCEg\")),o.assign(R.prototype,i(\"yaPV\")),o.assign(R.prototype,i(\"DIcC\")),e.exports=R},UKkV:function(e,t){e.exports=function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},UbSY:function(e,t,i){var n=i(\"841u\"),s=i(\"YXkS\"),a=i(\"YWDr\"),r=n.extend({constructor:function(e,t,i,n){this.xhr=this.createXHR(),this.host=e||\"\",this.service=t||\"\",this.params=i||{},this.options=a.assign({},r.defaultOptions,n),this.retries=0,this.options.cache||this.setParam(\"timemark\",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\")}catch(e){return s.error(e),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t,i){return this.xhr.addEventListener(e,t.bind(this,this,i)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e=\"?\";for(var t in this.params){var i=this.params[t];if(null!==i&&\"object\"==typeof i){var n=JSON.stringify(i);\"{}\"!==n&&(e+=encodeURIComponent(t)+\"=\"+encodeURIComponent(n)+\"&\")}else null!==i&&void 0!==i&&\"\"!==i&&(e+=encodeURIComponent(t)+\"=\"+encodeURIComponent(i)+\"&\")}return e.slice(0,-1)}catch(e){return s.error(e),\"\"}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(this.options.retryAfter>0&&this.options.maxRetries>0){0===this.retries&&this.on(r.Event.ERROR,function(){this.retries>=this.options.maxRetries?s.error('Aborting failed request \"'+this.service+'\". Max retries reached.'):(s.warn('YBRequest \"'+this.service+'\" failed. Retry '+(this.retries+1)+\" of \"+this.options.maxRetries+\" in \"+this.options.retryAfter+\"ms.\"),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))}.bind(this))}for(var t in s.logLevel<=s.Level.VERBOSE&&s.verbose(\"XHR Req: \"+this.getUrl()),r._globalListeners)r._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){s.error(e)}}},{Event:{SUCCESS:\"load\",LOAD:\"load\",ERROR:\"error\",ABORT:\"abort\"},defaultOptions:{method:\"GET\",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){r._globalListeners[e]=r._globalListeners[e]||[],r._globalListeners[e].push(t)},offEvery:function(e,t){if(r._globalListeners[e]){var i=r._globalListeners[e].indexOf(t);-1!==i&&r._globalListeners[e].splice(i,1)}}});e.exports=r},WmHI:function(e,t,i){var n=i(\"xq5L\"),s=i(\"841u\"),a=i(\"8Yob\"),r=s.extend({constructor:function(e){this.plugin=e,this.dataExtractor=new n,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),this.plugin.storage.setLocal(\"youboraFingerprint\",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t=\"\";return t=\"string\"!=typeof e?JSON.stringify(e):e,a(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal(\"youboraFingerprint\")}});e.exports=r},XHki:function(e,t,i){var n=i(\"841u\"),s=i(\"be/F\"),a=n.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new s},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});e.exports=a},XVuB:function(e,t,i){var n=i(\"BaCU\"),s=i(\"BSqE\");n.adapters.Freewheel=n.Adapter.extend({getVersion:function(){return s.version+\"-\"+s.name+\"-\"+s.tech},getPlayhead:function(){if(this.slot){var e=this.slot.getAdInstances();if(e){var t=(this.plugin.requestBuilder.lastSent.adNumber||1)-1;if(e[t]&&e[t].getPlayheadTime)return e[t].getPlayheadTime()}}return null},getDuration:function(){if(this.slot){var e=this.slot.getAdInstances();if(e){var t=(this.plugin.requestBuilder.lastSent.adNumber||1)-1;if(e[t]&&e[t].getDuration)return e[t].getDuration()}}return null},getTitle:function(){return this.titles?this.titles[(this.plugin.requestBuilder.lastSent.adNumber||1)-1]._adId:\"unknown\"},getResource:function(){return this.player.originalSource?this.player.originalSource:this.plugin.getAdapter()?this.plugin.getAdapter().getResource():null},getPlayerVersion:function(){return tv.freewheel.SDK.version},getPlayerName:function(){return\"Freewheel\"},getPosition:function(){return this.position},registerListeners:function(){for(var e in this.canRemoveListeners=!0,this.events=tv.freewheel.SDK,this.references=[],this.references[this.events.EVENT_AD]=this.logListener.bind(this),this.references[this.events.EVENT_ERROR]=this.errorListener.bind(this),this.references[this.events.EVENT_SLOT_STARTED]=this.slotListener.bind(this),this.references[this.events.EVENT_SLOT_ENDED]=this.closeListener.bind(this),this.references)this.player.currentAdContext.addEventListener(e,this.references[e])},unregisterListeners:function(){if(this.player&&this.references){for(var e in this.references)this.player.currentAdContext.removeEventListener(e,this.references[e]);this.references=[]}},logListener:function(e){if(n.Log.debug(e.subType),e.errorCode||e.errorInfo||e.errorModule)this.errorListener(e);else switch(e.subType){case this.events.EVENT_AD_PAUSE:this.pauseListener(e);break;case this.events.EVENT_AD_RESUME:this.resumeListener(e);break;case this.events.EVENT_AD_IMPRESSION_END:this.endedListener(e);break;case this.events.EVENT_AD_INITIATED:this.playListener(e);break;case this.events.EVENT_AD_IMPRESSION:this.playingListener(e);break;case this.events.EVENT_AD_SKIPPED:this.skipListener(e);break;case this.events.EVENT_SLOT_STARTED:this.slotListener(e);break;case this.events.EVENT_AD_CLOSE:case this.events.EVENT_SLOT_ENDED:this.closeListener(e);break;case this.events.EVENT_AD_CLICK:this.clickListener(e)}},slotListener:function(e){this.slot=e.slot;var t=e.slot.getTimePositionClass();this.disable=!1,\"POSTROLL\"===t?this.position=\"post\":\"MIDROLL\"===t?this.position=\"mid\":\"PREROLL\"===t?(this.position=\"pre\",this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isJoined&&(this.position=\"mid\")):this.disable=!0,this.disable||(this.titles=e.slot.getAdInstances(),this.plugin.getAdapter()&&this.canRemoveListeners&&(this.canRemoveListeners=!1,this.plugin.getAdapter().unregisterListeners(),this.plugin.getAdapter().firePause()),this.plugin.fireInit(),this.fireInit())},playListener:function(e){if(this.disable)return null;this.fireStart()},playingListener:function(e){if(this.disable)return null;this.fireStart(),this.fireJoin()},pauseListener:function(e){this.firePause()},resumeListener:function(e){this.playListener(),this.fireResume()},endedListener:function(e){this.fireStop()},skipListener:function(e){this.fireStop({skipped:!0})},clickListener:function(e){var t=e.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0];this.fireClick({url:t})},closeListener:function(e){this.register(),\"post\"!==this.position||this.disable||this.plugin.fireStop({end:!0})},errorListener:function(e){this.fireError(e.errorCode||e.subType,e.errorInfo),this.fireStop(),this.register()},register:function(e){this.plugin.getAdapter()&&!this.canRemoveListeners&&(this.plugin.getAdapter().registerListeners(),this.plugin.getAdapter().fireResume(),this.canRemoveListeners=!0)},changeVideo:function(e){(this.flags.isStarted||this.flags.isInited)&&(this.fireStop(),this.plugin.fireStop({end:!0}),this.register())}}),e.exports=n.adapters.Freewheel},YWDr:function(e,t,i){var n=i(\"YXkS\"),s={stripProtocol:function(e){try{return e.replace(/^(.*?:\\/\\/|\\/\\/)/i,\"\")}catch(t){return n.warn(t),e}},addProtocol:function(e,t){try{return!0===t?\"https://\"+e:0===window.location.protocol.indexOf(\"http\")?\"//\"+e:\"http://\"+e}catch(e){return n.warn(e),\"http://localhost/\"}},parseNumber:function(e,t){return!isNaN(e)&&e>=0&&e!==1/0&&e!==-1/0&&null!==e&&void 0!==e?e:t},logAllEvents:function(e,t,i){try{if(n.logLevel<=n.Level.DEBUG){i=i||function(e){n.debug(\"Event: \"+e.type)};var s=[\"canplay\",\"buffering\",\"waiting\",\"ended\",\"play\",\"playing\",\"pause\",\"resume\",\"error\",\"abort\",\"seek\",\"seeking\",\"seeked\",\"stalled\",\"dispose\",\"loadeddata\",\"loadstart\"];t&&(null===t[0]?(t.shift(),s=t):s=s.concat(t));for(var a=0;a<s.length;a++)\"function\"==typeof e?e.call(window,s[a],i):e.on?e.on(s[a],i):e.addEventListener&&e.addEventListener(s[a],i)}}catch(e){n.error(e)}},buildRenditionString:function(e,t,i){1===arguments.length&&(i=e,e=null,t=null);var n=\"\";return e&&t&&(n=e+\"x\"+t),\"number\"!=typeof i||NaN==i||i<1?n:(n&&(n+=\"@\"),(n+=i<1e3?Math.round(i)+\"bps\":i<1e6?(i=Math.round(i/1e3))+\"Kbps\":(i=Math.round(i/1e4)/100)+\"Mbps\")||null)},buildErrorParams:function(e,t,i,n){if(\"object\"==typeof e)return e;var s={};return s.errorCode=e||\"FAILURE\",s.msg=t||s.errorCode,s.errorMetadata=i,s.errorLevel=n,s},assign:i(\"yDOl\"),isArray:i(\"UKkV\")};e.exports=s},YXkS:function(e,t,i){var n=i(\"2aCO\"),s=i(\"UKkV\"),a={_emitter:new n,on:function(){a._emitter.on.apply(a._emitter,arguments)},off:function(){a._emitter.off.apply(a._emitter,arguments)},emit:function(){a._emitter.emit.apply(a._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:\"log\"},logLevel:5,plainLogs:!1,report:function(e,t,i){if(console&&console.log){t=t||a.Level.NOTICE,i=i||\"darkcyan\";var n,r={5:\"e\",4:\"w\",3:\"n\",2:\"d\",1:\"v\"}[t],o=\"[Youbora]\"+a._getCurrentTime()+\" \"+r+\":\";if(this.emit(\"log\",{level:t,msg:e,prefix:o}),a.logLevel<=t)if(a.plainLogs||document.documentMode)a._plainReport(e,o);else n=t===a.Level.ERROR&&console.error?console.error:t===a.Level.WARNING&&console.warn?console.warn:t===a.Level.DEBUG&&console.debug?console.debug:console.log,o=\"%c\"+o,s(e)?(e.splice(0,0,o,\"color: \"+i),n.apply(console,e)):n.call(console,o,\"color: \"+i,e)}},_getCurrentTime:function(){var e=new Date;return\"[\"+(\"0\"+e.getDate()).slice(-2)+\":\"+(\"0\"+e.getMinutes()).slice(-2)+\":\"+(\"0\"+e.getSeconds()).slice(-2)+\".\"+(\"00\"+e.getMilliseconds()).slice(-3)+\"]\"},_plainReport:function(e,t){if(e instanceof Array)for(var i in e)a._plainReport(e[i],t);else\"string\"==typeof e?console.log(t+\" \"+e):(console.log(t+\" <next line>\"),console.log(e))},error:function(){a.report([].slice.call(arguments),a.Level.ERROR,\"darkred\")},warn:function(){a.report([].slice.call(arguments),a.Level.WARNING,\"darkorange\")},notice:function(){a.report([].slice.call(arguments),a.Level.NOTICE,\"darkgreen\")},debug:function(){a.report([].slice.call(arguments),a.Level.DEBUG,\"indigo\")},verbose:function(){a.report([].slice.call(arguments),a.Level.VERBOSE,\"navy\")},loadLevelFromUrl:function(){if(\"undefined\"!=typeof window&&window.location&&window.location.search){var e=/\\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==e&&(a.logLevel=e[1]),null!==/\\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(a.plainLogs=!0)}}};e.exports=a},Yj3O:function(e,t){e.exports=function(){Function.prototype.bind=Function.prototype.bind||function(e){if(\"function\"!=typeof this)throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");var t=Array.prototype.slice,i=t.call(arguments,1),n=this,s=function(){},a=function(){return n.apply(this instanceof s?this:e||window,i.concat(t.call(arguments)))};return s.prototype=this.prototype,a.prototype=new s,a},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if(\"function\"!=typeof e)throw new TypeError(e+\" is not a function!\");for(var i=this.length,n=0;n<i;n++)e.call(t,this[n],n,this)}}},ZAXx:function(e,t,i){\"use strict\";i.d(t,\"a\",function(){return n});const n=(e,t)=>{if(!e)return null;const i=new RegExp(`${t}=([0-9]+)`,\"g\").exec(e);return i&&i.length>0?i[1]:null}},a8Wz:function(e,t){var i=function(){};e.exports=function(e){if(arguments.length>1)throw Error(\"Second argument not supported\");if(null===e)throw Error(\"Cannot set a null [[Prototype]]\");if(\"object\"!=typeof e)throw TypeError(\"Argument must be an object\");return i.prototype=e,new i}},aqLn:function(e,t,i){i(\"UbSY\");var n=i(\"CrDl\"),s=(i(\"YXkS\"),i(\"YWDr\"),i(\"RVfe\"),n.extend({constructor:function(e,t){this._sendRequest=!1,this._isBusy=!1,this.plugin=e,this.session=t,this.transformName=\"Offline\"},parse:function(e){e&&this.plugin.offlineStorage.addEvent(e.service,e.params)},hasToSend:function(e){return!1},getState:function(){return n.STATE_OFFLINE}}));e.exports=s},bHAv:function(e,t){var i={getCdnTraffic:function(){if(\"undefined\"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(var t in Streamroot.peerAgents)e+=Streamroot.peerAgents[t].stats.cdn;return e}if(Streamroot.instances&&Streamroot.instances.length>0){e=0;return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.cdnDownload}),e}}if(\"undefined\"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if(\"undefined\"!=typeof teltoo&&teltoo.getStats){var i=teltoo.getStats();return i.totalReceivedBytes-i.p2pReceivedBytes}return null},getP2PTraffic:function(){if(\"undefined\"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(var t in Streamroot.peerAgents)Streamroot.peerAgents[t].isP2PEnabled&&(e+=Streamroot.peerAgents[t].stats.p2p);return e}if(Streamroot.instances&&Streamroot.instances.length>0){e=0;return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.dnaDownload}),e}}return\"undefined\"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:\"undefined\"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if(\"undefined\"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(var t in Streamroot.peerAgents)Streamroot.peerAgents[t].isP2PEnabled&&(e+=Streamroot.peerAgents[t].stats.upload);return e}if(Streamroot.instances&&Streamroot.instances.length>0){e=0;return Streamroot.instances.forEach(function(t){e+=t.stats.currentContent.dnaUpload}),e}}return\"undefined\"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if(\"undefined\"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=!1;for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;return e}if(Streamroot.instances&&Streamroot.instances.length>0){e=!1;return Streamroot.instances.forEach(function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}),e}}return\"undefined\"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};e.exports=i},\"be/F\":function(e,t,i){var n=i(\"841u\").extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=t);var i=this.pausetime?t-this.pausetime:0,n=this.stopTime?this.stopTime:t;return this.offset-i+(n-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new n;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}});e.exports=n},cZg5:function(e,t,i){var n=i(\"841u\"),s=i(\"YXkS\"),a=[\"accountCode\",\"username\",\"anonymousUser\",\"rendition\",\"player\",\"title\",\"title2\",\"live\",\"mediaDuration\",\"mediaResource\",\"transactionCode\",\"properties\",\"cdn\",\"playerVersion\",\"param1\",\"param2\",\"param3\",\"param4\",\"param5\",\"param6\",\"param7\",\"param8\",\"param9\",\"param10\",\"param11\",\"param12\",\"param13\",\"param14\",\"param15\",\"param16\",\"param17\",\"param18\",\"param19\",\"param20\",\"obfuscateIp\",\"p2pEnabled\",\"pluginVersion\",\"pluginInfo\",\"isp\",\"connectionType\",\"ip\",\"deviceCode\",\"preloadDuration\",\"referer\",\"userType\",\"streamingProtocol\",\"householdId\",\"experiments\",\"npawFingerprint\",\"smartswitchConfigCode\",\"smartswitchGroupCode\",\"smartswitchContractCode\"],r=[\"playhead\",\"adTitle\",\"adPosition\",\"adDuration\",\"adCampaign\",\"adResource\",\"adPlayerVersion\",\"adProperties\",\"adAdapterVersion\",\"extraparam1\",\"extraparam2\",\"extraparam3\",\"extraparam4\",\"extraparam5\",\"extraparam6\",\"extraparam7\",\"extraparam8\",\"extraparam9\",\"extraparam10\"],o=n.extend({constructor:function(e){this._plugin=e,this._adNumber=0,this.lastSent={}},fetchParams:function(e,t,i){e=e||{},t=t||[];for(var n=0;n<t.length;n++){var a=t[n];if(!e[a]){var r=o.getters[a];if(this._plugin[r]){var l=this._plugin[r]();null===l||i&&this.lastSent[a]===l||(e[a]=l,this.lastSent[a]=l)}else s.warn(\"Trying to call undefined getter \"+a+\":\"+r)}}return e},buildBody:function(e){return this.fetchParams(null,o.bodyParams[e],!1)},buildParams:function(e,t){return e=e||{},this.fetchParams(e,o.params[t],!1),this.fetchParams(e,o.differentParams[t],!0),e},getNewAdNumber:function(){var e=this.lastSent.adNumber;return e&&this.lastSent.adPosition===this._plugin.getAdPosition()?e+=1:e=1,this.lastSent.adNumber=e,e},getChangedEntities:function(){return this.fetchParams({},o.differentParams.entities,!0)}},{params:{\"/data\":[\"system\",\"pluginVersion\",\"requestNumber\",\"username\",\"isInfinity\"],\"/init\":a,\"/start\":a,\"/joinTime\":[\"joinDuration\",\"playhead\",\"mediaDuration\"],\"/pause\":[\"playhead\"],\"/resume\":[\"pauseDuration\",\"playhead\"],\"/seek\":[\"seekDuration\",\"playhead\"],\"/bufferUnderrun\":[\"bufferDuration\",\"playhead\"],\"/error\":[\"player\"].concat(a),\"/stop\":[\"bitrate\",\"playhead\",\"pauseDuration\"],\"/adInit\":r,\"/adStart\":r,\"/adJoin\":[\"playhead\",\"adPosition\",\"adJoinDuration\",\"adPlayhead\"],\"/adPause\":[\"playhead\",\"adPosition\",\"adPlayhead\"],\"/adResume\":[\"playhead\",\"adPosition\",\"adPlayhead\",\"adPauseDuration\"],\"/adBufferUnderrun\":[\"playhead\",\"adPosition\",\"adPlayhead\",\"adBufferDuration\"],\"/adStop\":[\"playhead\",\"adPosition\",\"adPlayhead\",\"adBitrate\",\"adTotalDuration\",\"pauseDuration\"],\"/adClick\":[\"playhead\",\"adPosition\",\"adPlayhead\"],\"/adError\":r,\"/adBlocked\":r,\"/ping\":[\"droppedFrames\",\"playrate\",\"cdnDownloadedTraffic\",\"p2pDownloadedTraffic\",\"uploadTraffic\",\"latency\",\"packetLoss\",\"packetSent\"],\"/infinity/session/start\":[\"accountCode\",\"username\",\"anonymousUser\",\"navContext\",\"route\",\"page\",\"npawFingerprint\",\"referer\",\"referral\",\"language\",\"deviceCode\"],\"/infinity/session/stop\":[],\"/infinity/session/nav\":[\"navContext\",\"route\",\"page\"],\"/infinity/session/beat\":[],\"/infinity/event\":[\"accountCode\",\"navContext\"],\"/offlineEvents\":{}},bodyParams:{\"/offlineEvents\":[\"viewJson\"]},differentParams:{entities:[\"rendition\",\"title\",\"title2\",\"param1\",\"param2\",\"param3\",\"param4\",\"param5\",\"param6\",\"param7\",\"param8\",\"param9\",\"param10\",\"param11\",\"param12\",\"param13\",\"param14\",\"param15\",\"param16\",\"param17\",\"param18\",\"param19\",\"param20\",\"cdn\",\"nodeHost\",\"nodeType\",\"nodeTypeString\"]},getters:{requestNumber:\"getRequestNumber\",playhead:\"getPlayhead\",playrate:\"getPlayrate\",fps:\"getFramesPerSecond\",droppedFrames:\"getDroppedFrames\",mediaDuration:\"getDuration\",bitrate:\"getBitrate\",throughput:\"getThroughput\",rendition:\"getRendition\",title:\"getTitle\",title2:\"getTitle2\",live:\"getIsLive\",mediaResource:\"getResource\",transactionCode:\"getTransactionCode\",properties:\"getMetadata\",playerVersion:\"getPlayerVersion\",player:\"getPlayerName\",cdn:\"getCdn\",pluginVersion:\"getPluginVersion\",userType:\"getUserType\",streamingProtocol:\"getStreamingProtocol\",obfuscateIp:\"getObfuscateIp\",householdId:\"getHouseholdId\",latency:\"getLatency\",packetLoss:\"getPacketLoss\",packetSent:\"getPacketSent\",param1:\"getExtraparam1\",param2:\"getExtraparam2\",param3:\"getExtraparam3\",param4:\"getExtraparam4\",param5:\"getExtraparam5\",param6:\"getExtraparam6\",param7:\"getExtraparam7\",param8:\"getExtraparam8\",param9:\"getExtraparam9\",param10:\"getExtraparam10\",param11:\"getExtraparam11\",param12:\"getExtraparam12\",param13:\"getExtraparam13\",param14:\"getExtraparam14\",param15:\"getExtraparam15\",param16:\"getExtraparam16\",param17:\"getExtraparam17\",param18:\"getExtraparam18\",param19:\"getExtraparam19\",param20:\"getExtraparam20\",extraparam1:\"getAdExtraparam1\",extraparam2:\"getAdExtraparam2\",extraparam3:\"getAdExtraparam3\",extraparam4:\"getAdExtraparam4\",extraparam5:\"getAdExtraparam5\",extraparam6:\"getAdExtraparam6\",extraparam7:\"getAdExtraparam7\",extraparam8:\"getAdExtraparam8\",extraparam9:\"getAdExtraparam9\",extraparam10:\"getAdExtraparam10\",adPosition:\"getAdPosition\",adPlayhead:\"getAdPlayhead\",adDuration:\"getAdDuration\",adCampaign:\"getAdCampaign\",adBitrate:\"getAdBitrate\",adTitle:\"getAdTitle\",adResource:\"getAdResource\",adPlayerVersion:\"getAdPlayerVersion\",adProperties:\"getAdMetadata\",adAdapterVersion:\"getAdAdapterVersion\",pluginInfo:\"getPluginInfo\",isp:\"getIsp\",connectionType:\"getConnectionType\",ip:\"getIp\",deviceCode:\"getDeviceCode\",system:\"getAccountCode\",accountCode:\"getAccountCode\",username:\"getUsername\",anonymousUser:\"getAnonymousUser\",preloadDuration:\"getPreloadDuration\",joinDuration:\"getJoinDuration\",bufferDuration:\"getBufferDuration\",seekDuration:\"getSeekDuration\",pauseDuration:\"getPauseDuration\",adJoinDuration:\"getAdJoinDuration\",adBufferDuration:\"getAdBufferDuration\",adPauseDuration:\"getAdPauseDuration\",adTotalDuration:\"getAdTotalDuration\",referer:\"getReferer\",referral:\"getReferral\",language:\"getLanguage\",nodeHost:\"getNodeHost\",nodeType:\"getNodeType\",nodeTypeString:\"getNodeTypeString\",route:\"getReferer\",navContext:\"getContext\",page:\"getPageName\",cdnDownloadedTraffic:\"getCdnTraffic\",p2pDownloadedTraffic:\"getP2PTraffic\",p2pEnabled:\"getIsP2PEnabled\",uploadTraffic:\"getUploadTraffic\",viewJson:\"getOfflineView\",experiments:\"getExperiments\",npawFingerprint:\"getFingerprint\",isInfinity:\"getIsInfinity\",smartswitchConfigCode:\"getSmartswitchConfigCode\",smartswitchGroupCode:\"getSmartswitchGroupCode\",smartswitchContractCode:\"getSmartswitchContractCode\"}});e.exports=o},d4fl:function(e,t,i){var n=i(\"YWDr\"),s=i(\"/8Pf\"),a={getHost:function(){var e=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(e=this.viewTransform.response.host),n.addProtocol(n.stripProtocol(e),this.options.httpSecure)},getUserType:function(){return this.options.userType},isParseHls:function(){return this.options[\"parse.hls\"]},isParseCdnNode:function(){return this.options[\"parse.cdnNode\"]},isLocHeader:function(){return this.options[\"parse.locationHeader\"]},getParseCdnNodeList:function(){return this.options[\"parse.cdnNode.list\"]},getParseCdnNodeNameHeader:function(){return this.options[\"parse.cdnNameHeader\"]},getObfuscateIp:function(){return this.options.obfuscateIp},getExtraparam1:function(){return this.options[\"extraparam.1\"]},getExtraparam2:function(){return this.options[\"extraparam.2\"]},getExtraparam3:function(){return this.options[\"extraparam.3\"]},getExtraparam4:function(){return this.options[\"extraparam.4\"]},getExtraparam5:function(){return this.options[\"extraparam.5\"]},getExtraparam6:function(){return this.options[\"extraparam.6\"]},getExtraparam7:function(){return this.options[\"extraparam.7\"]},getExtraparam8:function(){return this.options[\"extraparam.8\"]},getExtraparam9:function(){return this.options[\"extraparam.9\"]},getExtraparam10:function(){return this.options[\"extraparam.10\"]},getExtraparam11:function(){return this.options[\"extraparam.11\"]},getExtraparam12:function(){return this.options[\"extraparam.12\"]},getExtraparam13:function(){return this.options[\"extraparam.13\"]},getExtraparam14:function(){return this.options[\"extraparam.14\"]},getExtraparam15:function(){return this.options[\"extraparam.15\"]},getExtraparam16:function(){return this.options[\"extraparam.16\"]},getExtraparam17:function(){return this.options[\"extraparam.17\"]},getExtraparam18:function(){return this.options[\"extraparam.18\"]},getExtraparam19:function(){return this.options[\"extraparam.19\"]},getExtraparam20:function(){return this.options[\"extraparam.20\"]},getAdExtraparam1:function(){return this.options[\"ad.extraparam.1\"]},getAdExtraparam2:function(){return this.options[\"ad.extraparam.2\"]},getAdExtraparam3:function(){return this.options[\"ad.extraparam.3\"]},getAdExtraparam4:function(){return this.options[\"ad.extraparam.4\"]},getAdExtraparam5:function(){return this.options[\"ad.extraparam.5\"]},getAdExtraparam6:function(){return this.options[\"ad.extraparam.6\"]},getAdExtraparam7:function(){return this.options[\"ad.extraparam.7\"]},getAdExtraparam8:function(){return this.options[\"ad.extraparam.8\"]},getAdExtraparam9:function(){return this.options[\"ad.extraparam.9\"]},getAdExtraparam10:function(){return this.options[\"ad.extraparam.10\"]},getPluginInfo:function(){return{lib:s,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options[\"network.ip\"]},getIsp:function(){return this.options[\"network.isp\"]},getConnectionType:function(){return this.options[\"network.connectionType\"]},getDeviceCode:function(){return this.options[\"device.code\"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options.username},getAnonymousUser:function(){return this.options.anonymousUser},getReferer:function(){if(this.options.referer)return this.options.referer;var e=\"\";return\"undefined\"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){return\"undefined\"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return\"undefined\"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options[\"content.cdnNode\"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options[\"content.cdnType\"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null},getFingerprint:function(){return this.fingerprint.getKey()},getIsInfinity:function(){return this.options.isInfinity},getSmartswitchConfigCode:function(){return this.options[\"smartswitch.configCode\"]},getSmartswitchGroupCode:function(){return this.options[\"smartswitch.groupCode\"]},getSmartswitchContractCode:function(){return this.options[\"smartswitch.contractCode\"]}};e.exports=a},dD1v:function(e,t,i){var n=i(\"2aCO\"),s=(i(\"YXkS\"),i(\"YWDr\"),i(\"UbSY\")),a=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(e){var t=new s(e,null,null,{method:\"HEAD\",maxRetries:0,requestHeaders:{},cache:!0});t.on(s.Event.SUCCESS,function(e){this._realResource=e.getXHR().responseURL,this.done()}.bind(this)),t.on(s.Event.ERROR,function(e){this.done()}.bind(this)),t.send()},getResource:function(){return this._realResource}},{Event:{DONE:\"done\"}});e.exports=a},dZ6b:function(e,t,i){var n=i(\"UbSY\"),s=i(\"CrDl\"),a=i(\"YXkS\"),r=i(\"YWDr\"),o=i(\"RVfe\"),l=s.extend({constructor:function(e,t){s.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=t,this._httpSecure=e.options.httpSecure,this._plugin=e,this.transformName=\"View\"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host=\"OFFLINE\",this.response.code=\"OFFLINE\",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData())return this.setData(this._plugin.getStoredData()),null;var e=o.Service.DATA,t={apiVersion:\"v7\",outputformat:\"json\"};null!==(t=this._plugin.requestBuilder.buildParams(t,e))&&(a.notice(e+\" \"+t.system),\"nicetest\"===t.system&&a.error(\"No accountCode has been set. Please set your accountCode inside plugin's options.\"),new n(this._plugin.getHost(),e,t).on(n.Event.SUCCESS,this._receiveData.bind(this)).on(n.Event.ERROR,this._failedData.bind(this)).send())},setData:function(e){try{var t=JSON.parse(e);this.response.msg=e,this.response.host=r.addProtocol(t.q.h,this._httpSecure),this.response.code=t.q.c,this.response.pingTime=t.q.pt||5,this.response.beatTime=t.q.i&&t.q.i.bt||30,this.response.sessionExpire=t.q.i&&t.q.i.exp||300,this._plugin.storage.setLocal(\"sessionExpire\",this.response.sessionExpire),this.done()}catch(e){a.error(\"Fastdata response is invalid.\")}},_receiveData:function(e,t){var i=e.getXHR().response;this.setData(i)},_failedData:function(e,t){a.error(\"Fastdata request has failed.\")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+\"_\"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(e){this._session=e},getParentIdVideo:function(){return this._session},getParentIdSession:function(){return this._parentId},setParentId:function(e){this._parentId=e},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(e){this._session=e},parse:function(e){e.host=e.host||this.response.host,e.params.sessionRoot=e.params.sessionRoot||this.getSessionRoot(),e.service!==o.Service.PING&&e.service!==o.Service.START||(e.params.pingTime=e.params.pingTime||this.response.pingTime),o.Service.SESSION_STOP===e.service&&(e.params.sessionRoot=this._session),-1===[o.Service.NAV,o.Service.SESSION_START,o.Service.SESSION_STOP,o.Service.EVENT,o.Service.BEAT].indexOf(e.service)?e.params.code=e.params.code||this.getViewCode():(e.params.sessionId=e.params.sessionId||this.getSessionId(),e.params.sessionRoot||(e.params.sessionRoot=e.params.sessionId)),o.Service.BEAT===e.service&&(e.params.sessions='[\"'+(e.params.sessionId||this.getSessionId())+'\"]'),-1!==[o.Service.START,o.Service.INIT,o.Service.ERROR].indexOf(e.service)&&this._plugin.storage.getLocal(\"infinityStarted\")&&(e.params.parentId=e.params.parentId||this.getParentIdVideo(),e.params.navContext=e.params.navContext||this._plugin.getContext()),o.Service.SESSION_START===e.service&&(e.params.parentId=e.params.parentId||this.getParentIdSession())}});e.exports=l},fDdK:function(e,t,i){var n=i(\"YXkS\"),s=i(\"YWDr\"),a=i(\"/8Pf\"),r={getPlayhead:function(){var e=0;if(this._adapter)try{e=this._adapter.getPlayhead()}catch(e){n.warn(\"An error occurred while calling getPlayhead\",e)}return s.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter)try{e=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(e=0)}catch(e){n.warn(\"An error occured while calling getPlayrate\",e)}return e},getFramesPerSecond:function(){var e=this.options[\"content.fps\"];if(null===e&&this._adapter)try{e=this._adapter.getFramesPerSecond()}catch(e){n.warn(\"An error occured while calling getFramesPerSecond\",e)}return e},getDroppedFrames:function(){var e=null;if(this._adapter)try{e=this._adapter.getDroppedFrames()}catch(e){n.warn(\"An error occured while calling getDroppedFrames\",e)}return e||(e=this.getWebkitDroppedFrames()),s.parseNumber(e,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var e=this.options[\"content.duration\"];if(null===e&&this._adapter)try{e=this._adapter.getDuration()}catch(e){n.warn(\"An error occured while calling getDuration\",e)}return 0===e&&(e=null),s.parseNumber(Math.round(e),null)},getBitrate:function(){var e=this.options[\"content.bitrate\"];if(null===e&&this._adapter){try{e=this._adapter.getBitrate()}catch(e){n.warn(\"An error occured while calling getBitrate\",e)}e&&-1!==e||(e=this.getWebkitBitrate())}return s.parseNumber(e,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getThroughput:function(){var e=this.options[\"content.throughput\"];if(null===e&&this._adapter)try{e=this._adapter.getThroughput()}catch(e){n.warn(\"An error occured while calling getThroughput\",e)}return s.parseNumber(e,-1)},getRendition:function(){var e=this.options[\"content.rendition\"];if(null===e&&this._adapter)try{e=this._adapter.getRendition()}catch(e){n.warn(\"An error occured while calling getRendition\",e)}return e},getTitle:function(){var e=this.options[\"content.title\"];if(null===e&&this._adapter)try{e=this._adapter.getTitle()}catch(e){n.warn(\"An error occured while calling getTitle\",e)}return e},getTitle2:function(){var e=this.options[\"content.title2\"];if(null===e&&this._adapter)try{e=this._adapter.getTitle2()}catch(e){n.warn(\"An error occured while calling getTitle2\",e)}return e},getIsLive:function(){var e=this.options[\"content.isLive\"];if(null===e&&this._adapter)try{e=this._adapter.getIsLive()}catch(e){n.warn(\"An error occured while calling getIsLive\",e)}return e||!1},getResource:function(){var e=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(e=this.resourceTransform.getResource()),e||this.getOriginalResource()},getOriginalResource:function(){var e=null;if(null===(e=this.options[\"content.resource\"])&&this._adapter)try{e=this._adapter.getResource()}catch(t){n.warn(\"An error occured while calling getResource\",t),e=null}return e||null},getTransactionCode:function(){return this.options[\"content.transactionCode\"]},getMetadata:function(){return this.options[\"content.metadata\"]},getPlayerVersion:function(){var e=\"\";if(this._adapter)try{e=this._adapter.getPlayerVersion()}catch(e){n.warn(\"An error occured while calling getPlayerVersion\",e)}return e},getPlayerName:function(){var e=\"\";if(this._adapter)try{e=this._adapter.getPlayerName()}catch(e){n.warn(\"An error occured while calling getPlayerName\",e)}return e},getCdn:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getCdnName()),e||this.options[\"content.cdn\"]},getPluginVersion:function(){var e=this.getAdapterVersion();return e||(e=a+\"-adapterless\"),e},getAdapterVersion:function(){var e=null;if(this._adapter)try{e=this._adapter.getVersion()}catch(e){n.warn(\"An error occured while calling getPluginVersion\",e)}return e},getCdnTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getCdnTraffic()}catch(e){n.warn(\"An error occured while calling getCdnTraffic\",e)}return e},getP2PTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getP2PTraffic()}catch(e){n.warn(\"An error occured while calling getP2PTraffic\",e)}return e},getUploadTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getUploadTraffic()}catch(e){n.warn(\"An error occured while calling getUploadTraffic\",e)}return e},getIsP2PEnabled:function(){var e=null;if(this._adapter)try{e=this._adapter.getIsP2PEnabled()}catch(e){n.warn(\"An error occured while calling getIsP2PEnabled\",e)}return e},getStreamingProtocol:function(){var e=this.options[\"content.streamingProtocol\"];return\"string\"!=typeof e?null:\"HDS\"!=(e=e.toUpperCase())&&\"HLS\"!=e&&\"MSS\"!=e&&\"DASH\"!=e&&\"RTMP\"!=e&&\"RTP\"!=e&&\"RTSP\"!=e?(n.warn(\"Streaming protocol \"+e+\" is not a valid value\"),null):e},getHouseholdId:function(){var e=null;if(this._adapter)try{e=this._adapter.getHouseholdId()}catch(e){n.warn(\"An error occurred while calling getHouseholdId\",e)}return e},getLatency:function(){var e=null;if(this._adapter)try{e=this._adapter.getLatency()}catch(e){n.warn(\"An error occurred while calling getLatency\",e)}return e},getPacketLoss:function(){var e=null;if(this._adapter)try{e=this._adapter.getPacketLoss()}catch(e){n.warn(\"An error occurred while calling getPacketLoss\",e)}return e},getPacketSent:function(){var e=null;if(this._adapter)try{e=this._adapter.getPacketSent()}catch(e){n.warn(\"An error occurred while calling getPacketSent\",e)}return e},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0}};e.exports=r},fl1Y:function(e,t){e.exports={cdnName:\"LEVEL3\",parsers:[{element:\"host+type\",headerName:\"X-WR-Diag\",regex:/Host:(.+)\\sType:(.+)/}],requestHeaders:{\"X-WR-Diag\":\"host\"},parseType:function(e){if(e){if(0===e.indexOf(\"TCP_HIT\")||0===e.indexOf(\"TCP_MEM_HIT\")||0===e.indexOf(\"TCP_IMS_HIT\"))return 1;if(0===e.indexOf(\"TCP_MISS\"))return 2}return 0}}},hi9x:function(e,t,i){var n=i(\"UbSY\"),s=i(\"2aCO\"),a=i(\"YXkS\"),r=s.extend({constructor:function(){this._realResource=null},done:function(){this.emit(r.Event.DONE)},parse:function(e,t){t=t||\"\";try{var i=/((\\S*?)(\\.m3u8|\\.m3u|\\.ts|\\.mp4)((\\?|\\;)\\S*|\\n|\\r|$))/i.exec(e)}catch(e){a.warn(\"Parse HLS Regex failed\",e),this.done()}if(null!==i){var s=i[1].trim(),r=t.lastIndexOf(\"/\");if(0!==s.indexOf(\"http\")&&-1!==r&&(s=t.slice(0,r)+\"/\"+s),\".m3u8\"===i[3]||\".m3u\"===i[3]){var o=new n(s,null,null,{cache:!0});o.on(n.Event.SUCCESS,function(e){this.parse(e.getXHR().responseText,i[2])}.bind(this)),o.on(n.Event.ERROR,function(e){this.done()}.bind(this)),o.send()}else this._realResource=s,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:\"done\"}});e.exports=r},hucw:function(e){e.exports={name:\"youboralib\",type:\"lib\",tech:\"js\",author:\"Jordi Aguilar\",version:\"6.4.11\",built:\"2018-12-03\",repo:\"https://bitbucket.org/npaw/lib-plugin-js.git\"}},mevm:function(e,t,i){var n=i(\"841u\").extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});e.exports=n},rVUg:function(e,t,i){var n=i(\"Qbk1\"),s=i(\"YWDr\"),a=n.extend({getListenersList:function(){},registerListeners:function(){if(this._registeredListeners&&0!=this._registeredListeners.length)return null;var e=this.getListenersList();for(var t in this._registeredListeners=[],e){var i=e[t].object;i||(i=this.player);var n=e[t].suscriber;n||(\"function\"==typeof i.addEventListener?n=\"addEventListener\":\"function\"==typeof i.on&&(n=\"on\"));var a=e[t].unsuscriber;a||(\"function\"==typeof i.removeEventListener?a=\"removeEventListener\":\"function\"==typeof i.off&&(a=\"off\"));var r=e[t].events,o=[];for(var l in r)o.push(l);for(var d in\"addEventListener\"===n||\"on\"===n?s.logAllEvents(i,[null].concat(o)):s.logAllEvents(i[n],[null].concat(o)),r)if(r[d]){this._registeredListeners.push([i,a,d,r[d].bind(this)]);var h=this._registeredListeners.length-1;i[n](d,this._registeredListeners[h][3])}}},unregisterListeners:function(){if(this.monitor.stop(),0===this._registeredListeners.length)return null;for(var e in this._registeredListeners){var t=this._registeredListeners[e],i=t[0],n=t[1],s=t[2],a=t[3];i[n](s,a)}this._registeredListeners=[]}});e.exports=a},tbpS:function(e,t){e.exports={cdnName:\"FASTLY\",parsers:[{element:\"host\",headerName:\"X-Served-By\",regex:/([^,\\s]+)$/},{element:\"type\",headerName:\"X-Cache\",regex:/([^,\\s]+)$/}],parseType:function(e){switch(e){case\"HIT\":return 1;case\"MISS\":return 2;default:return 0}}}},u60H:function(e,t,i){var n=i(\"YXkS\"),s=i(\"RVfe\"),a=i(\"Qbk1\"),r={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e){e.plugin?n.warn(\"Adapters can only be added to a single plugin\"):(this.removeAdsAdapter(),e.plugin=this,this._adsAdapter=e,this._adsAdapter.on(a.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(a.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(a.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(a.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(a.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(a.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(a.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(a.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(a.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(a.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(a.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(a.Event.INIT,this._adInitListener),this._adsAdapter.off(a.Event.START,this._adStartListener),this._adsAdapter.off(a.Event.JOIN,this._adJoinListener),this._adsAdapter.off(a.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(a.Event.RESUME,this._adResumeListener),this._adsAdapter.off(a.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(a.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(a.Event.STOP,this._adStopListener),this._adsAdapter.off(a.Event.ERROR,this._adErrorListener),this._adsAdapter.off(a.Event.CLICK,this._adClickListener),this._adsAdapter.off(a.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(e){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this.adInitSent=!0;var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_INIT,t),n.notice(s.Service.AD_INIT+\" \"+t.adPosition+t.adNumber+\" at \"+t.playhead+\"s\")},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit();var t=e.data.params||{};(this._adsAdapter.flags.isInited?t.adNumber=this.requestBuilder.lastSent.adNumber:t.adNumber=this.requestBuilder.getNewAdNumber(),this.options[\"ad.ignore\"])||((this.getAdResource()||this.getAdTitle())&&\"number\"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,t),n.notice(s.Service.AD_START+\" \"+t.adPosition+t.adNumber+\" at \"+t.playhead+\"s\")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(s.WillSendEvent.WILL_SEND_AD_INIT,s.Service.AD_INIT,t),n.notice(s.Service.AD_INIT+\" \"+t.adPosition+t.adNumber+\" at \"+t.playhead+\"s\")))},_adJoinListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||!this.adInitSent||this.adStartSent||(this._send(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,t),n.notice(s.Service.AD_START+\" \"+t.adPosition+t.adNumber+\" at \"+t.playhead+\"s\")),this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_JOIN,s.Service.AD_JOIN,t),n.notice(s.Service.AD_JOIN+\" \"+t.adJoinDuration+\"ms\"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_PAUSE,s.Service.AD_PAUSE,t),n.notice(s.Service.AD_PAUSE+\" at \"+t.adPlayhead+\"s\")},_adResumeListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_RESUME,s.Service.AD_RESUME,t),n.notice(s.Service.AD_RESUME+\" \"+t.adPauseDuration+\"ms\")},_adBufferBeginListener:function(e){n.notice(\"Ad Buffer Begin\"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_BUFFER,s.Service.AD_BUFFER,t),n.notice(s.Service.AD_BUFFER+\" \"+t.adBufferDuration+\"ms\")},_adStopListener:function(e){this._adapter&&!this._adapter.flags.isJoined?this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+this._adsAdapter.chronos.total.getDeltaTime(),(new Date).getTime()):!this._adapter&&this.isInitiated&&(this.initChrono.startTime=Math.min(this.initChrono.startTime+this._adsAdapter.chronos.total.getDeltaTime(),(new Date).getTime()));var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_STOP,s.Service.AD_STOP,t),n.notice(s.Service.AD_STOP+\" \"+t.adTotalDuration+\"ms\")},_adErrorListener:function(e){var t=e.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this._adapter.flags.isInited||this.isInitiated?this._blockAdError(e.data.params)?null:(this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?t.adNumber=this.requestBuilder.lastSent.adNumber:t.adNumber=this.requestBuilder.getNewAdNumber(),this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_ERROR,s.Service.AD_ERROR,t),void n.notice(s.Service.AD_ERROR)):(this._savedAdError=e,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_blockAdError:function(e){var t=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg)&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_CLICK,s.Service.AD_CLICK,t),n.notice(s.Service.AD_CLICK)},_adBlockedListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),this.options[\"ad.ignore\"]||this._send(s.WillSendEvent.WILL_SEND_AD_BLOCKED,s.Service.AD_BLOCKED,t),n.notice(s.Service.AD_BLOCKED)}};e.exports=r},wvST:function(e,t,i){var n=i(\"YXkS\"),s=i(\"YWDr\"),a={getAdPlayerVersion:function(){var e=\"\";if(this._adsAdapter)try{e=this._adsAdapter.getPlayerVersion()}catch(e){n.warn(\"An error occured while calling getAdPlayerVersion\",e)}return e},getAdPosition:function(){var e=\"pre\";if(this._adsAdapter)try{e=this._adsAdapter.getPosition()}catch(e){n.warn(\"An error occured while calling getAdPosition\",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?\"mid\":\"pre\"),e},getAdPlayhead:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getPlayhead()}catch(e){n.warn(\"An error occured while calling getAdPlayhead\",e)}return s.parseNumber(e,0)},getAdDuration:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getDuration()}catch(e){n.warn(\"An error occured while calling getAdDuration\",e)}return s.parseNumber(e,0)},getAdBitrate:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getBitrate()}catch(e){n.warn(\"An error occured while calling getAdBitrate\",e)}e&&-1!==e||(e=this.getWebkitAdBitrate())}return s.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getAdTitle:function(){var e=null;if(this.options[\"ad.title\"])return this.options[\"ad.title\"];if(this._adsAdapter)try{e=this._adsAdapter.getTitle()}catch(e){n.warn(\"An error occured while calling getAdTitle\",e)}return e},getAdResource:function(){var e=null;if(this.options[\"ad.resource\"])return this.options[\"ad.resource\"];if(this._adsAdapter)try{e=this._adsAdapter.getResource()}catch(e){n.warn(\"An error occured while calling getAdResource\",e)}return e},getAdCampaign:function(){return this.options[\"ad.campaign\"]?this.options[\"ad.campaign\"]:null},getAdAdapterVersion:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getVersion()}catch(e){n.warn(\"An error occured while calling getAdsAdapterVersion\",e)}return e},getAdMetadata:function(){return this.options[\"ad.metadata\"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};e.exports=a},xFsT:function(e,t,i){var n=i(\"841u\"),s=i(\"ENfY\"),a=n.extend({constructor:function(){this.storage=new s(\"youboraOffline\"),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,\"\"),this.viewList.push(e),this.storage.setLocal(\"views\",this.viewList),this.actualView=e},addEvent:function(e,t){if(\"/start\"===e&&this._newView(),\"/init\"===e)return null;if(!this.actualView)return null;var i='{\"request\":\"'+e.slice(1)+'\",';for(var n in i+='\"unixtime\":'+Date.now()+\",\",t){if(void 0===t[n])break;i+='\"'+n+'\":',\"code\"===n?i+='\"CODE_PLACEHOLDER\",':\"sessionId\"===n?i+='\"SESSION_PLACEHOLDER\",':\"parentId\"===n?i+='\"PARENT_PLACEHOLDER\",':\"sessionRoot\"===n?i+='\"ROOT_PLACEHOLDER\",':\"string\"==typeof t[n]?i+='\"'+t[n]+'\",':\"object\"==typeof t[n]?i+='\"'+JSON.stringify(t[n]).replace(/\"/g,'\\\\\"')+'\",':i+=t[n]+\",\"}i=i.slice(0,-1),i+=\"}\";var s=this.storage.getLocal(this.actualView);\"\"!=s&&(s+=\",\"),this.storage.setLocal(this.actualView,s+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(!this.givenIds.includes(t))return this.givenIds.push(t),[\"[\"+this.storage.getLocal(t)+\"]\",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal(\"views\",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e=\"\";this.storage.getLocal(\"views\")?e=this.storage.getLocal(\"views\"):this.storage.setLocal(\"views\",\"\"),\"\"===e?this.viewList=[]:\"function\"==typeof e.split&&(this.viewList=e.split(\",\"))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(e)>=0?this._getValidId():e},sent:function(){this.givenIds=[]}});e.exports=a},xTCX:function(e,t,i){var n=i(\"CrDl\"),s=i(\"hi9x\"),a=i(\"KbJE\"),r=i(\"dD1v\"),o=i(\"YXkS\"),l=i(\"RVfe\"),d=n.extend({constructor:function(e){d.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=e,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName=\"Resource\"},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options[\"content.resource\"]&&!this._plugin.options[\"parse.locationHeader\"]&&!this._plugin.options[\"parse.hls\"]?this._plugin.options[\"content.resource\"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=e,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),a.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,n.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),o.warn(\"ResourceTransform has exceded the maximum execution time (3s) and will be aborted.\"))}.bind(this),3e3)},_parseLocHeader:function(){var e=new r;e.parse(this._initResource),e.on(r.Event.DONE,function(){this._realResource=e.getResource(),this.done()}.bind(this))},_parseHLS:function(){var e=new s;e.on(s.Event.DONE,function(){this._realResource=e.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),e.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var e=this._cdnList.shift();if(this.getNodeHost())return;var t=a.create(e);t?(t.on(a.Event.DONE,function(){this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),t.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===l.Service.START){var t=this._plugin.requestBuilder.lastSent;t.mediaResource=e.params.mediaResource=this.getResource(),this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost(),t.nodeType=e.params.nodeType=this.getNodeType(),t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString())}}});e.exports=d},xUQT:function(e,t,i){var n=i(\"2aCO\"),s=i(\"Jt0h\"),a=n.extend({constructor:function(e){this._plugin=e,this._plugin.storage&&(this._plugin.storage.removeLocal(\"infinityStarted\"),this._plugin.storage.removeLocal(\"infinityStopped\"))},andBeyond:function(){a.prototype.begin.apply(this,arguments)},begin:function(e,t){this._comm=new s(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._plugin&&this._plugin.storage&&\"function\"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal(\"inifnityRegisteredProperties\")),t||this._plugin.getIsSessionExpired()||!this._plugin.storage.getLocal(\"infinityStarted\")?this.fireSessionStart(e,t):(this.fireNav(e),this._sendExtraBeat())},_generateNewContext:function(){var e=btoa((new Date).getTime());this._plugin.storage.setSession(\"context\",e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setLocal(\"lastactive\",(new Date).getTime()),this._plugin.storage.setSession(\"lastactive\",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(e,t){this._plugin.storage.setLocal(\"infinityStarted\",\"true\"),this._plugin.storage.removeLocal(\"infinityStopped\"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this._plugin.viewTransform._parentId=t,this.emit(a.Event.SESSION_START,this._getParamsJson(e,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(e){this.infinityStopped=!0,this.emit(a.Event.SESSION_STOP,e),this._plugin.storage.removeLocal(\"data\"),this._plugin.storage.removeLocal(\"session\"),this._plugin.storage.removeLocal(\"lastactive\"),this._plugin.storage.removeSession(\"data\"),this._plugin.storage.removeSession(\"session\"),this._plugin.storage.removeSession(\"lastactive\")},newSession:function(e,t){this.fireSessionStop(),this._plugin.storage.removeLocal(\"data\"),this._plugin.setOptions(e),this._plugin.restartViewTransform(),this.fireSessionStart(t)},fireNav:function(e){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(a.Event.NAV,this._getParamsJson(e,null,null,!0)))},_sendExtraBeat:function(){var e=(new Date).getTime();if(this._plugin&&this._plugin._beat){var t=this._plugin._beat.chrono.startTime?e-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(t),this._plugin._beat.chrono.startTime=e}this._setLastActive()},fireEvent:function(e,t,i){this.emit(a.Event.EVENT,this._getParamsJson(t,i,e)),this._setLastActive()},register:function(e,t){this._registeredProperties={dimensions:e,values:t},this._plugin.storage.setLocal(\"inifnityRegisteredProperties\",JSON.stringify(this._registeredProperties))},registerOnce:function(e,t){this._registeredProperties||this.register(e,t)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal(\"inifnityRegisteredProperties\")},_getParamsJson:function(e,t,i,n,s){var a={};if(i&&(a.name=i),a.dimensions=e||{},a.values=t||{},this._registeredProperties){for(var r in this._registeredProperties.dimensions)a.dimensions[r]=this._registeredProperties.dimensions[r];for(var r in this._registeredProperties.values)a.values[r]=this._registeredProperties.values[r]}var o={params:a};return n&&(o.params.dimensions.page&&(o.params.page=o.params.dimensions.page,delete o.params.dimensions.page),o.params.dimensions.route&&(o.params.route=o.params.dimensions.route,delete o.params.dimensions.route),s||delete o.params.dimensions,delete o.params.values),o},isActive:function(){var e=(new Date).getTime();return null!=this._plugin.storage.getLocal(\"infinityStarted\")&&!this._plugin.storage.getLocal(\"infinityStopped\")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>e}},{Event:{NAV:\"nav\",SESSION_START:\"sessionStart\",SESSION_STOP:\"sessionStop\",BEAT:\"beat\",EVENT:\"event\"}});e.exports=a},xq5L:function(e,t,i){var n=i(\"841u\").extend({constructor:function(e){this.plugin=e},getAllData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._navigatorCheck()?navigator.userAgent:null},getVirtualCores:function(){return this._navigatorCheck()?navigator.hardwareConcurrency:null},getLanguage:function(){return this._navigatorCheck()?navigator.language:null},getAvailableLanguages:function(){return this._navigatorCheck()?navigator.languages:null},getResolution:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null},getColorDepth:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null},getMemory:function(){return this._navigatorCheck()?navigator.deviceMemory:null},getTouchscreen:function(){return this._navigatorCheck()?navigator.maxTouchPoints:null},getLocalStorage:function(){return\"undefined\"!=typeof localStorage},getSessionStorage:function(){return\"undefined\"!=typeof sessionStorage},getCookiesAvailable:function(){return!!this._navigatorCheck()&&navigator.cookieEnabled},getHasFlash:function(){return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&\"object\"==typeof navigator.plugins[\"Shockwave Flash\"]||window.ActiveXObject&&0!=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\"))},getPluginList:function(){if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var e=\"\",t=0;t<navigator.plugins.length;t++)e+=navigator.plugins[t].description+\" \"+navigator.plugins[t].filename+\" \"+navigator.plugins[t].name+\" \";return e},getTimeZone:function(){return(new Date).getTimezoneOffset().toString()},_navigatorCheck:function(){return\"undefined\"!=typeof navigator}});e.exports=n},yDOl:function(e,t){e.exports=function(e){if(void 0===e||null===e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}},yMnN:function(e,t,i){var n=i(\"841u\"),s=i(\"be/F\"),a=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new s,this.seek=new s,this.pause=new s,this.buffer=new s,this.total=new s}});e.exports=a},yVQy:function(e,t){e.exports={cdnName:\"CLOUDFRT\",parsers:[{element:\"host\",headerName:\"X-Amz-Cf-Id\",regex:/(.+)/},{element:\"type\",headerName:\"X-Cache\",regex:/(\\S+)\\s.+/}],parseType:function(e){switch(e){case\"Hit\":return 1;case\"Miss\":return 2;default:return 0}}}},yaPV:function(e,t,i){var n=i(\"RVfe\"),s=i(\"YXkS\"),a=i(\"UbSY\"),r=i(\"xUQT\"),o={_initInfinity:function(){this.infinity.on(r.Event.NAV,this._navListener.bind(this)),this.infinity.on(r.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(r.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(r.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(e,t,i){var n={params:i=this.requestBuilder.buildParams(i,t),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(e,n),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=t,this.infinity._comm.sendRequest(new a(null,t,i)))},_navListener:function(e){var t=e.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV,n.Service.NAV,t),this._beat.isRunning||this._beat.start(),s.notice(n.Service.NAV+\" \"+t.route)},_sessionStartListener:function(e){var t=e.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_START,n.Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),s.notice(n.Service.SESSION_START+\" \"+t.route)},_sessionStopListener:function(e){var t=e.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_STOP,n.Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),s.notice(n.Service.SESSION_STOP+\" \"+t.route)},_eventListener:function(e){var t=e.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT,n.Service.EVENT,t),s.notice(n.Service.EVENT+\" \"+t.name)},_sendBeat:function(e){var t={diffTime:e,sessions:[this.getSessionId()]};this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT,n.Service.BEAT,t),this.infinity&&this.infinity._setLastActive(),s.verbose(n.Service.BEAT)}};e.exports=o}}]);\n//# sourceMappingURL=../sourcemaps/player-fw-d18b7b5d33.bundle.js.map"]],"target":"6play.js"}]